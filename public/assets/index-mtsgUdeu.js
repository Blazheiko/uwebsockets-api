var Sl=Object.defineProperty;var xl=(e,t,n)=>t in e?Sl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var mr=(e,t,n)=>xl(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zo(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Re={},Sn=[],Et=()=>{},Tl=()=>!1,Ns=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Wo=e=>e.startsWith("onUpdate:"),Ge=Object.assign,Ko=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},El=Object.prototype.hasOwnProperty,$e=(e,t)=>El.call(e,t),ve=Array.isArray,xn=e=>ls(e)==="[object Map]",Ln=e=>ls(e)==="[object Set]",wr=e=>ls(e)==="[object Date]",_e=e=>typeof e=="function",Fe=e=>typeof e=="string",At=e=>typeof e=="symbol",Pe=e=>e!==null&&typeof e=="object",Li=e=>(Pe(e)||_e(e))&&_e(e.then)&&_e(e.catch),Di=Object.prototype.toString,ls=e=>Di.call(e),Al=e=>ls(e).slice(8,-1),Pi=e=>ls(e)==="[object Object]",Go=e=>Fe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Un=zo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Il=/-(\w)/g,vt=Bs(e=>e.replace(Il,(t,n)=>n?n.toUpperCase():"")),Ml=/\B([A-Z])/g,en=Bs(e=>e.replace(Ml,"-$1").toLowerCase()),Hs=Bs(e=>e.charAt(0).toUpperCase()+e.slice(1)),so=Bs(e=>e?`on${Hs(e)}`:""),Zt=(e,t)=>!Object.is(e,t),bs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ri=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ts=e=>{const t=parseFloat(e);return isNaN(t)?e:t},$l=e=>{const t=Fe(e)?Number(e):NaN;return isNaN(t)?e:t};let yr;const Fs=()=>yr||(yr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ze(e){if(ve(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Fe(s)?Rl(s):Ze(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(Fe(e)||Pe(e))return e}const Ll=/;(?![^(]*\))/g,Dl=/:([^]+)/,Pl=/\/\*[^]*?\*\//g;function Rl(e){const t={};return e.replace(Pl,"").split(Ll).forEach(n=>{if(n){const s=n.split(Dl);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ke(e){let t="";if(Fe(e))t=e;else if(ve(e))for(let n=0;n<e.length;n++){const s=ke(e[n]);s&&(t+=s+" ")}else if(Pe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Vl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ol=zo(Vl);function Vi(e){return!!e||e===""}function Nl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=cs(e[s],t[s]);return n}function cs(e,t){if(e===t)return!0;let n=wr(e),s=wr(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=At(e),s=At(t),n||s)return e===t;if(n=ve(e),s=ve(t),n||s)return n&&s?Nl(e,t):!1;if(n=Pe(e),s=Pe(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!cs(e[a],t[a]))return!1}}return String(e)===String(t)}function qo(e,t){return e.findIndex(n=>cs(n,t))}const Oi=e=>!!(e&&e.__v_isRef===!0),G=e=>Fe(e)?e:e==null?"":ve(e)||Pe(e)&&(e.toString===Di||!_e(e.toString))?Oi(e)?G(e.value):JSON.stringify(e,Ni,2):String(e),Ni=(e,t)=>Oi(t)?Ni(e,t.value):xn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],i)=>(n[oo(s,i)+" =>"]=o,n),{})}:Ln(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>oo(n))}:At(t)?oo(t):Pe(t)&&!ve(t)&&!Pi(t)?String(t):t,oo=(e,t="")=>{var n;return At(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nt;class Bi{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nt,!t&&nt&&(this.index=(nt.scopes||(nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=nt;try{return nt=this,t()}finally{nt=n}}}on(){nt=this}off(){nt=this.parent}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Hi(e){return new Bi(e)}function Yo(){return nt}function Fi(e,t=!1){nt&&nt.cleanups.push(e)}let Ve;const ro=new WeakSet;class Ui{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nt&&nt.active&&nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ro.has(this)&&(ro.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,br(this),Wi(this);const t=Ve,n=mt;Ve=this,mt=!0;try{return this.fn()}finally{Ki(this),Ve=t,mt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Qo(t);this.deps=this.depsTail=void 0,br(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ro.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){So(this)&&this.run()}get dirty(){return So(this)}}let ji=0,jn,zn;function zi(e,t=!1){if(e.flags|=8,t){e.next=zn,zn=e;return}e.next=jn,jn=e}function Jo(){ji++}function Zo(){if(--ji>0)return;if(zn){let t=zn;for(zn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;jn;){let t=jn;for(jn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Wi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ki(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Qo(s),Bl(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function So(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Gi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Gi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qn))return;e.globalVersion=Qn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!So(e)){e.flags&=-3;return}const n=Ve,s=mt;Ve=e,mt=!0;try{Wi(e);const o=e.fn(e._value);(t.version===0||Zt(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Ve=n,mt=s,Ki(e),e.flags&=-3}}function Qo(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Qo(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Bl(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let mt=!0;const qi=[];function tn(){qi.push(mt),mt=!1}function nn(){const e=qi.pop();mt=e===void 0?!0:e}function br(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ve;Ve=void 0;try{t()}finally{Ve=n}}}let Qn=0;class Hl{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Us{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ve||!mt||Ve===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ve)n=this.activeLink=new Hl(Ve,this),Ve.deps?(n.prevDep=Ve.depsTail,Ve.depsTail.nextDep=n,Ve.depsTail=n):Ve.deps=Ve.depsTail=n,Yi(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Ve.depsTail,n.nextDep=void 0,Ve.depsTail.nextDep=n,Ve.depsTail=n,Ve.deps===n&&(Ve.deps=s)}return n}trigger(t){this.version++,Qn++,this.notify(t)}notify(t){Jo();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Zo()}}}function Yi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Yi(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Es=new WeakMap,un=Symbol(""),xo=Symbol(""),Xn=Symbol("");function Qe(e,t,n){if(mt&&Ve){let s=Es.get(e);s||Es.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new Us),o.map=s,o.key=n),o.track()}}function Dt(e,t,n,s,o,i){const a=Es.get(e);if(!a){Qn++;return}const l=c=>{c&&c.trigger()};if(Jo(),t==="clear")a.forEach(l);else{const c=ve(e),d=c&&Go(n);if(c&&n==="length"){const u=Number(s);a.forEach((f,p)=>{(p==="length"||p===Xn||!At(p)&&p>=u)&&l(f)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),d&&l(a.get(Xn)),t){case"add":c?d&&l(a.get("length")):(l(a.get(un)),xn(e)&&l(a.get(xo)));break;case"delete":c||(l(a.get(un)),xn(e)&&l(a.get(xo)));break;case"set":xn(e)&&l(a.get(un));break}}Zo()}function Fl(e,t){const n=Es.get(e);return n&&n.get(t)}function yn(e){const t=Ee(e);return t===e?t:(Qe(t,"iterate",Xn),pt(e)?t:t.map(Xe))}function js(e){return Qe(e=Ee(e),"iterate",Xn),e}const Ul={__proto__:null,[Symbol.iterator](){return io(this,Symbol.iterator,Xe)},concat(...e){return yn(this).concat(...e.map(t=>ve(t)?yn(t):t))},entries(){return io(this,"entries",e=>(e[1]=Xe(e[1]),e))},every(e,t){return It(this,"every",e,t,void 0,arguments)},filter(e,t){return It(this,"filter",e,t,n=>n.map(Xe),arguments)},find(e,t){return It(this,"find",e,t,Xe,arguments)},findIndex(e,t){return It(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return It(this,"findLast",e,t,Xe,arguments)},findLastIndex(e,t){return It(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return It(this,"forEach",e,t,void 0,arguments)},includes(...e){return ao(this,"includes",e)},indexOf(...e){return ao(this,"indexOf",e)},join(e){return yn(this).join(e)},lastIndexOf(...e){return ao(this,"lastIndexOf",e)},map(e,t){return It(this,"map",e,t,void 0,arguments)},pop(){return Pn(this,"pop")},push(...e){return Pn(this,"push",e)},reduce(e,...t){return _r(this,"reduce",e,t)},reduceRight(e,...t){return _r(this,"reduceRight",e,t)},shift(){return Pn(this,"shift")},some(e,t){return It(this,"some",e,t,void 0,arguments)},splice(...e){return Pn(this,"splice",e)},toReversed(){return yn(this).toReversed()},toSorted(e){return yn(this).toSorted(e)},toSpliced(...e){return yn(this).toSpliced(...e)},unshift(...e){return Pn(this,"unshift",e)},values(){return io(this,"values",Xe)}};function io(e,t,n){const s=js(e),o=s[t]();return s!==e&&!pt(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=n(i.value)),i}),o}const jl=Array.prototype;function It(e,t,n,s,o,i){const a=js(e),l=a!==e&&!pt(e),c=a[t];if(c!==jl[t]){const f=c.apply(e,i);return l?Xe(f):f}let d=n;a!==e&&(l?d=function(f,p){return n.call(this,Xe(f),p,e)}:n.length>2&&(d=function(f,p){return n.call(this,f,p,e)}));const u=c.call(a,d,s);return l&&o?o(u):u}function _r(e,t,n,s){const o=js(e);let i=n;return o!==e&&(pt(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Xe(l),c,e)}),o[t](i,...s)}function ao(e,t,n){const s=Ee(e);Qe(s,"iterate",Xn);const o=s[t](...n);return(o===-1||o===!1)&&er(n[0])?(n[0]=Ee(n[0]),s[t](...n)):o}function Pn(e,t,n=[]){tn(),Jo();const s=Ee(e)[t].apply(e,n);return Zo(),nn(),s}const zl=zo("__proto__,__v_isRef,__isVue"),Ji=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(At));function Wl(e){At(e)||(e=String(e));const t=Ee(this);return Qe(t,"has",e),t.hasOwnProperty(e)}class Zi{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?sa:na:i?ta:ea).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=ve(t);if(!o){let c;if(a&&(c=Ul[n]))return c;if(n==="hasOwnProperty")return Wl}const l=Reflect.get(t,n,He(t)?t:s);return(At(n)?Ji.has(n):zl(n))||(o||Qe(t,"get",n),i)?l:He(l)?a&&Go(n)?l:l.value:Pe(l)?o?Xo(l):Nt(l):l}}class Qi extends Zi{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];if(!this._isShallow){const c=vn(i);if(!pt(s)&&!vn(s)&&(i=Ee(i),s=Ee(s)),!ve(t)&&He(i)&&!He(s))return c?!1:(i.value=s,!0)}const a=ve(t)&&Go(n)?Number(n)<t.length:$e(t,n),l=Reflect.set(t,n,s,He(t)?t:o);return t===Ee(o)&&(a?Zt(s,i)&&Dt(t,"set",n,s):Dt(t,"add",n,s)),l}deleteProperty(t,n){const s=$e(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&Dt(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!At(n)||!Ji.has(n))&&Qe(t,"has",n),s}ownKeys(t){return Qe(t,"iterate",ve(t)?"length":un),Reflect.ownKeys(t)}}class Xi extends Zi{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Kl=new Qi,Gl=new Xi,ql=new Qi(!0),Yl=new Xi(!0),To=e=>e,vs=e=>Reflect.getPrototypeOf(e);function Jl(e,t,n){return function(...s){const o=this.__v_raw,i=Ee(o),a=xn(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,d=o[e](...s),u=n?To:t?Eo:Xe;return!t&&Qe(i,"iterate",c?xo:un),{next(){const{value:f,done:p}=d.next();return p?{value:f,done:p}:{value:l?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function hs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Zl(e,t){const n={get(o){const i=this.__v_raw,a=Ee(i),l=Ee(o);e||(Zt(o,l)&&Qe(a,"get",o),Qe(a,"get",l));const{has:c}=vs(a),d=t?To:e?Eo:Xe;if(c.call(a,o))return d(i.get(o));if(c.call(a,l))return d(i.get(l));i!==a&&i.get(o)},get size(){const o=this.__v_raw;return!e&&Qe(Ee(o),"iterate",un),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,a=Ee(i),l=Ee(o);return e||(Zt(o,l)&&Qe(a,"has",o),Qe(a,"has",l)),o===l?i.has(o):i.has(o)||i.has(l)},forEach(o,i){const a=this,l=a.__v_raw,c=Ee(l),d=t?To:e?Eo:Xe;return!e&&Qe(c,"iterate",un),l.forEach((u,f)=>o.call(i,d(u),d(f),a))}};return Ge(n,e?{add:hs("add"),set:hs("set"),delete:hs("delete"),clear:hs("clear")}:{add(o){!t&&!pt(o)&&!vn(o)&&(o=Ee(o));const i=Ee(this);return vs(i).has.call(i,o)||(i.add(o),Dt(i,"add",o,o)),this},set(o,i){!t&&!pt(i)&&!vn(i)&&(i=Ee(i));const a=Ee(this),{has:l,get:c}=vs(a);let d=l.call(a,o);d||(o=Ee(o),d=l.call(a,o));const u=c.call(a,o);return a.set(o,i),d?Zt(i,u)&&Dt(a,"set",o,i):Dt(a,"add",o,i),this},delete(o){const i=Ee(this),{has:a,get:l}=vs(i);let c=a.call(i,o);c||(o=Ee(o),c=a.call(i,o)),l&&l.call(i,o);const d=i.delete(o);return c&&Dt(i,"delete",o,void 0),d},clear(){const o=Ee(this),i=o.size!==0,a=o.clear();return i&&Dt(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Jl(o,e,t)}),n}function zs(e,t){const n=Zl(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get($e(n,o)&&o in s?n:s,o,i)}const Ql={get:zs(!1,!1)},Xl={get:zs(!1,!0)},ec={get:zs(!0,!1)},tc={get:zs(!0,!0)},ea=new WeakMap,ta=new WeakMap,na=new WeakMap,sa=new WeakMap;function nc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sc(e){return e.__v_skip||!Object.isExtensible(e)?0:nc(Al(e))}function Nt(e){return vn(e)?e:Ws(e,!1,Kl,Ql,ea)}function oa(e){return Ws(e,!1,ql,Xl,ta)}function Xo(e){return Ws(e,!0,Gl,ec,na)}function oc(e){return Ws(e,!0,Yl,tc,sa)}function Ws(e,t,n,s,o){if(!Pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const a=sc(e);if(a===0)return e;const l=new Proxy(e,a===2?s:n);return o.set(e,l),l}function Vt(e){return vn(e)?Vt(e.__v_raw):!!(e&&e.__v_isReactive)}function vn(e){return!!(e&&e.__v_isReadonly)}function pt(e){return!!(e&&e.__v_isShallow)}function er(e){return e?!!e.__v_raw:!1}function Ee(e){const t=e&&e.__v_raw;return t?Ee(t):e}function tr(e){return!$e(e,"__v_skip")&&Object.isExtensible(e)&&Ri(e,"__v_skip",!0),e}const Xe=e=>Pe(e)?Nt(e):e,Eo=e=>Pe(e)?Xo(e):e;function He(e){return e?e.__v_isRef===!0:!1}function O(e){return ra(e,!1)}function nr(e){return ra(e,!0)}function ra(e,t){return He(e)?e:new rc(e,t)}class rc{constructor(t,n){this.dep=new Us,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ee(t),this._value=n?t:Xe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||pt(t)||vn(t);t=s?t:Ee(t),Zt(t,n)&&(this._rawValue=t,this._value=s?t:Xe(t),this.dep.trigger())}}function te(e){return He(e)?e.value:e}function dn(e){return _e(e)?e():te(e)}const ic={get:(e,t,n)=>t==="__v_raw"?e:te(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return He(o)&&!He(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function ia(e){return Vt(e)?e:new Proxy(e,ic)}class ac{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Us,{get:s,set:o}=t(n.track.bind(n),n.trigger.bind(n));this._get=s,this._set=o}get value(){return this._value=this._get()}set value(t){this._set(t)}}function lc(e){return new ac(e)}function cc(e){const t=ve(e)?new Array(e.length):{};for(const n in e)t[n]=aa(e,n);return t}class uc{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Fl(Ee(this._object),this._key)}}class dc{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function sr(e,t,n){return He(e)?e:_e(e)?new dc(e):Pe(e)&&arguments.length>1?aa(e,t,n):O(e)}function aa(e,t,n){const s=e[t];return He(s)?s:new uc(e,t,n)}class fc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Us(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return zi(this,!0),!0}get value(){const t=this.dep.track();return Gi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pc(e,t,n=!1){let s,o;return _e(e)?s=e:(s=e.get,o=e.set),new fc(s,o,n)}const ms={},As=new WeakMap;let ln;function gc(e,t=!1,n=ln){if(n){let s=As.get(n);s||As.set(n,s=[]),s.push(e)}}function vc(e,t,n=Re){const{immediate:s,deep:o,once:i,scheduler:a,augmentJob:l,call:c}=n,d=R=>o?R:pt(R)||o===!1||o===0?Pt(R,1):Pt(R);let u,f,p,g,k=!1,v=!1;if(He(e)?(f=()=>e.value,k=pt(e)):Vt(e)?(f=()=>d(e),k=!0):ve(e)?(v=!0,k=e.some(R=>Vt(R)||pt(R)),f=()=>e.map(R=>{if(He(R))return R.value;if(Vt(R))return d(R);if(_e(R))return c?c(R,2):R()})):_e(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){tn();try{p()}finally{nn()}}const R=ln;ln=u;try{return c?c(e,3,[g]):e(g)}finally{ln=R}}:f=Et,t&&o){const R=f,Z=o===!0?1/0:o;f=()=>Pt(R(),Z)}const $=Yo(),I=()=>{u.stop(),$&&$.active&&Ko($.effects,u)};if(i&&t){const R=t;t=(...Z)=>{R(...Z),I()}}let D=v?new Array(e.length).fill(ms):ms;const P=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(t){const Z=u.run();if(o||k||(v?Z.some((Y,B)=>Zt(Y,D[B])):Zt(Z,D))){p&&p();const Y=ln;ln=u;try{const B=[Z,D===ms?void 0:v&&D[0]===ms?[]:D,g];c?c(t,3,B):t(...B),D=Z}finally{ln=Y}}}else u.run()};return l&&l(P),u=new Ui(f),u.scheduler=a?()=>a(P,!1):P,g=R=>gc(R,!1,u),p=u.onStop=()=>{const R=As.get(u);if(R){if(c)c(R,4);else for(const Z of R)Z();As.delete(u)}},t?s?P(!0):D=u.run():a?a(P.bind(null,!0),!0):u.run(),I.pause=u.pause.bind(u),I.resume=u.resume.bind(u),I.stop=I,I}function Pt(e,t=1/0,n){if(t<=0||!Pe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,He(e))Pt(e.value,t,n);else if(ve(e))for(let s=0;s<e.length;s++)Pt(e[s],t,n);else if(Ln(e)||xn(e))e.forEach(s=>{Pt(s,t,n)});else if(Pi(e)){for(const s in e)Pt(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Pt(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function us(e,t,n,s){try{return s?e(...s):e()}catch(o){Ks(o,t,n)}}function yt(e,t,n,s){if(_e(e)){const o=us(e,t,n,s);return o&&Li(o)&&o.catch(i=>{Ks(i,t,n)}),o}if(ve(e)){const o=[];for(let i=0;i<e.length;i++)o.push(yt(e[i],t,n,s));return o}}function Ks(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Re;if(t){let l=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,d)===!1)return}l=l.parent}if(i){tn(),us(i,null,10,[e,c,d]),nn();return}}hc(e,n,o,s,a)}function hc(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const st=[];let St=-1;const Tn=[];let Wt=null,_n=0;const la=Promise.resolve();let Is=null;function ze(e){const t=Is||la;return e?t.then(this?e.bind(this):e):t}function mc(e){let t=St+1,n=st.length;for(;t<n;){const s=t+n>>>1,o=st[s],i=es(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function or(e){if(!(e.flags&1)){const t=es(e),n=st[st.length-1];!n||!(e.flags&2)&&t>=es(n)?st.push(e):st.splice(mc(t),0,e),e.flags|=1,ca()}}function ca(){Is||(Is=la.then(da))}function wc(e){ve(e)?Tn.push(...e):Wt&&e.id===-1?Wt.splice(_n+1,0,e):e.flags&1||(Tn.push(e),e.flags|=1),ca()}function Cr(e,t,n=St+1){for(;n<st.length;n++){const s=st[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;st.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ua(e){if(Tn.length){const t=[...new Set(Tn)].sort((n,s)=>es(n)-es(s));if(Tn.length=0,Wt){Wt.push(...t);return}for(Wt=t,_n=0;_n<Wt.length;_n++){const n=Wt[_n];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Wt=null,_n=0}}const es=e=>e.id==null?e.flags&2?-1:1/0:e.id;function da(e){try{for(St=0;St<st.length;St++){const t=st[St];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),us(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;St<st.length;St++){const t=st[St];t&&(t.flags&=-2)}St=-1,st.length=0,ua(),Is=null,(st.length||Tn.length)&&da()}}let rt=null,fa=null;function Ms(e){const t=rt;return rt=e,fa=e&&e.type.__scopeId||null,t}function hn(e,t=rt,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&Or(-1);const i=Ms(t);let a;try{a=e(...o)}finally{Ms(i),s._d&&Or(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function we(e,t){if(rt===null)return e;const n=Zs(rt),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,a,l,c=Re]=t[o];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&Pt(a),s.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function sn(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let a=0;a<o.length;a++){const l=o[a];i&&(l.oldValue=i[a].value);let c=l.dir[s];c&&(tn(),yt(c,n,8,[e.el,l,e,t]),nn())}}const pa=Symbol("_vte"),ga=e=>e.__isTeleport,Wn=e=>e&&(e.disabled||e.disabled===""),kr=e=>e&&(e.defer||e.defer===""),Sr=e=>typeof SVGElement<"u"&&e instanceof SVGElement,xr=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ao=(e,t)=>{const n=e&&e.to;return Fe(n)?t?t(n):null:n},va={name:"Teleport",__isTeleport:!0,process(e,t,n,s,o,i,a,l,c,d){const{mc:u,pc:f,pbc:p,o:{insert:g,querySelector:k,createText:v,createComment:$}}=d,I=Wn(t.props);let{shapeFlag:D,children:P,dynamicChildren:R}=t;if(e==null){const Z=t.el=v(""),Y=t.anchor=v("");g(Z,n,s),g(Y,n,s);const B=(N,X)=>{D&16&&(o&&o.isCE&&(o.ce._teleportTarget=N),u(P,N,X,o,i,a,l,c))},U=()=>{const N=t.target=Ao(t.props,k),X=ha(N,t,v,g);N&&(a!=="svg"&&Sr(N)?a="svg":a!=="mathml"&&xr(N)&&(a="mathml"),I||(B(N,X),_s(t,!1)))};I&&(B(n,Y),_s(t,!0)),kr(t.props)?tt(()=>{U(),t.el.__isMounted=!0},i):U()}else{if(kr(t.props)&&!e.el.__isMounted){tt(()=>{va.process(e,t,n,s,o,i,a,l,c,d),delete e.el.__isMounted},i);return}t.el=e.el,t.targetStart=e.targetStart;const Z=t.anchor=e.anchor,Y=t.target=e.target,B=t.targetAnchor=e.targetAnchor,U=Wn(e.props),N=U?n:Y,X=U?Z:B;if(a==="svg"||Sr(Y)?a="svg":(a==="mathml"||xr(Y))&&(a="mathml"),R?(p(e.dynamicChildren,R,N,o,i,a,l),lr(e,t,!0)):c||f(e,t,N,X,o,i,a,l,!1),I)U?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ws(t,n,Z,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ce=t.target=Ao(t.props,k);ce&&ws(t,ce,null,d,0)}else U&&ws(t,Y,B,d,1);_s(t,I)}},remove(e,t,n,{um:s,o:{remove:o}},i){const{shapeFlag:a,children:l,anchor:c,targetStart:d,targetAnchor:u,target:f,props:p}=e;if(f&&(o(d),o(u)),i&&o(c),a&16){const g=i||!Wn(p);for(let k=0;k<l.length;k++){const v=l[k];s(v,t,n,g,!!v.dynamicChildren)}}},move:ws,hydrate:yc};function ws(e,t,n,{o:{insert:s},m:o},i=2){i===0&&s(e.targetAnchor,t,n);const{el:a,anchor:l,shapeFlag:c,children:d,props:u}=e,f=i===2;if(f&&s(a,t,n),(!f||Wn(u))&&c&16)for(let p=0;p<d.length;p++)o(d[p],t,n,2);f&&s(l,t,n)}function yc(e,t,n,s,o,i,{o:{nextSibling:a,parentNode:l,querySelector:c,insert:d,createText:u}},f){const p=t.target=Ao(t.props,c);if(p){const g=Wn(t.props),k=p._lpa||p.firstChild;if(t.shapeFlag&16)if(g)t.anchor=f(a(e),t,l(e),n,s,o,i),t.targetStart=k,t.targetAnchor=k&&a(k);else{t.anchor=a(e);let v=k;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")t.targetStart=v;else if(v.data==="teleport anchor"){t.targetAnchor=v,p._lpa=t.targetAnchor&&a(t.targetAnchor);break}}v=a(v)}t.targetAnchor||ha(p,t,u,d),f(k&&a(k),t,p,n,s,o,i)}_s(t,g)}return t.anchor&&a(t.anchor)}const Tr=va;function _s(e,t){const n=e.ctx;if(n&&n.ut){let s,o;for(t?(s=e.el,o=e.anchor):(s=e.targetStart,o=e.targetAnchor);s&&s!==o;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function ha(e,t,n,s){const o=t.targetStart=n(""),i=t.targetAnchor=n("");return o[pa]=i,e&&(s(o,e),s(i,e)),i}const Kt=Symbol("_leaveCb"),ys=Symbol("_enterCb");function ma(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ue(()=>{e.isMounted=!0}),ds(()=>{e.isUnmounting=!0}),e}const ft=[Function,Array],wa={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ft,onEnter:ft,onAfterEnter:ft,onEnterCancelled:ft,onBeforeLeave:ft,onLeave:ft,onAfterLeave:ft,onLeaveCancelled:ft,onBeforeAppear:ft,onAppear:ft,onAfterAppear:ft,onAppearCancelled:ft},ya=e=>{const t=e.subTree;return t.component?ya(t.component):t},bc={name:"BaseTransition",props:wa,setup(e,{slots:t}){const n=za(),s=ma();return()=>{const o=t.default&&rr(t.default(),!0);if(!o||!o.length)return;const i=ba(o),a=Ee(e),{mode:l}=a;if(s.isLeaving)return lo(i);const c=Er(i);if(!c)return lo(i);let d=ts(c,a,s,n,f=>d=f);c.type!==it&&mn(c,d);let u=n.subTree&&Er(n.subTree);if(u&&u.type!==it&&!cn(c,u)&&ya(n).type!==it){let f=ts(u,a,s,n);if(mn(u,f),l==="out-in"&&c.type!==it)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},lo(i);l==="in-out"&&c.type!==it?f.delayLeave=(p,g,k)=>{const v=_a(s,u);v[String(u.key)]=u,p[Kt]=()=>{g(),p[Kt]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{k(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function ba(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==it){t=n;break}}return t}const _c=bc;function _a(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ts(e,t,n,s,o){const{appear:i,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:k,onLeaveCancelled:v,onBeforeAppear:$,onAppear:I,onAfterAppear:D,onAppearCancelled:P}=t,R=String(e.key),Z=_a(n,e),Y=(N,X)=>{N&&yt(N,s,9,X)},B=(N,X)=>{const ce=X[1];Y(N,X),ve(N)?N.every(W=>W.length<=1)&&ce():N.length<=1&&ce()},U={mode:a,persisted:l,beforeEnter(N){let X=c;if(!n.isMounted)if(i)X=$||c;else return;N[Kt]&&N[Kt](!0);const ce=Z[R];ce&&cn(e,ce)&&ce.el[Kt]&&ce.el[Kt](),Y(X,[N])},enter(N){let X=d,ce=u,W=f;if(!n.isMounted)if(i)X=I||d,ce=D||u,W=P||f;else return;let F=!1;const oe=N[ys]=T=>{F||(F=!0,T?Y(W,[N]):Y(ce,[N]),U.delayedLeave&&U.delayedLeave(),N[ys]=void 0)};X?B(X,[N,oe]):oe()},leave(N,X){const ce=String(e.key);if(N[ys]&&N[ys](!0),n.isUnmounting)return X();Y(p,[N]);let W=!1;const F=N[Kt]=oe=>{W||(W=!0,X(),oe?Y(v,[N]):Y(k,[N]),N[Kt]=void 0,Z[ce]===e&&delete Z[ce])};Z[ce]=e,g?B(g,[N,F]):F()},clone(N){const X=ts(N,t,n,s,o);return o&&o(X),X}};return U}function lo(e){if(Gs(e))return e=Qt(e),e.children=null,e}function Er(e){if(!Gs(e))return ga(e.type)&&e.children?ba(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&_e(n.default))return n.default()}}function mn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,mn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function rr(e,t=!1,n){let s=[],o=0;for(let i=0;i<e.length;i++){let a=e[i];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:i);a.type===me?(a.patchFlag&128&&o++,s=s.concat(rr(a.children,t,l))):(t||a.type!==it)&&s.push(l!=null?Qt(a,{key:l}):a)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Ne(e,t){return _e(e)?Ge({name:e.name},t,{setup:e}):e}function Ca(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function $s(e,t,n,s,o=!1){if(ve(e)){e.forEach((k,v)=>$s(k,t&&(ve(t)?t[v]:t),n,s,o));return}if(Kn(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&$s(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Zs(s.component):s.el,a=o?null:i,{i:l,r:c}=e,d=t&&t.r,u=l.refs===Re?l.refs={}:l.refs,f=l.setupState,p=Ee(f),g=f===Re?()=>!1:k=>$e(p,k);if(d!=null&&d!==c&&(Fe(d)?(u[d]=null,g(d)&&(f[d]=null)):He(d)&&(d.value=null)),_e(c))us(c,l,12,[a,u]);else{const k=Fe(c),v=He(c);if(k||v){const $=()=>{if(e.f){const I=k?g(c)?f[c]:u[c]:c.value;o?ve(I)&&Ko(I,i):ve(I)?I.includes(i)||I.push(i):k?(u[c]=[i],g(c)&&(f[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else k?(u[c]=a,g(c)&&(f[c]=a)):v&&(c.value=a,e.k&&(u[e.k]=a))};a?($.id=-1,tt($,n)):$()}}}Fs().requestIdleCallback;Fs().cancelIdleCallback;const Kn=e=>!!e.type.__asyncLoader,Gs=e=>e.type.__isKeepAlive;function Cc(e,t){ka(e,"a",t)}function kc(e,t){ka(e,"da",t)}function ka(e,t,n=Ye){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(qs(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Gs(o.parent.vnode)&&Sc(s,t,n,o),o=o.parent}}function Sc(e,t,n,s){const o=qs(t,e,s,!0);at(()=>{Ko(s[t],o)},n)}function qs(e,t,n=Ye,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{tn();const l=fs(n),c=yt(t,n,e,a);return l(),nn(),c});return s?o.unshift(i):o.push(i),i}}const Bt=e=>(t,n=Ye)=>{(!ss||e==="sp")&&qs(e,(...s)=>t(...s),n)},xc=Bt("bm"),Ue=Bt("m"),Tc=Bt("bu"),Sa=Bt("u"),ds=Bt("bum"),at=Bt("um"),Ec=Bt("sp"),Ac=Bt("rtg"),Ic=Bt("rtc");function Mc(e,t=Ye){qs("ec",e,t)}const $c="components";function ir(e,t){return Dc($c,e,!0,t)||e}const Lc=Symbol.for("v-ndc");function Dc(e,t,n=!0,s=!1){const o=rt||Ye;if(o){const i=o.type;{const l=bu(i,!1);if(l&&(l===t||l===vt(t)||l===Hs(vt(t))))return i}const a=Ar(o[e]||i[e],t)||Ar(o.appContext[e],t);return!a&&s?i:a}}function Ar(e,t){return e&&(e[t]||e[vt(t)]||e[Hs(vt(t))])}function De(e,t,n,s){let o;const i=n,a=ve(e);if(a||Fe(e)){const l=a&&Vt(e);let c=!1;l&&(c=!pt(e),e=js(e)),o=new Array(e.length);for(let d=0,u=e.length;d<u;d++)o[d]=t(c?Xe(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,i)}else if(Pe(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,d=l.length;c<d;c++){const u=l[c];o[c]=t(e[u],u,c,i)}}else o=[];return o}const Io=e=>e?Wa(e)?Zs(e):Io(e.parent):null,Gn=Ge(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Io(e.parent),$root:e=>Io(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ta(e),$forceUpdate:e=>e.f||(e.f=()=>{or(e.update)}),$nextTick:e=>e.n||(e.n=ze.bind(e.proxy)),$watch:e=>tu.bind(e)}),co=(e,t)=>e!==Re&&!e.__isScriptSetup&&$e(e,t),Pc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:a,type:l,appContext:c}=e;let d;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(co(s,t))return a[t]=1,s[t];if(o!==Re&&$e(o,t))return a[t]=2,o[t];if((d=e.propsOptions[0])&&$e(d,t))return a[t]=3,i[t];if(n!==Re&&$e(n,t))return a[t]=4,n[t];Mo&&(a[t]=0)}}const u=Gn[t];let f,p;if(u)return t==="$attrs"&&Qe(e.attrs,"get",""),u(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(n!==Re&&$e(n,t))return a[t]=4,n[t];if(p=c.config.globalProperties,$e(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return co(o,t)?(o[t]=n,!0):s!==Re&&$e(s,t)?(s[t]=n,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i}},a){let l;return!!n[a]||e!==Re&&$e(e,a)||co(t,a)||(l=i[0])&&$e(l,a)||$e(s,a)||$e(Gn,a)||$e(o.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:$e(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ir(e){return ve(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Mo=!0;function Rc(e){const t=Ta(e),n=e.proxy,s=e.ctx;Mo=!1,t.beforeCreate&&Mr(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:a,watch:l,provide:c,inject:d,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:k,activated:v,deactivated:$,beforeDestroy:I,beforeUnmount:D,destroyed:P,unmounted:R,render:Z,renderTracked:Y,renderTriggered:B,errorCaptured:U,serverPrefetch:N,expose:X,inheritAttrs:ce,components:W,directives:F,filters:oe}=t;if(d&&Vc(d,s,null),a)for(const L in a){const Q=a[L];_e(Q)&&(s[L]=Q.bind(n))}if(o){const L=o.call(n,n);Pe(L)&&(e.data=Nt(L))}if(Mo=!0,i)for(const L in i){const Q=i[L],M=_e(Q)?Q.bind(n,n):_e(Q.get)?Q.get.bind(n,n):Et,_=!_e(Q)&&_e(Q.set)?Q.set.bind(n):Et,V=Se({get:M,set:_});Object.defineProperty(s,L,{enumerable:!0,configurable:!0,get:()=>V.value,set:A=>V.value=A})}if(l)for(const L in l)xa(l[L],s,n,L);if(c){const L=_e(c)?c.call(n):c;Reflect.ownKeys(L).forEach(Q=>{Cs(Q,L[Q])})}u&&Mr(u,e,"c");function x(L,Q){ve(Q)?Q.forEach(M=>L(M.bind(n))):Q&&L(Q.bind(n))}if(x(xc,f),x(Ue,p),x(Tc,g),x(Sa,k),x(Cc,v),x(kc,$),x(Mc,U),x(Ic,Y),x(Ac,B),x(ds,D),x(at,R),x(Ec,N),ve(X))if(X.length){const L=e.exposed||(e.exposed={});X.forEach(Q=>{Object.defineProperty(L,Q,{get:()=>n[Q],set:M=>n[Q]=M})})}else e.exposed||(e.exposed={});Z&&e.render===Et&&(e.render=Z),ce!=null&&(e.inheritAttrs=ce),W&&(e.components=W),F&&(e.directives=F),N&&Ca(e)}function Vc(e,t,n=Et){ve(e)&&(e=$o(e));for(const s in e){const o=e[s];let i;Pe(o)?"default"in o?i=gt(o.from||s,o.default,!0):i=gt(o.from||s):i=gt(o),He(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[s]=i}}function Mr(e,t,n){yt(ve(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function xa(e,t,n,s){let o=s.includes(".")?Ba(n,s):()=>n[s];if(Fe(e)){const i=t[e];_e(i)&&Be(o,i)}else if(_e(e))Be(o,e.bind(n));else if(Pe(e))if(ve(e))e.forEach(i=>xa(i,t,n,s));else{const i=_e(e.handler)?e.handler.bind(n):t[e.handler];_e(i)&&Be(o,i,e)}}function Ta(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!o.length&&!n&&!s?c=t:(c={},o.length&&o.forEach(d=>Ls(c,d,a,!0)),Ls(c,t,a)),Pe(t)&&i.set(t,c),c}function Ls(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&Ls(e,i,n,!0),o&&o.forEach(a=>Ls(e,a,n,!0));for(const a in t)if(!(s&&a==="expose")){const l=Oc[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Oc={data:$r,props:Lr,emits:Lr,methods:Fn,computed:Fn,beforeCreate:et,created:et,beforeMount:et,mounted:et,beforeUpdate:et,updated:et,beforeDestroy:et,beforeUnmount:et,destroyed:et,unmounted:et,activated:et,deactivated:et,errorCaptured:et,serverPrefetch:et,components:Fn,directives:Fn,watch:Bc,provide:$r,inject:Nc};function $r(e,t){return t?e?function(){return Ge(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function Nc(e,t){return Fn($o(e),$o(t))}function $o(e){if(ve(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function et(e,t){return e?[...new Set([].concat(e,t))]:t}function Fn(e,t){return e?Ge(Object.create(null),e,t):t}function Lr(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:Ge(Object.create(null),Ir(e),Ir(t??{})):t}function Bc(e,t){if(!e)return t;if(!t)return e;const n=Ge(Object.create(null),e);for(const s in t)n[s]=et(e[s],t[s]);return n}function Ea(){return{app:null,config:{isNativeTag:Tl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hc=0;function Fc(e,t){return function(s,o=null){_e(s)||(s=Ge({},s)),o!=null&&!Pe(o)&&(o=null);const i=Ea(),a=new WeakSet,l=[];let c=!1;const d=i.app={_uid:Hc++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:Cu,get config(){return i.config},set config(u){},use(u,...f){return a.has(u)||(u&&_e(u.install)?(a.add(u),u.install(d,...f)):_e(u)&&(a.add(u),u(d,...f))),d},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),d},component(u,f){return f?(i.components[u]=f,d):i.components[u]},directive(u,f){return f?(i.directives[u]=f,d):i.directives[u]},mount(u,f,p){if(!c){const g=d._ceVNode||xe(s,o);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),e(g,u,p),c=!0,d._container=u,u.__vue_app__=d,Zs(g.component)}},onUnmount(u){l.push(u)},unmount(){c&&(yt(l,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,f){return i.provides[u]=f,d},runWithContext(u){const f=fn;fn=d;try{return u()}finally{fn=f}}};return d}}let fn=null;function Cs(e,t){if(Ye){let n=Ye.provides;const s=Ye.parent&&Ye.parent.provides;s===n&&(n=Ye.provides=Object.create(s)),n[e]=t}}function gt(e,t,n=!1){const s=Ye||rt;if(s||fn){const o=fn?fn._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&_e(t)?t.call(s&&s.proxy):t}}function Uc(){return!!(Ye||rt||fn)}const Aa={},Ia=()=>Object.create(Aa),Ma=e=>Object.getPrototypeOf(e)===Aa;function jc(e,t,n,s=!1){const o={},i=Ia();e.propsDefaults=Object.create(null),$a(e,t,o,i);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);n?e.props=s?o:oa(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function zc(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:a}}=e,l=Ee(o),[c]=e.propsOptions;let d=!1;if((s||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(Ys(e.emitsOptions,p))continue;const g=t[p];if(c)if($e(i,p))g!==i[p]&&(i[p]=g,d=!0);else{const k=vt(p);o[k]=Lo(c,l,k,g,e,!1)}else g!==i[p]&&(i[p]=g,d=!0)}}}else{$a(e,t,o,i)&&(d=!0);let u;for(const f in l)(!t||!$e(t,f)&&((u=en(f))===f||!$e(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(o[f]=Lo(c,l,f,void 0,e,!0)):delete o[f]);if(i!==l)for(const f in i)(!t||!$e(t,f))&&(delete i[f],d=!0)}d&&Dt(e.attrs,"set","")}function $a(e,t,n,s){const[o,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(Un(c))continue;const d=t[c];let u;o&&$e(o,u=vt(c))?!i||!i.includes(u)?n[u]=d:(l||(l={}))[u]=d:Ys(e.emitsOptions,c)||(!(c in s)||d!==s[c])&&(s[c]=d,a=!0)}if(i){const c=Ee(n),d=l||Re;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Lo(o,c,f,d[f],e,!$e(d,f))}}return a}function Lo(e,t,n,s,o,i){const a=e[n];if(a!=null){const l=$e(a,"default");if(l&&s===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&_e(c)){const{propsDefaults:d}=o;if(n in d)s=d[n];else{const u=fs(o);s=d[n]=c.call(null,t),u()}}else s=c;o.ce&&o.ce._setProp(n,s)}a[0]&&(i&&!l?s=!1:a[1]&&(s===""||s===en(n))&&(s=!0))}return s}const Wc=new WeakMap;function La(e,t,n=!1){const s=n?Wc:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,a={},l=[];let c=!1;if(!_e(e)){const u=f=>{c=!0;const[p,g]=La(f,t,!0);Ge(a,p),g&&l.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!c)return Pe(e)&&s.set(e,Sn),Sn;if(ve(i))for(let u=0;u<i.length;u++){const f=vt(i[u]);Dr(f)&&(a[f]=Re)}else if(i)for(const u in i){const f=vt(u);if(Dr(f)){const p=i[u],g=a[f]=ve(p)||_e(p)?{type:p}:Ge({},p),k=g.type;let v=!1,$=!0;if(ve(k))for(let I=0;I<k.length;++I){const D=k[I],P=_e(D)&&D.name;if(P==="Boolean"){v=!0;break}else P==="String"&&($=!1)}else v=_e(k)&&k.name==="Boolean";g[0]=v,g[1]=$,(v||$e(g,"default"))&&l.push(f)}}const d=[a,l];return Pe(e)&&s.set(e,d),d}function Dr(e){return e[0]!=="$"&&!Un(e)}const Da=e=>e[0]==="_"||e==="$stable",ar=e=>ve(e)?e.map(Tt):[Tt(e)],Kc=(e,t,n)=>{if(t._n)return t;const s=hn((...o)=>ar(t(...o)),n);return s._c=!1,s},Pa=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Da(o))continue;const i=e[o];if(_e(i))t[o]=Kc(o,i,s);else if(i!=null){const a=ar(i);t[o]=()=>a}}},Ra=(e,t)=>{const n=ar(t);e.slots.default=()=>n},Va=(e,t,n)=>{for(const s in t)(n||s!=="_")&&(e[s]=t[s])},Gc=(e,t,n)=>{const s=e.slots=Ia();if(e.vnode.shapeFlag&32){const o=t._;o?(Va(s,t,n),n&&Ri(s,"_",o,!0)):Pa(t,s)}else t&&Ra(e,t)},qc=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,a=Re;if(s.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Va(o,t,n):(i=!t.$stable,Pa(t,o)),a=t}else t&&(Ra(e,t),a={default:1});if(i)for(const l in o)!Da(l)&&a[l]==null&&delete o[l]},tt=lu;function Yc(e){return Jc(e)}function Jc(e,t){const n=Fs();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:a,createText:l,createComment:c,setText:d,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=Et,insertStaticContent:k}=e,v=(h,m,E,H=null,K=null,z=null,ne=void 0,ie=null,ae=!!m.dynamicChildren)=>{if(h===m)return;h&&!cn(h,m)&&(H=C(h),A(h,K,z,!0),h=null),m.patchFlag===-2&&(ae=!1,m.dynamicChildren=null);const{type:se,ref:ge,shapeFlag:fe}=m;switch(se){case Js:$(h,m,E,H);break;case it:I(h,m,E,H);break;case ks:h==null&&D(m,E,H,ne);break;case me:W(h,m,E,H,K,z,ne,ie,ae);break;default:fe&1?Z(h,m,E,H,K,z,ne,ie,ae):fe&6?F(h,m,E,H,K,z,ne,ie,ae):(fe&64||fe&128)&&se.process(h,m,E,H,K,z,ne,ie,ae,ue)}ge!=null&&K&&$s(ge,h&&h.ref,z,m||h,!m)},$=(h,m,E,H)=>{if(h==null)s(m.el=l(m.children),E,H);else{const K=m.el=h.el;m.children!==h.children&&d(K,m.children)}},I=(h,m,E,H)=>{h==null?s(m.el=c(m.children||""),E,H):m.el=h.el},D=(h,m,E,H)=>{[h.el,h.anchor]=k(h.children,m,E,H,h.el,h.anchor)},P=({el:h,anchor:m},E,H)=>{let K;for(;h&&h!==m;)K=p(h),s(h,E,H),h=K;s(m,E,H)},R=({el:h,anchor:m})=>{let E;for(;h&&h!==m;)E=p(h),o(h),h=E;o(m)},Z=(h,m,E,H,K,z,ne,ie,ae)=>{m.type==="svg"?ne="svg":m.type==="math"&&(ne="mathml"),h==null?Y(m,E,H,K,z,ne,ie,ae):N(h,m,K,z,ne,ie,ae)},Y=(h,m,E,H,K,z,ne,ie)=>{let ae,se;const{props:ge,shapeFlag:fe,transition:pe,dirs:ye}=h;if(ae=h.el=a(h.type,z,ge&&ge.is,ge),fe&8?u(ae,h.children):fe&16&&U(h.children,ae,null,H,K,uo(h,z),ne,ie),ye&&sn(h,null,H,"created"),B(ae,h,h.scopeId,ne,H),ge){for(const Le in ge)Le!=="value"&&!Un(Le)&&i(ae,Le,null,ge[Le],z,H);"value"in ge&&i(ae,"value",null,ge.value,z),(se=ge.onVnodeBeforeMount)&&Ct(se,H,h)}ye&&sn(h,null,H,"beforeMount");const Te=Zc(K,pe);Te&&pe.beforeEnter(ae),s(ae,m,E),((se=ge&&ge.onVnodeMounted)||Te||ye)&&tt(()=>{se&&Ct(se,H,h),Te&&pe.enter(ae),ye&&sn(h,null,H,"mounted")},K)},B=(h,m,E,H,K)=>{if(E&&g(h,E),H)for(let z=0;z<H.length;z++)g(h,H[z]);if(K){let z=K.subTree;if(m===z||Fa(z.type)&&(z.ssContent===m||z.ssFallback===m)){const ne=K.vnode;B(h,ne,ne.scopeId,ne.slotScopeIds,K.parent)}}},U=(h,m,E,H,K,z,ne,ie,ae=0)=>{for(let se=ae;se<h.length;se++){const ge=h[se]=ie?Gt(h[se]):Tt(h[se]);v(null,ge,m,E,H,K,z,ne,ie)}},N=(h,m,E,H,K,z,ne)=>{const ie=m.el=h.el;let{patchFlag:ae,dynamicChildren:se,dirs:ge}=m;ae|=h.patchFlag&16;const fe=h.props||Re,pe=m.props||Re;let ye;if(E&&on(E,!1),(ye=pe.onVnodeBeforeUpdate)&&Ct(ye,E,m,h),ge&&sn(m,h,E,"beforeUpdate"),E&&on(E,!0),(fe.innerHTML&&pe.innerHTML==null||fe.textContent&&pe.textContent==null)&&u(ie,""),se?X(h.dynamicChildren,se,ie,E,H,uo(m,K),z):ne||Q(h,m,ie,null,E,H,uo(m,K),z,!1),ae>0){if(ae&16)ce(ie,fe,pe,E,K);else if(ae&2&&fe.class!==pe.class&&i(ie,"class",null,pe.class,K),ae&4&&i(ie,"style",fe.style,pe.style,K),ae&8){const Te=m.dynamicProps;for(let Le=0;Le<Te.length;Le++){const Ie=Te[Le],ee=fe[Ie],le=pe[Ie];(le!==ee||Ie==="value")&&i(ie,Ie,ee,le,K,E)}}ae&1&&h.children!==m.children&&u(ie,m.children)}else!ne&&se==null&&ce(ie,fe,pe,E,K);((ye=pe.onVnodeUpdated)||ge)&&tt(()=>{ye&&Ct(ye,E,m,h),ge&&sn(m,h,E,"updated")},H)},X=(h,m,E,H,K,z,ne)=>{for(let ie=0;ie<m.length;ie++){const ae=h[ie],se=m[ie],ge=ae.el&&(ae.type===me||!cn(ae,se)||ae.shapeFlag&70)?f(ae.el):E;v(ae,se,ge,null,H,K,z,ne,!0)}},ce=(h,m,E,H,K)=>{if(m!==E){if(m!==Re)for(const z in m)!Un(z)&&!(z in E)&&i(h,z,m[z],null,K,H);for(const z in E){if(Un(z))continue;const ne=E[z],ie=m[z];ne!==ie&&z!=="value"&&i(h,z,ie,ne,K,H)}"value"in E&&i(h,"value",m.value,E.value,K)}},W=(h,m,E,H,K,z,ne,ie,ae)=>{const se=m.el=h?h.el:l(""),ge=m.anchor=h?h.anchor:l("");let{patchFlag:fe,dynamicChildren:pe,slotScopeIds:ye}=m;ye&&(ie=ie?ie.concat(ye):ye),h==null?(s(se,E,H),s(ge,E,H),U(m.children||[],E,ge,K,z,ne,ie,ae)):fe>0&&fe&64&&pe&&h.dynamicChildren?(X(h.dynamicChildren,pe,E,K,z,ne,ie),(m.key!=null||K&&m===K.subTree)&&lr(h,m,!0)):Q(h,m,E,ge,K,z,ne,ie,ae)},F=(h,m,E,H,K,z,ne,ie,ae)=>{m.slotScopeIds=ie,h==null?m.shapeFlag&512?K.ctx.activate(m,E,H,ne,ae):oe(m,E,H,K,z,ne,ae):T(h,m,ae)},oe=(h,m,E,H,K,z,ne)=>{const ie=h.component=vu(h,H,K);if(Gs(h)&&(ie.ctx.renderer=ue),hu(ie,!1,ne),ie.asyncDep){if(K&&K.registerDep(ie,x,ne),!h.el){const ae=ie.subTree=xe(it);I(null,ae,m,E)}}else x(ie,h,m,E,K,z,ne)},T=(h,m,E)=>{const H=m.component=h.component;if(iu(h,m,E))if(H.asyncDep&&!H.asyncResolved){L(H,m,E);return}else H.next=m,H.update();else m.el=h.el,H.vnode=m},x=(h,m,E,H,K,z,ne)=>{const ie=()=>{if(h.isMounted){let{next:fe,bu:pe,u:ye,parent:Te,vnode:Le}=h;{const Je=Oa(h);if(Je){fe&&(fe.el=Le.el,L(h,fe,ne)),Je.asyncDep.then(()=>{h.isUnmounted||ie()});return}}let Ie=fe,ee;on(h,!1),fe?(fe.el=Le.el,L(h,fe,ne)):fe=Le,pe&&bs(pe),(ee=fe.props&&fe.props.onVnodeBeforeUpdate)&&Ct(ee,Te,fe,Le),on(h,!0);const le=Rr(h),he=h.subTree;h.subTree=le,v(he,le,f(he.el),C(he),h,K,z),fe.el=le.el,Ie===null&&au(h,le.el),ye&&tt(ye,K),(ee=fe.props&&fe.props.onVnodeUpdated)&&tt(()=>Ct(ee,Te,fe,Le),K)}else{let fe;const{el:pe,props:ye}=m,{bm:Te,m:Le,parent:Ie,root:ee,type:le}=h,he=Kn(m);on(h,!1),Te&&bs(Te),!he&&(fe=ye&&ye.onVnodeBeforeMount)&&Ct(fe,Ie,m),on(h,!0);{ee.ce&&ee.ce._injectChildStyle(le);const Je=h.subTree=Rr(h);v(null,Je,E,H,h,K,z),m.el=Je.el}if(Le&&tt(Le,K),!he&&(fe=ye&&ye.onVnodeMounted)){const Je=m;tt(()=>Ct(fe,Ie,Je),K)}(m.shapeFlag&256||Ie&&Kn(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&h.a&&tt(h.a,K),h.isMounted=!0,m=E=H=null}};h.scope.on();const ae=h.effect=new Ui(ie);h.scope.off();const se=h.update=ae.run.bind(ae),ge=h.job=ae.runIfDirty.bind(ae);ge.i=h,ge.id=h.uid,ae.scheduler=()=>or(ge),on(h,!0),se()},L=(h,m,E)=>{m.component=h;const H=h.vnode.props;h.vnode=m,h.next=null,zc(h,m.props,H,E),qc(h,m.children,E),tn(),Cr(h),nn()},Q=(h,m,E,H,K,z,ne,ie,ae=!1)=>{const se=h&&h.children,ge=h?h.shapeFlag:0,fe=m.children,{patchFlag:pe,shapeFlag:ye}=m;if(pe>0){if(pe&128){_(se,fe,E,H,K,z,ne,ie,ae);return}else if(pe&256){M(se,fe,E,H,K,z,ne,ie,ae);return}}ye&8?(ge&16&&j(se,K,z),fe!==se&&u(E,fe)):ge&16?ye&16?_(se,fe,E,H,K,z,ne,ie,ae):j(se,K,z,!0):(ge&8&&u(E,""),ye&16&&U(fe,E,H,K,z,ne,ie,ae))},M=(h,m,E,H,K,z,ne,ie,ae)=>{h=h||Sn,m=m||Sn;const se=h.length,ge=m.length,fe=Math.min(se,ge);let pe;for(pe=0;pe<fe;pe++){const ye=m[pe]=ae?Gt(m[pe]):Tt(m[pe]);v(h[pe],ye,E,null,K,z,ne,ie,ae)}se>ge?j(h,K,z,!0,!1,fe):U(m,E,H,K,z,ne,ie,ae,fe)},_=(h,m,E,H,K,z,ne,ie,ae)=>{let se=0;const ge=m.length;let fe=h.length-1,pe=ge-1;for(;se<=fe&&se<=pe;){const ye=h[se],Te=m[se]=ae?Gt(m[se]):Tt(m[se]);if(cn(ye,Te))v(ye,Te,E,null,K,z,ne,ie,ae);else break;se++}for(;se<=fe&&se<=pe;){const ye=h[fe],Te=m[pe]=ae?Gt(m[pe]):Tt(m[pe]);if(cn(ye,Te))v(ye,Te,E,null,K,z,ne,ie,ae);else break;fe--,pe--}if(se>fe){if(se<=pe){const ye=pe+1,Te=ye<ge?m[ye].el:H;for(;se<=pe;)v(null,m[se]=ae?Gt(m[se]):Tt(m[se]),E,Te,K,z,ne,ie,ae),se++}}else if(se>pe)for(;se<=fe;)A(h[se],K,z,!0),se++;else{const ye=se,Te=se,Le=new Map;for(se=Te;se<=pe;se++){const We=m[se]=ae?Gt(m[se]):Tt(m[se]);We.key!=null&&Le.set(We.key,se)}let Ie,ee=0;const le=pe-Te+1;let he=!1,Je=0;const Ke=new Array(le);for(se=0;se<le;se++)Ke[se]=0;for(se=ye;se<=fe;se++){const We=h[se];if(ee>=le){A(We,K,z,!0);continue}let qe;if(We.key!=null)qe=Le.get(We.key);else for(Ie=Te;Ie<=pe;Ie++)if(Ke[Ie-Te]===0&&cn(We,m[Ie])){qe=Ie;break}qe===void 0?A(We,K,z,!0):(Ke[qe-Te]=se+1,qe>=Je?Je=qe:he=!0,v(We,m[qe],E,null,K,z,ne,ie,ae),ee++)}const dt=he?Qc(Ke):Sn;for(Ie=dt.length-1,se=le-1;se>=0;se--){const We=Te+se,qe=m[We],wn=We+1<ge?m[We+1].el:H;Ke[se]===0?v(null,qe,E,wn,K,z,ne,ie,ae):he&&(Ie<0||se!==dt[Ie]?V(qe,E,wn,2):Ie--)}}},V=(h,m,E,H,K=null)=>{const{el:z,type:ne,transition:ie,children:ae,shapeFlag:se}=h;if(se&6){V(h.component.subTree,m,E,H);return}if(se&128){h.suspense.move(m,E,H);return}if(se&64){ne.move(h,m,E,ue);return}if(ne===me){s(z,m,E);for(let fe=0;fe<ae.length;fe++)V(ae[fe],m,E,H);s(h.anchor,m,E);return}if(ne===ks){P(h,m,E);return}if(H!==2&&se&1&&ie)if(H===0)ie.beforeEnter(z),s(z,m,E),tt(()=>ie.enter(z),K);else{const{leave:fe,delayLeave:pe,afterLeave:ye}=ie,Te=()=>s(z,m,E),Le=()=>{fe(z,()=>{Te(),ye&&ye()})};pe?pe(z,Te,Le):Le()}else s(z,m,E)},A=(h,m,E,H=!1,K=!1)=>{const{type:z,props:ne,ref:ie,children:ae,dynamicChildren:se,shapeFlag:ge,patchFlag:fe,dirs:pe,cacheIndex:ye}=h;if(fe===-2&&(K=!1),ie!=null&&$s(ie,null,E,h,!0),ye!=null&&(m.renderCache[ye]=void 0),ge&256){m.ctx.deactivate(h);return}const Te=ge&1&&pe,Le=!Kn(h);let Ie;if(Le&&(Ie=ne&&ne.onVnodeBeforeUnmount)&&Ct(Ie,m,h),ge&6)re(h.component,E,H);else{if(ge&128){h.suspense.unmount(E,H);return}Te&&sn(h,null,m,"beforeUnmount"),ge&64?h.type.remove(h,m,E,ue,H):se&&!se.hasOnce&&(z!==me||fe>0&&fe&64)?j(se,m,E,!1,!0):(z===me&&fe&384||!K&&ge&16)&&j(ae,m,E),H&&w(h)}(Le&&(Ie=ne&&ne.onVnodeUnmounted)||Te)&&tt(()=>{Ie&&Ct(Ie,m,h),Te&&sn(h,null,m,"unmounted")},E)},w=h=>{const{type:m,el:E,anchor:H,transition:K}=h;if(m===me){S(E,H);return}if(m===ks){R(h);return}const z=()=>{o(E),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(h.shapeFlag&1&&K&&!K.persisted){const{leave:ne,delayLeave:ie}=K,ae=()=>ne(E,z);ie?ie(h.el,z,ae):ae()}else z()},S=(h,m)=>{let E;for(;h!==m;)E=p(h),o(h),h=E;o(m)},re=(h,m,E)=>{const{bum:H,scope:K,job:z,subTree:ne,um:ie,m:ae,a:se}=h;Pr(ae),Pr(se),H&&bs(H),K.stop(),z&&(z.flags|=8,A(ne,h,m,E)),ie&&tt(ie,m),tt(()=>{h.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},j=(h,m,E,H=!1,K=!1,z=0)=>{for(let ne=z;ne<h.length;ne++)A(h[ne],m,E,H,K)},C=h=>{if(h.shapeFlag&6)return C(h.component.subTree);if(h.shapeFlag&128)return h.suspense.next();const m=p(h.anchor||h.el),E=m&&m[pa];return E?p(E):m};let J=!1;const q=(h,m,E)=>{h==null?m._vnode&&A(m._vnode,null,null,!0):v(m._vnode||null,h,m,null,null,null,E),m._vnode=h,J||(J=!0,Cr(),ua(),J=!1)},ue={p:v,um:A,m:V,r:w,mt:oe,mc:U,pc:Q,pbc:X,n:C,o:e};return{render:q,hydrate:void 0,createApp:Fc(q)}}function uo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function on({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Zc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function lr(e,t,n=!1){const s=e.children,o=t.children;if(ve(s)&&ve(o))for(let i=0;i<s.length;i++){const a=s[i];let l=o[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[i]=Gt(o[i]),l.el=a.el),!n&&l.patchFlag!==-2&&lr(a,l)),l.type===Js&&(l.el=a.el)}}function Qc(e){const t=e.slice(),n=[0];let s,o,i,a,l;const c=e.length;for(s=0;s<c;s++){const d=e[s];if(d!==0){if(o=n[n.length-1],e[o]<d){t[s]=o,n.push(s);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<d?i=l+1:a=l;d<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Oa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Oa(t)}function Pr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Xc=Symbol.for("v-scx"),eu=()=>gt(Xc);function Be(e,t,n){return Na(e,t,n)}function Na(e,t,n=Re){const{immediate:s,deep:o,flush:i,once:a}=n,l=Ge({},n),c=t&&s||!t&&i!=="post";let d;if(ss){if(i==="sync"){const g=eu();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=Et,g.resume=Et,g.pause=Et,g}}const u=Ye;l.call=(g,k,v)=>yt(g,u,k,v);let f=!1;i==="post"?l.scheduler=g=>{tt(g,u&&u.suspense)}:i!=="sync"&&(f=!0,l.scheduler=(g,k)=>{k?g():or(g)}),l.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=vc(e,t,l);return ss&&(d?d.push(p):c&&p()),p}function tu(e,t,n){const s=this.proxy,o=Fe(e)?e.includes(".")?Ba(s,e):()=>s[e]:e.bind(s,s);let i;_e(t)?i=t:(i=t.handler,n=t);const a=fs(this),l=Na(o,i.bind(s),n);return a(),l}function Ba(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const nu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${vt(t)}Modifiers`]||e[`${en(t)}Modifiers`];function su(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Re;let o=n;const i=t.startsWith("update:"),a=i&&nu(s,t.slice(7));a&&(a.trim&&(o=n.map(u=>Fe(u)?u.trim():u)),a.number&&(o=n.map(Ts)));let l,c=s[l=so(t)]||s[l=so(vt(t))];!c&&i&&(c=s[l=so(en(t))]),c&&yt(c,e,6,o);const d=s[l+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,yt(d,e,6,o)}}function Ha(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let a={},l=!1;if(!_e(e)){const c=d=>{const u=Ha(d,t,!0);u&&(l=!0,Ge(a,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Pe(e)&&s.set(e,null),null):(ve(i)?i.forEach(c=>a[c]=null):Ge(a,i),Pe(e)&&s.set(e,a),a)}function Ys(e,t){return!e||!Ns(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,en(t))||$e(e,t))}function Rr(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:a,attrs:l,emit:c,render:d,renderCache:u,props:f,data:p,setupState:g,ctx:k,inheritAttrs:v}=e,$=Ms(e);let I,D;try{if(n.shapeFlag&4){const R=o||s,Z=R;I=Tt(d.call(Z,R,u,f,g,p,k)),D=l}else{const R=t;I=Tt(R.length>1?R(f,{attrs:l,slots:a,emit:c}):R(f,null)),D=t.props?l:ou(l)}}catch(R){qn.length=0,Ks(R,e,1),I=xe(it)}let P=I;if(D&&v!==!1){const R=Object.keys(D),{shapeFlag:Z}=P;R.length&&Z&7&&(i&&R.some(Wo)&&(D=ru(D,i)),P=Qt(P,D,!1,!0))}return n.dirs&&(P=Qt(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&mn(P,n.transition),I=P,Ms($),I}const ou=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ns(n))&&((t||(t={}))[n]=e[n]);return t},ru=(e,t)=>{const n={};for(const s in e)(!Wo(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function iu(e,t,n){const{props:s,children:o,component:i}=e,{props:a,children:l,patchFlag:c}=t,d=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Vr(s,a,d):!!a;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(a[p]!==s[p]&&!Ys(d,p))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:s===a?!1:s?a?Vr(s,a,d):!0:!!a;return!1}function Vr(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!Ys(n,i))return!0}return!1}function au({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Fa=e=>e.__isSuspense;function lu(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):wc(e)}const me=Symbol.for("v-fgt"),Js=Symbol.for("v-txt"),it=Symbol.for("v-cmt"),ks=Symbol.for("v-stc"),qn=[];let lt=null;function y(e=!1){qn.push(lt=e?null:[])}function cu(){qn.pop(),lt=qn[qn.length-1]||null}let ns=1;function Or(e,t=!1){ns+=e,e<0&&lt&&t&&(lt.hasOnce=!0)}function Ua(e){return e.dynamicChildren=ns>0?lt||Sn:null,cu(),ns>0&&lt&&lt.push(e),e}function b(e,t,n,s,o,i){return Ua(r(e,t,n,s,o,i,!0))}function ot(e,t,n,s,o){return Ua(xe(e,t,n,s,o,!0))}function Ds(e){return e?e.__v_isVNode===!0:!1}function cn(e,t){return e.type===t.type&&e.key===t.key}const ja=({key:e})=>e??null,Ss=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Fe(e)||He(e)||_e(e)?{i:rt,r:e,k:t,f:!!n}:e:null);function r(e,t=null,n=null,s=0,o=null,i=e===me?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ja(t),ref:t&&Ss(t),scopeId:fa,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:rt};return l?(cr(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Fe(n)?8:16),ns>0&&!a&&lt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&lt.push(c),c}const xe=uu;function uu(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===Lc)&&(e=it),Ds(e)){const l=Qt(e,t,!0);return n&&cr(l,n),ns>0&&!i&&lt&&(l.shapeFlag&6?lt[lt.indexOf(e)]=l:lt.push(l)),l.patchFlag=-2,l}if(_u(e)&&(e=e.__vccOpts),t){t=du(t);let{class:l,style:c}=t;l&&!Fe(l)&&(t.class=ke(l)),Pe(c)&&(er(c)&&!ve(c)&&(c=Ge({},c)),t.style=Ze(c))}const a=Fe(e)?1:Fa(e)?128:ga(e)?64:Pe(e)?4:_e(e)?2:0;return r(e,t,n,s,o,a,i,!0)}function du(e){return e?er(e)||Ma(e)?Ge({},e):e:null}function Qt(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:a,children:l,transition:c}=e,d=t?fu(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&ja(d),ref:t&&t.ref?n&&i?ve(i)?i.concat(Ss(t)):[i,Ss(t)]:Ss(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==me?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qt(e.ssContent),ssFallback:e.ssFallback&&Qt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&mn(u,c.clone(u)),u}function Oe(e=" ",t=0){return xe(Js,null,e,t)}function kn(e,t){const n=xe(ks,null,e);return n.staticCount=t,n}function de(e="",t=!1){return t?(y(),ot(it,null,e)):xe(it,null,e)}function Tt(e){return e==null||typeof e=="boolean"?xe(it):ve(e)?xe(me,null,e.slice()):Ds(e)?Gt(e):xe(Js,null,String(e))}function Gt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qt(e)}function cr(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ve(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),cr(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Ma(t)?t._ctx=rt:o===3&&rt&&(rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:rt},n=32):(t=String(t),s&64?(n=16,t=[Oe(t)]):n=8);e.children=t,e.shapeFlag|=n}function fu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=ke([t.class,s.class]));else if(o==="style")t.style=Ze([t.style,s.style]);else if(Ns(o)){const i=t[o],a=s[o];a&&i!==a&&!(ve(i)&&i.includes(a))&&(t[o]=i?[].concat(i,a):a)}else o!==""&&(t[o]=s[o])}return t}function Ct(e,t,n,s=null){yt(e,t,7,[n,s])}const pu=Ea();let gu=0;function vu(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||pu,i={uid:gu++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Bi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:La(s,o),emitsOptions:Ha(s,o),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:s.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=su.bind(null,i),e.ce&&e.ce(i),i}let Ye=null;const za=()=>Ye||rt;let Ps,Do;{const e=Fs(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(a=>a(i)):o[0](i)}};Ps=t("__VUE_INSTANCE_SETTERS__",n=>Ye=n),Do=t("__VUE_SSR_SETTERS__",n=>ss=n)}const fs=e=>{const t=Ye;return Ps(e),e.scope.on(),()=>{e.scope.off(),Ps(t)}},Nr=()=>{Ye&&Ye.scope.off(),Ps(null)};function Wa(e){return e.vnode.shapeFlag&4}let ss=!1;function hu(e,t=!1,n=!1){t&&Do(t);const{props:s,children:o}=e.vnode,i=Wa(e);jc(e,s,i,t),Gc(e,o,n);const a=i?mu(e,t):void 0;return t&&Do(!1),a}function mu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Pc);const{setup:s}=n;if(s){tn();const o=e.setupContext=s.length>1?yu(e):null,i=fs(e),a=us(s,e,0,[e.props,o]),l=Li(a);if(nn(),i(),(l||e.sp)&&!Kn(e)&&Ca(e),l){if(a.then(Nr,Nr),t)return a.then(c=>{Br(e,c)}).catch(c=>{Ks(c,e,0)});e.asyncDep=a}else Br(e,a)}else Ka(e)}function Br(e,t,n){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pe(t)&&(e.setupState=ia(t)),Ka(e)}function Ka(e,t,n){const s=e.type;e.render||(e.render=s.render||Et);{const o=fs(e);tn();try{Rc(e)}finally{nn(),o()}}}const wu={get(e,t){return Qe(e,"get",""),e[t]}};function yu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,wu),slots:e.slots,emit:e.emit,expose:t}}function Zs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ia(tr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Gn)return Gn[n](e)},has(t,n){return n in t||n in Gn}})):e.proxy}function bu(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function _u(e){return _e(e)&&"__vccOpts"in e}const Se=(e,t)=>pc(e,t,ss);function ur(e,t,n){const s=arguments.length;return s===2?Pe(t)&&!ve(t)?Ds(t)?xe(e,null,[t]):xe(e,t):xe(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ds(n)&&(n=[n]),xe(e,t,n))}const Cu="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Po;const Hr=typeof window<"u"&&window.trustedTypes;if(Hr)try{Po=Hr.createPolicy("vue",{createHTML:e=>e})}catch{}const Ga=Po?e=>Po.createHTML(e):e=>e,ku="http://www.w3.org/2000/svg",Su="http://www.w3.org/1998/Math/MathML",Lt=typeof document<"u"?document:null,Fr=Lt&&Lt.createElement("template"),xu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?Lt.createElementNS(ku,e):t==="mathml"?Lt.createElementNS(Su,e):n?Lt.createElement(e,{is:n}):Lt.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Lt.createTextNode(e),createComment:e=>Lt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Lt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const a=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Fr.innerHTML=Ga(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=Fr.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ft="transition",Rn="animation",An=Symbol("_vtc"),qa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ya=Ge({},wa,qa),Tu=e=>(e.displayName="Transition",e.props=Ya,e),Ur=Tu((e,{slots:t})=>ur(_c,Ja(e),t)),rn=(e,t=[])=>{ve(e)?e.forEach(n=>n(...t)):e&&e(...t)},jr=e=>e?ve(e)?e.some(t=>t.length>1):e.length>1:!1;function Ja(e){const t={};for(const W in e)W in qa||(t[W]=e[W]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:d=a,appearToClass:u=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=e,k=Eu(o),v=k&&k[0],$=k&&k[1],{onBeforeEnter:I,onEnter:D,onEnterCancelled:P,onLeave:R,onLeaveCancelled:Z,onBeforeAppear:Y=I,onAppear:B=D,onAppearCancelled:U=P}=t,N=(W,F,oe,T)=>{W._enterCancelled=T,jt(W,F?u:l),jt(W,F?d:a),oe&&oe()},X=(W,F)=>{W._isLeaving=!1,jt(W,f),jt(W,g),jt(W,p),F&&F()},ce=W=>(F,oe)=>{const T=W?B:D,x=()=>N(F,W,oe);rn(T,[F,x]),zr(()=>{jt(F,W?c:i),kt(F,W?u:l),jr(T)||Wr(F,s,v,x)})};return Ge(t,{onBeforeEnter(W){rn(I,[W]),kt(W,i),kt(W,a)},onBeforeAppear(W){rn(Y,[W]),kt(W,c),kt(W,d)},onEnter:ce(!1),onAppear:ce(!0),onLeave(W,F){W._isLeaving=!0;const oe=()=>X(W,F);kt(W,f),W._enterCancelled?(kt(W,p),Ro()):(Ro(),kt(W,p)),zr(()=>{W._isLeaving&&(jt(W,f),kt(W,g),jr(R)||Wr(W,s,$,oe))}),rn(R,[W,oe])},onEnterCancelled(W){N(W,!1,void 0,!0),rn(P,[W])},onAppearCancelled(W){N(W,!0,void 0,!0),rn(U,[W])},onLeaveCancelled(W){X(W),rn(Z,[W])}})}function Eu(e){if(e==null)return null;if(Pe(e))return[fo(e.enter),fo(e.leave)];{const t=fo(e);return[t,t]}}function fo(e){return $l(e)}function kt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[An]||(e[An]=new Set)).add(t)}function jt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[An];n&&(n.delete(t),n.size||(e[An]=void 0))}function zr(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Au=0;function Wr(e,t,n,s){const o=e._endId=++Au,i=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:a,timeout:l,propCount:c}=Za(e,t);if(!a)return s();const d=a+"end";let u=0;const f=()=>{e.removeEventListener(d,p),i()},p=g=>{g.target===e&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},l+1),e.addEventListener(d,p)}function Za(e,t){const n=window.getComputedStyle(e),s=k=>(n[k]||"").split(", "),o=s(`${Ft}Delay`),i=s(`${Ft}Duration`),a=Kr(o,i),l=s(`${Rn}Delay`),c=s(`${Rn}Duration`),d=Kr(l,c);let u=null,f=0,p=0;t===Ft?a>0&&(u=Ft,f=a,p=i.length):t===Rn?d>0&&(u=Rn,f=d,p=c.length):(f=Math.max(a,d),u=f>0?a>d?Ft:Rn:null,p=u?u===Ft?i.length:c.length:0);const g=u===Ft&&/\b(transform|all)(,|$)/.test(s(`${Ft}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:g}}function Kr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Gr(n)+Gr(e[s])))}function Gr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ro(){return document.body.offsetHeight}function Iu(e,t,n){const s=e[An];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const qr=Symbol("_vod"),Mu=Symbol("_vsh"),$u=Symbol(""),Lu=/(^|;)\s*display\s*:/;function Du(e,t,n){const s=e.style,o=Fe(n);let i=!1;if(n&&!o){if(t)if(Fe(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&xs(s,l,"")}else for(const a in t)n[a]==null&&xs(s,a,"");for(const a in n)a==="display"&&(i=!0),xs(s,a,n[a])}else if(o){if(t!==n){const a=s[$u];a&&(n+=";"+a),s.cssText=n,i=Lu.test(n)}}else t&&e.removeAttribute("style");qr in e&&(e[qr]=i?s.display:"",e[Mu]&&(s.display="none"))}const Yr=/\s*!important$/;function xs(e,t,n){if(ve(n))n.forEach(s=>xs(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Pu(e,t);Yr.test(n)?e.setProperty(en(s),n.replace(Yr,""),"important"):e[s]=n}}const Jr=["Webkit","Moz","ms"],po={};function Pu(e,t){const n=po[t];if(n)return n;let s=vt(t);if(s!=="filter"&&s in e)return po[t]=s;s=Hs(s);for(let o=0;o<Jr.length;o++){const i=Jr[o]+s;if(i in e)return po[t]=i}return t}const Zr="http://www.w3.org/1999/xlink";function Qr(e,t,n,s,o,i=Ol(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Zr,t.slice(6,t.length)):e.setAttributeNS(Zr,t,n):n==null||i&&!Vi(n)?e.removeAttribute(t):e.setAttribute(t,i?"":At(n)?String(n):n)}function Xr(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ga(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Vi(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(o||t)}function Yt(e,t,n,s){e.addEventListener(t,n,s)}function Ru(e,t,n,s){e.removeEventListener(t,n,s)}const ei=Symbol("_vei");function Vu(e,t,n,s,o=null){const i=e[ei]||(e[ei]={}),a=i[t];if(s&&a)a.value=s;else{const[l,c]=Ou(t);if(s){const d=i[t]=Hu(s,o);Yt(e,l,d,c)}else a&&(Ru(e,l,a,c),i[t]=void 0)}}const ti=/(?:Once|Passive|Capture)$/;function Ou(e){let t;if(ti.test(e)){t={};let s;for(;s=e.match(ti);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):en(e.slice(2)),t]}let go=0;const Nu=Promise.resolve(),Bu=()=>go||(Nu.then(()=>go=0),go=Date.now());function Hu(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;yt(Fu(s,n.value),t,5,[s])};return n.value=e,n.attached=Bu(),n}function Fu(e,t){if(ve(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Uu=(e,t,n,s,o,i)=>{const a=o==="svg";t==="class"?Iu(e,s,a):t==="style"?Du(e,n,s):Ns(t)?Wo(t)||Vu(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ju(e,t,s,a))?(Xr(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Qr(e,t,s,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Fe(s))?Xr(e,vt(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Qr(e,t,s,a))};function ju(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&ni(t)&&_e(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return ni(t)&&Fe(n)?!1:t in e}const Qa=new WeakMap,Xa=new WeakMap,Rs=Symbol("_moveCb"),si=Symbol("_enterCb"),zu=e=>(delete e.props.mode,e),Wu=zu({name:"TransitionGroup",props:Ge({},Ya,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=za(),s=ma();let o,i;return Sa(()=>{if(!o.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!Ju(o[0].el,n.vnode.el,a))return;o.forEach(Gu),o.forEach(qu);const l=o.filter(Yu);Ro(),l.forEach(c=>{const d=c.el,u=d.style;kt(d,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=d[Rs]=p=>{p&&p.target!==d||(!p||/transform$/.test(p.propertyName))&&(d.removeEventListener("transitionend",f),d[Rs]=null,jt(d,a))};d.addEventListener("transitionend",f)})}),()=>{const a=Ee(e),l=Ja(a);let c=a.tag||me;if(o=[],i)for(let d=0;d<i.length;d++){const u=i[d];u.el&&u.el instanceof Element&&(o.push(u),mn(u,ts(u,l,s,n)),Qa.set(u,u.el.getBoundingClientRect()))}i=t.default?rr(t.default()):[];for(let d=0;d<i.length;d++){const u=i[d];u.key!=null&&mn(u,ts(u,l,s,n))}return xe(c,null,i)}}}),Ku=Wu;function Gu(e){const t=e.el;t[Rs]&&t[Rs](),t[si]&&t[si]()}function qu(e){Xa.set(e,e.el.getBoundingClientRect())}function Yu(e){const t=Qa.get(e),n=Xa.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${o}px)`,i.transitionDuration="0s",e}}function Ju(e,t,n){const s=e.cloneNode(),o=e[An];o&&o.forEach(l=>{l.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),n.split(/\s+/).forEach(l=>l&&s.classList.add(l)),s.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(s);const{hasTransform:a}=Za(s);return i.removeChild(s),a}const In=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?n=>bs(t,n):t};function Zu(e){e.target.composing=!0}function oi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign"),Ae={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Ot]=In(o);const i=s||o.props&&o.props.type==="number";Yt(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Ts(l)),e[Ot](l)}),n&&Yt(e,"change",()=>{e.value=e.value.trim()}),t||(Yt(e,"compositionstart",Zu),Yt(e,"compositionend",oi),Yt(e,"change",oi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},a){if(e[Ot]=In(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ts(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===c)||(e.value=c))}},pn={deep:!0,created(e,t,n){e[Ot]=In(n),Yt(e,"change",()=>{const s=e._modelValue,o=os(e),i=e.checked,a=e[Ot];if(ve(s)){const l=qo(s,o),c=l!==-1;if(i&&!c)a(s.concat(o));else if(!i&&c){const d=[...s];d.splice(l,1),a(d)}}else if(Ln(s)){const l=new Set(s);i?l.add(o):l.delete(o),a(l)}else a(el(e,i))})},mounted:ri,beforeUpdate(e,t,n){e[Ot]=In(n),ri(e,t,n)}};function ri(e,{value:t,oldValue:n},s){e._modelValue=t;let o;if(ve(t))o=qo(t,s.props.value)>-1;else if(Ln(t))o=t.has(s.props.value);else{if(t===n)return;o=cs(t,el(e,!0))}e.checked!==o&&(e.checked=o)}const Jt={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const o=Ln(t);Yt(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?Ts(os(a)):os(a));e[Ot](e.multiple?o?new Set(i):i:i[0]),e._assigning=!0,ze(()=>{e._assigning=!1})}),e[Ot]=In(s)},mounted(e,{value:t}){ii(e,t)},beforeUpdate(e,t,n){e[Ot]=In(n)},updated(e,{value:t}){e._assigning||ii(e,t)}};function ii(e,t){const n=e.multiple,s=ve(t);if(!(n&&!s&&!Ln(t))){for(let o=0,i=e.options.length;o<i;o++){const a=e.options[o],l=os(a);if(n)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(d=>String(d)===String(l)):a.selected=qo(t,l)>-1}else a.selected=t.has(l);else if(cs(os(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function os(e){return"_value"in e?e._value:e.value}function el(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Qu=["ctrl","shift","alt","meta"],Xu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Qu.some(n=>e[`${n}Key`]&&!t.includes(n))},ct=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...i)=>{for(let a=0;a<t.length;a++){const l=Xu[t[a]];if(l&&l(o,t))return}return e(o,...i)})},ed={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wt=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=o=>{if(!("key"in o))return;const i=en(o.key);if(t.some(a=>a===i||ed[a]===i))return e(o)})},td=Ge({patchProp:Uu},xu);let ai;function nd(){return ai||(ai=Yc(td))}const sd=(...e)=>{const t=nd().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=rd(s);if(!o)return;const i=t._component;!_e(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=n(o,!1,od(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function od(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function rd(e){return Fe(e)?document.querySelector(e):e}/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let tl;const Qs=e=>tl=e,nl=Symbol();function Vo(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Yn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Yn||(Yn={}));function id(){const e=Hi(!0),t=e.run(()=>O({}));let n=[],s=[];const o=tr({install(i){Qs(o),o._a=i,i.provide(nl,o),i.config.globalProperties.$pinia=o,s.forEach(a=>n.push(a)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const sl=()=>{};function li(e,t,n,s=sl){e.push(t);const o=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),s())};return!n&&Yo()&&Fi(o),o}function bn(e,...t){e.slice().forEach(n=>{n(...t)})}const ad=e=>e(),ci=Symbol(),vo=Symbol();function Oo(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],o=e[n];Vo(o)&&Vo(s)&&e.hasOwnProperty(n)&&!He(s)&&!Vt(s)?e[n]=Oo(o,s):e[n]=s}return e}const ld=Symbol();function cd(e){return!Vo(e)||!e.hasOwnProperty(ld)}const{assign:zt}=Object;function ud(e){return!!(He(e)&&e.effect)}function dd(e,t,n,s){const{state:o,actions:i,getters:a}=t,l=n.state.value[e];let c;function d(){l||(n.state.value[e]=o?o():{});const u=cc(n.state.value[e]);return zt(u,i,Object.keys(a||{}).reduce((f,p)=>(f[p]=tr(Se(()=>{Qs(n);const g=n._s.get(e);return a[p].call(g,g)})),f),{}))}return c=ol(e,d,t,n,s,!0),c}function ol(e,t,n={},s,o,i){let a;const l=zt({actions:{}},n),c={deep:!0};let d,u,f=[],p=[],g;const k=s.state.value[e];!i&&!k&&(s.state.value[e]={}),O({});let v;function $(U){let N;d=u=!1,typeof U=="function"?(U(s.state.value[e]),N={type:Yn.patchFunction,storeId:e,events:g}):(Oo(s.state.value[e],U),N={type:Yn.patchObject,payload:U,storeId:e,events:g});const X=v=Symbol();ze().then(()=>{v===X&&(d=!0)}),u=!0,bn(f,N,s.state.value[e])}const I=i?function(){const{state:N}=n,X=N?N():{};this.$patch(ce=>{zt(ce,X)})}:sl;function D(){a.stop(),f=[],p=[],s._s.delete(e)}const P=(U,N="")=>{if(ci in U)return U[vo]=N,U;const X=function(){Qs(s);const ce=Array.from(arguments),W=[],F=[];function oe(L){W.push(L)}function T(L){F.push(L)}bn(p,{args:ce,name:X[vo],store:Z,after:oe,onError:T});let x;try{x=U.apply(this&&this.$id===e?this:Z,ce)}catch(L){throw bn(F,L),L}return x instanceof Promise?x.then(L=>(bn(W,L),L)).catch(L=>(bn(F,L),Promise.reject(L))):(bn(W,x),x)};return X[ci]=!0,X[vo]=N,X},R={_p:s,$id:e,$onAction:li.bind(null,p),$patch:$,$reset:I,$subscribe(U,N={}){const X=li(f,U,N.detached,()=>ce()),ce=a.run(()=>Be(()=>s.state.value[e],W=>{(N.flush==="sync"?u:d)&&U({storeId:e,type:Yn.direct,events:g},W)},zt({},c,N)));return X},$dispose:D},Z=Nt(R);s._s.set(e,Z);const B=(s._a&&s._a.runWithContext||ad)(()=>s._e.run(()=>(a=Hi()).run(()=>t({action:P}))));for(const U in B){const N=B[U];if(He(N)&&!ud(N)||Vt(N))i||(k&&cd(N)&&(He(N)?N.value=k[U]:Oo(N,k[U])),s.state.value[e][U]=N);else if(typeof N=="function"){const X=P(N,U);B[U]=X,l.actions[U]=N}}return zt(Z,B),zt(Ee(Z),B),Object.defineProperty(Z,"$state",{get:()=>s.state.value[e],set:U=>{$(N=>{zt(N,U)})}}),s._p.forEach(U=>{zt(Z,a.run(()=>U({store:Z,app:s._a,pinia:s,options:l})))}),k&&i&&n.hydrate&&n.hydrate(Z.$state,k),d=!0,u=!0,Z}/*! #__NO_SIDE_EFFECTS__ */function Xs(e,t,n){let s;const o=typeof t=="function";s=o?n:t;function i(a,l){const c=Uc();return a=a||(c?gt(nl,null):null),a&&Qs(a),a=tl,a._s.has(e)||(o?ol(e,t,s,a):dd(e,s,a)),a._s.get(e)}return i.$id=e,i}function fd(e){const t=Ee(e),n={};for(const s in t){const o=t[s];o.effect?n[s]=Se({get:()=>e[s],set(i){e[s]=i}}):(He(o)||Vt(o))&&(n[s]=sr(e,s))}return n}function pd(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s?s.push(n):e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&(n?s.splice(s.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var s=e.get(t);s&&s.slice().map(function(o){o(n)}),(s=e.get("*"))&&s.slice().map(function(o){o(t,n)})}}}const gd=pd(),_t=()=>gd;function Vs(e,t){return Yo()?(Fi(e,t),!0):!1}const En=typeof window<"u"&&typeof document<"u",ui=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,vd=Object.prototype.toString,hd=e=>vd.call(e)==="[object Object]",md=()=>{};function wd(...e){if(e.length!==1)return sr(...e);const t=e[0];return typeof t=="function"?Xo(lc(()=>({get:t,set:md}))):O(t)}function ho(e){return Array.isArray(e)?e:[e]}function yd(e,t=1e3,n={}){const{immediate:s=!0,immediateCallback:o=!1}=n;let i=null;const a=nr(!1);function l(){i&&(clearInterval(i),i=null)}function c(){a.value=!1,l()}function d(){const u=dn(t);u<=0||(a.value=!0,o&&e(),l(),a.value&&(i=setInterval(e,u)))}return s&&En&&d(),(He(t)||typeof t=="function")&&Vs(Be(t,()=>{a.value&&En&&d()})),Vs(c),{isActive:oc(a),pause:c,resume:d}}function bd(e,t,n){return Be(e,t,{...n,immediate:!0})}const _d=En?window:void 0;function Cd(e){var t;const n=dn(e);return(t=n==null?void 0:n.$el)!==null&&t!==void 0?t:n}function kd(...e){const t=[],n=()=>{t.forEach(l=>l()),t.length=0},s=(l,c,d,u)=>(l.addEventListener(c,d,u),()=>l.removeEventListener(c,d,u)),o=Se(()=>{const l=ho(dn(e[0])).filter(c=>c!=null);return l.every(c=>typeof c!="string")?l:void 0}),i=bd(()=>{var l,c;return[(l=(c=o.value)===null||c===void 0?void 0:c.map(d=>Cd(d)))!==null&&l!==void 0?l:[_d].filter(d=>d!=null),ho(dn(o.value?e[1]:e[0])),ho(te(o.value?e[2]:e[1])),dn(o.value?e[3]:e[2])]},([l,c,d,u])=>{if(n(),!(l!=null&&l.length)||!(c!=null&&c.length)||!(d!=null&&d.length))return;const f=hd(u)?{...u}:u;t.push(...l.flatMap(p=>c.flatMap(g=>d.map(k=>s(p,g,k,f)))))},{flush:"post"}),a=()=>{i(),n()};return Vs(n),a}const di="ping";function mo(e){return e===!0?{}:e}function Sd(e,t={}){const{onConnected:n,onDisconnected:s,onError:o,onMessage:i,immediate:a=!0,autoConnect:l=!0,autoClose:c=!0,protocols:d=[]}=t,u=O(null),f=nr("CLOSED"),p=O(),g=wd(e);let k,v,$=!1,I=0,D=[],P,R;const Z=()=>{if(D.length&&p.value&&f.value==="OPEN"){for(const W of D)p.value.send(W);D=[]}},Y=()=>{P!=null&&(clearTimeout(P),P=void 0)},B=()=>{clearTimeout(R),R=void 0},U=(W=1e3,F)=>{Y(),!(!En&&!ui||!p.value)&&($=!0,B(),k==null||k(),p.value.close(W,F),p.value=void 0)},N=(W,F=!0)=>!p.value||f.value!=="OPEN"?(F&&D.push(W),!1):(Z(),p.value.send(W),!0),X=()=>{if($||typeof g.value>"u")return;const W=new WebSocket(g.value,d);p.value=W,f.value="CONNECTING",W.onopen=()=>{f.value="OPEN",I=0,n==null||n(W),v==null||v(),Z()},W.onclose=F=>{if(f.value="CLOSED",B(),k==null||k(),s==null||s(W,F),!$&&t.autoReconnect&&(p.value==null||W===p.value)){const{retries:oe=-1,delay:T=1e3,onFailed:x}=mo(t.autoReconnect);(typeof oe=="function"?oe:()=>typeof oe=="number"&&(oe<0||I<oe))(I)?(I+=1,P=setTimeout(X,T)):x==null||x()}},W.onerror=F=>{o==null||o(W,F)},W.onmessage=F=>{if(t.heartbeat){B();const{message:oe=di,responseMessage:T=oe}=mo(t.heartbeat);if(F.data===dn(T))return}u.value=F.data,i==null||i(W,F)}};if(t.heartbeat){const{message:W=di,interval:F=1e3,pongTimeout:oe=1e3}=mo(t.heartbeat),{pause:T,resume:x}=yd(()=>{N(dn(W),!1),R==null&&(R=setTimeout(()=>{U(),$=!1},oe))},F,{immediate:!1});k=T,v=x}c&&(En&&kd("beforeunload",()=>U(),{passive:!0}),Vs(U));const ce=()=>{!En&&!ui||(U(),$=!1,I=0,X())};return a&&ce(),l&&Be(g,ce),{data:u,status:f,close:U,send:N,open:ce,ws:p}}const ps=Xs("contacts",()=>{const e=O([]),t=O(null),n=O(!1);function s(v){console.log("setActiveContact",v.contactId),e.value.forEach($=>{$.isActive=!1}),t.value=e.value.find($=>$.contactId===v.contactId)||null,t.value&&(t.value.isActive=!0)}function o(v){console.log("incrementUnreadCount",v),e.value.forEach($=>{String($.contactId)===String(v)&&(console.log("if incrementUnreadCount",$.unreadCount),$.unreadCount=($.unreadCount||0)+1)})}function i(v){e.value.forEach($=>{$.contactId===v&&($.unreadCount=0)})}function a(v){if(!t.value)return;const $=String(t.value.contactId),I=String(v);if($===I){const D=e.value.find(P=>String(P.contactId)===I);D&&(t.value=D)}}function l(v){e.value=e.value.map($=>$.contactId===v.contactId?{...$,...v}:$),v.contactId&&a(v.contactId)}function c(v,$){console.log("updateContactById",v),e.value=e.value.map(I=>String(v)===String(I.contactId)?{...I,...$}:I),a(v)}function d(v){const $=e.value.find(I=>I.id===v);e.value=e.value.filter(I=>I.id!==v),t.value&&$&&t.value.id===v&&(t.value=null)}function u(v){var I;const $=(I=t.value)==null?void 0:I.contactId;if(e.value=v,$){const D=v.find(P=>P.contactId===$);D?t.value=D:t.value=null}}function f(v){n.value=v}function p(v){e.value.unshift(v)}function g(){e.value=[],t.value=null}function k(v){return e.value.find($=>String($.contactId)===String(v))}return{contacts:e,selectedContact:t,isLoading:n,setActiveContact:s,setContactList:u,setLoading:f,updateContact:l,deleteContact:d,addContact:p,resetContacts:g,incrementUnreadCount:o,resetUnreadCount:i,updateContactById:c,getContactById:k}}),Ht=Xs("user",()=>{const e=O(null);function t(o){e.value=o}function n(){e.value=null}function s(){return e.value!==null}return{user:e,setUser:t,clearUser:n,hasUser:s}}),xd=()=>{const e=_t(),t=ps(),n=gs(),s=Ht(),o={user_online:a=>{console.log("user_online"),e.emit("user_online",a.payload)},new_message:a=>{console.log("new_message"),e.emit("new_message",a.payload)},event_typing:a=>{console.log("event_typing"),e.emit("event_typing",a.payload)},change_online:a=>{console.log("change_online",a.payload),t.updateContactById(String(a.payload.userId),{isOnline:a.payload.status==="online"})},accept_call:a=>{console.log("accept_call",a.payload),n.clearIncomingCall()},decline_call:a=>{console.log("decline_call",a.payload),n.clearIncomingCall()},webrtc_call_offer:async a=>{console.log("webrtc_call_offer",a.payload);const l=a.payload;n.setIncomingCall({callerId:l.callerId,callerName:l.callerName,callType:l.callType,offer:l.offer})},webrtc_call_answer:a=>{console.log("webrtc_call_answer",a.payload);const l=a.payload;e.emit("webrtc_answer_received",{answer:l.answer})},webrtc_ice_candidate:a=>{console.log("webrtc_ice_candidate",a.payload);const l=a.payload;e.emit("webrtc_candidate_received",{candidate:l.candidate})},webrtc_call_end:a=>{var c;console.log("webrtc_call_end received from WebSocket",a.payload);const l=a.payload;if(l.callerId===((c=s.user)==null?void 0:c.id)){console.log("Ignoring own webrtc_call_end event");return}e.emit("webrtc_call_end_received",{targetUserId:l.callerId,reason:l.reason||"call_ended"})}};return{handleBroadcast:a=>{console.log("handleBroadcast"),console.log(a);const l=a.event.split(":")[1];l in o?o[l](a):console.error("Unknown event:",l)},eventHandler:o}};let wo=null;const Td=()=>(wo||(wo=xd()),wo),fi=_t(),No=O(""),rs=O(!1),gn=O({}),Ed=1e4,Ad=e=>!!(e&&typeof e.event=="string"&&(!e.payload||typeof e.payload=="object")),Id=e=>{const t={pong:()=>{console.log("Pong received")},connection_established:n=>{rs.value=!0,console.log("connection_established",n)},connection_closed:()=>{console.log("Server requested connection close")}};if(e&&e.event){const n=e.event.split(":");if(n.length<2)return;const s=n[1],o=t[s];o&&o(e.payload)}},Md=e=>{console.log("processBroadcast",e);const{handleBroadcast:t}=Td();t(e)},$d=e=>{e.status===4001&&console.warn("Token expired or invalid:",e.payload.message)};let yo=!1,Rt=null;const eo=()=>{Rt!==null&&(clearTimeout(Rt),Rt=null)},Bo=async()=>{if(console.warn("WebSocket closed due to authentication error (4001)"),yo){console.log("Token update already in progress, skipping...");return}eo(),yo=!0;const{data:e,error:t}=await be.http("GET","/api/main/update-ws-token");yo=!1,t?(console.error("Error updating WebSocket token:",t),t.code===401?(fi.emit("unauthorized"),Os()):Rt=window.setTimeout(()=>{Rt=null,Bo()},5e3)):e&&e.status==="ok"&&e.wsUrl?(console.log("WebSocket token updated:",e.wsUrl),ll(e.wsUrl)):e&&e.status==="unauthorized"?(fi.emit("unauthorized"),Os()):Rt=window.setTimeout(()=>{Rt=null,Bo()},5e3)},Ld=e=>{if(console.log(`WebSocket closed with code: ${e.code}, reason: ${e.reason}`),al(),eo(),e.code===4001){console.warn("WebSocket closed due to authentication error (4001)"),Bo();return}if(e.code>=4e3&&e.code<4100){console.error(`WebSocket closed with code ${e.code}. Reconnection is not allowed.`),Os();return}console.log("WebSocket will attempt to reconnect in 5 seconds"),Rt=window.setTimeout(()=>{Rt=null,console.log("Attempting to reconnect..."),Vd()},5e3)},Dd=e=>{var n,s;console.log("message handler");const t=gn.value[e.event];t&&(window.clearTimeout(t.timeout),delete gn.value[e.event],e.status===200&&t.resolve?t.resolve(e):t.reject&&t.reject({status:e==null?void 0:e.status,message:(n=e==null?void 0:e.payload)==null?void 0:n.message,messages:(s=e==null?void 0:e.payload)==null?void 0:s.messages}))},Pd=e=>{try{console.log("onmessage: ",e);const t=JSON.parse(e);if(!Ad(t)){console.error("Invalid message format:",t);return}t.event==="service:error"?$d(t):t.event.startsWith("broadcast:")?Md(t):t.event.startsWith("service:")?Id(t):t.event.startsWith("api")&&Dd(t)}catch(t){console.error("Error parsing message:",t)}},{status:Xt,send:Rd,close:rl,open:Vd,ws:Od}=Sd(No,{immediate:!1,heartbeat:{message:"ping",responseMessage:"pong",interval:1e4,pongTimeout:5e3},onConnected(){console.log("WebSocket connected"),rs.value=!0},onDisconnected(e,t){console.log("WebSocket disconnected",t),rs.value=!1,t&&Ld(t)},onError(e,t){console.error("WebSocket error:",t)},onMessage(e,t){Pd(t.data)}}),il=e=>{Xt.value==="OPEN"?Rd(JSON.stringify(e)):console.warn("WebSocket not connected, message queued")},Nd=async(e,t={})=>new Promise((n,s)=>{if(!(Xt.value==="OPEN")){console.error("WebSocket not connected"),s(new Error("WebSocket not connected"));return}const i=`api/${e}`,a=Date.now(),l=`${a}_${i}`;if(gn.value[l]){console.error("Request already in progress"),s(new Error("Request already in progress"));return}il({event:i,timestamp:a,payload:t}),gn.value[i]={resolve:n,reject:s,timeout:window.setTimeout(()=>{delete gn.value[i],s(new Error("Request timeout"))},Ed)}}),Os=()=>{console.log("websocketClose"),eo(),rl(),rs.value=!1,al()},al=()=>{console.log("resetApiResolve"),Object.values(gn.value).forEach(e=>{window.clearTimeout(e.timeout),e.reject(new Error("WebSocket connection reset"))}),gn.value={}},ll=e=>{console.log("websocketOpen",e),eo(),No.value!==e&&(Xt.value==="OPEN"||Xt.value==="CONNECTING")&&(console.log("Closing existing connection before opening new one"),rl()),No.value=e},Bd=Se(()=>Xt.value==="OPEN"),Hd=Se(()=>Xt.value==="CONNECTING"),Fd=Se(()=>Xt.value==="CLOSED"),dr=()=>({statusWebSocket:Xt,isConnected:Bd,isConnecting:Hd,isDisconnected:Fd,isInitialized:rs,sendMessage:il,websocketApi:Nd,websocketClose:Os,websocketOpen:ll,ws:Od}),Ud=e=>e.endsWith("/")?e.slice(0,-1):e,jd=Ud("https://itvibe.party"),{websocketApi:pi}=dr(),zd=_t(),be={http:async(e,t,n={})=>{const s={method:e,headers:{"Content-Type":"application/json"}};e.toLowerCase()!=="get"&&e.toLowerCase()!=="delete"&&(s.body=JSON.stringify(n));try{const o=await fetch(`${jd}${t}`,s);if(!o.ok&&o.status===422){console.log("!response.ok && response.status === 422");const a=await o.json();return console.log({errorData:a}),{data:a,error:{code:422,message:String(a.message||"Validation Error")}}}if(!o.ok)return console.log("!response.ok"),o.status===401?(zd.emit("unauthorized"),{data:null,error:{code:401,message:"Unauthorized"}}):{data:null,error:{code:o.status,message:`HTTP error! status: ${o.status}`}};const i=await o.json();return console.log({data:i}),{data:i,error:null}}catch(o){return console.error("Network error:",o),{data:null,error:{code:0,message:o instanceof Error?o.message:"Network error. Please try again later."}}}},ws:async(e,t={})=>{if(!pi)return null;try{const n=await pi(e,t);return console.log({result:n}),n}catch(n){return console.error(n),null}}},bo={deleteMessage:async e=>be.http("DELETE",`/api/chat/messages/${e}`),updateMessage:async(e,t,n)=>be.http("PUT",`/api/chat/messages/${e}`,{userId:n,messageId:e,content:t})},xt={getSubscriptions:async()=>be.http("GET","/api/push-subscriptions"),createSubscription:async e=>be.http("POST","/api/push-subscriptions",e),getSubscription:async e=>be.http("GET",`/api/push-subscriptions/${e}`),deleteSubscription:async e=>be.http("DELETE",`/api/push-subscriptions/${e}`),deleteSubscriptionByEndpoint:async e=>be.http("DELETE","/api/push-subscriptions",{endpoint:e}),getSubscriptionStatistics:async e=>be.http("GET",`/api/push-subscriptions/${e}/statistics`),deactivateSubscription:async e=>be.http("PUT",`/api/push-subscriptions/${e}/deactivate`),sendSubscriptionNotification:async e=>be.http("POST","/api/notifications/subscription-status",e),sendSystemNotification:async(e,t="info",n)=>be.http("POST","/api/notifications/system",{message:e,type:t,metadata:n}),getVapidPublicKey:async()=>be.http("GET","/api/push-subscriptions/vapid-public-key")},gs=Xs("state",()=>{const e=localStorage.getItem("theme"),t=O(e==="dark"),n=O(window.innerWidth),s=O(window.innerWidth<=768),o=O(!1),i=O("default"),a=O(null),l=O(!1),c=O(null),d=Nt({isActive:!1,callerId:null,callerName:"",callType:null,offer:null,isConnecting:!1,isConnected:!1,error:null}),u=Nt({isActive:!1,targetUserId:null,targetName:"",callType:null,isConnecting:!1,isConnected:!1,error:null}),f=()=>{n.value=window.innerWidth,s.value=window.innerWidth<=768},p=()=>{const j=window.matchMedia("(display-mode: standalone)").matches,C="standalone"in window.navigator&&window.navigator.standalone===!0,J=window.matchMedia("(display-mode: minimal-ui)").matches;return o.value=j||C||J,o.value};p();const g=window.matchMedia("(display-mode: standalone)"),k=window.matchMedia("(display-mode: minimal-ui)");g.addEventListener("change",p),k.addEventListener("change",p),window.addEventListener("resize",f);const v=()=>{"Notification"in window&&(i.value=Notification.permission)},$=async()=>{if(!("Notification"in window))return console.warn("This browser does not support notifications"),"denied";const j=await Notification.requestPermission();return i.value=j,j},I=async()=>i.value!=="granted"?await $()==="granted":!0,D=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window))return console.warn("Push messaging is not supported"),null;try{const j=await navigator.serviceWorker.ready,C=await j.pushManager.getSubscription();if(C)return a.value=C,l.value=!0,C;const J=await Z();if(!Y(J))throw console.error(" VAPID     "),console.info("   VAPID :"),console.info("1.  VAPID : npx web-push generate-vapid-keys"),console.info("2.       VITE_VAPID_PUBLIC_KEY"),console.info("3.    /api/push-subscriptions/vapid-public-key  "),new Error("VAPID   ");const q=await j.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:R(J).buffer});return a.value=q,l.value=!0,await ce(q),q}catch(j){return console.error("Failed to subscribe to push notifications:",j),j instanceof Error&&j.message.includes("VAPID")&&console.warn(" Push-   (VAPID   )"),null}},P=async()=>{if(!a.value)return!0;try{const j=await a.value.unsubscribe();return j&&(await W(a.value),a.value=null,l.value=!1),j}catch(j){return console.error("Failed to unsubscribe from push notifications:",j),!1}},R=j=>{const C="=".repeat((4-j.length%4)%4),J=(j+C).replace(/-/g,"+").replace(/_/g,"/"),q=window.atob(J),ue=new Uint8Array(q.length);for(let Ce=0;Ce<q.length;++Ce)ue[Ce]=q.charCodeAt(Ce);return ue},Z=async()=>{try{const C=await xt.getVapidPublicKey();if(C.data&&C.data.vapidPublicKey)return C.data.vapidPublicKey}catch(C){console.warn("   VAPID   :",C)}return"BFAEDQ51jXo1Kqbv6yFIoluVTt0mnJDP1vFGoNz7Sn_tV6f4kc3DkeSAK_AguER1QafIQ5Cc9QdefNYaZaioxnA"},Y=j=>!(!j||j==="YOUR_VAPID_PUBLIC_KEY_HERE"||j.length<80),B=()=>{const j=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|tablet/.test(j)?"mobile":"desktop"},U=()=>{const j=navigator.userAgent,C=j.toLowerCase();let J="Unknown",q="Unknown";if(C.includes("chrome")&&!C.includes("edg")){J="Chrome";const ue=j.match(/Chrome\/(\d+\.\d+)/);q=ue?ue[1]:"Unknown"}else if(C.includes("firefox")){J="Firefox";const ue=j.match(/Firefox\/(\d+\.\d+)/);q=ue?ue[1]:"Unknown"}else if(C.includes("safari")&&!C.includes("chrome")){J="Safari";const ue=j.match(/Version\/(\d+\.\d+)/);q=ue?ue[1]:"Unknown"}else if(C.includes("edg")){J="Edge";const ue=j.match(/Edg\/(\d+\.\d+)/);q=ue?ue[1]:"Unknown"}return{name:J,version:q}},N=()=>{const j=navigator.userAgent;let C="Unknown",J="Unknown";if(j.includes("Windows NT")){C="Windows";const q=j.match(/Windows NT (\d+\.\d+)/);J=q?q[1]:"Unknown"}else if(j.includes("Mac OS X")){C="macOS";const q=j.match(/Mac OS X (\d+[._]\d+[._]?\d*)/);J=q?q[1].replace(/_/g,"."):"Unknown"}else if(j.includes("Linux"))C="Linux",J="Unknown";else if(j.includes("Android")){C="Android";const q=j.match(/Android (\d+\.\d+)/);J=q?q[1]:"Unknown"}else if(j.includes("iPhone")||j.includes("iPad")){C="iOS";const q=j.match(/OS (\d+[._]\d+[._]?\d*)/);J=q?q[1].replace(/_/g,"."):"Unknown"}return{name:C,version:J}},X=async()=>{try{return null}catch(j){return console.warn("Could not determine client IP:",j),null}},ce=async j=>{try{const C=U(),J=N(),q=await X(),ue={endpoint:j.endpoint,p256dhKey:oe(j.getKey("p256dh")),authKey:oe(j.getKey("auth")),userAgent:navigator.userAgent,ipAddress:q||void 0,deviceType:B(),browserName:C.name,browserVersion:C.version,osName:J.name,osVersion:J.version,notificationTypes:["new_message","mention","system"],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},Ce=await xt.createSubscription(ue);if(Ce.error)throw console.error("Failed to save subscription to server:",Ce.error),new Error(Ce.error.message);if(Ce.data){c.value=Ce.data.id,console.log("Subscription saved to server successfully:",Ce.data);try{await xt.sendSubscriptionNotification({type:"subscription_enabled",message:"  push-",subscriptionId:Ce.data.id,metadata:{endpoint:j.endpoint,deviceType:B(),browserName:C.name,browserVersion:C.version,osName:J.name,osVersion:J.version,timestamp:new Date().toISOString()}})}catch(h){console.warn("      :",h)}}}catch(C){throw console.error("Error sending subscription to server:",C),C}},W=async j=>{try{if(c.value){const C=c.value,J=await xt.deleteSubscription(C);if(J.error)throw console.error("Failed to remove subscription from server:",J.error),new Error(J.error.message);c.value=null,console.log("Subscription removed from server successfully");try{await xt.sendSubscriptionNotification({type:"subscription_disabled",message:"Push-  ",subscriptionId:C,metadata:{reason:"user_unsubscribed",endpoint:j.endpoint,timestamp:new Date().toISOString()}})}catch(q){console.warn("      :",q)}}else{const C=await xt.deleteSubscriptionByEndpoint(j.endpoint);if(C.error)throw console.error("Failed to remove subscription from server:",C.error),new Error(C.error.message);console.log("Subscription removed from server by endpoint successfully");try{await xt.sendSubscriptionNotification({type:"subscription_disabled",message:"Push-    endpoint",metadata:{reason:"user_unsubscribed_by_endpoint",endpoint:j.endpoint,timestamp:new Date().toISOString()}})}catch(J){console.warn("        endpoint:",J)}}}catch(C){throw console.error("Error removing subscription from server:",C),C}},F=async()=>{try{const j=await xt.getSubscriptions();if(j.error){console.error("Failed to load user subscriptions:",j.error);return}if(j.data&&j.data.length>0){const C=j.data.find(J=>J.is_active);if(C&&(c.value=C.id,l.value=!0,"serviceWorker"in navigator)){const q=await(await navigator.serviceWorker.ready).pushManager.getSubscription();q&&q.endpoint===C.endpoint&&(a.value=q)}}}catch(j){console.error("Error loading user subscriptions:",j)}},oe=j=>{if(!j)return"";const C=new Uint8Array(j);let J="";for(let q=0;q<C.byteLength;q++)J+=String.fromCharCode(C[q]);return window.btoa(J)};v(),F();function T(){t.value?(document.documentElement.classList.add("dark-theme"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark-theme"),localStorage.setItem("theme","light"))}T();function x(j){t.value=j,T()}return Be(t,T),{darkMode:t,setDarkMode:x,windowWidth:n,isMobile:s,isPWAMode:o,checkPWAMode:p,notificationPermission:i,pushSubscription:a,isSubscribedToPush:l,pushSubscriptionId:c,requestNotificationPermission:$,ensureNotificationPermission:I,subscribeToPush:D,unsubscribeFromPush:P,loadUserSubscriptions:F,incomingCall:d,setIncomingCall:j=>{d.isActive=!0,d.callerId=j.callerId,d.callerName=j.callerName,d.callType=j.callType,d.offer=j.offer||null},clearIncomingCall:()=>{d.isActive=!1,d.callerId=null,d.callerName="",d.callType=null,d.offer=null,d.isConnecting=!1,d.isConnected=!1,d.error=null},setCallConnecting:()=>{d.isConnecting=!0,d.isConnected=!1,d.error=null},setCallConnected:()=>{d.isConnecting=!1,d.isConnected=!0,d.error=null},setCallError:j=>{d.isConnecting=!1,d.isConnected=!1,d.error=j},outgoingCall:u,setOutgoingCall:j=>{u.isActive=!0,u.targetUserId=j.targetUserId,u.targetName=j.targetName,u.callType=j.callType,u.isConnecting=!0,u.isConnected=!1,u.error=null},clearOutgoingCall:()=>{u.isActive=!1,u.targetUserId=null,u.targetName="",u.callType=null,u.isConnecting=!1,u.isConnected=!1,u.error=null},setOutgoingCallConnected:()=>{u.isConnecting=!1,u.isConnected=!0,u.error=null},setOutgoingCallError:j=>{u.isConnecting=!1,u.isConnected=!1,u.error=j}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Cn=typeof document<"u";function cl(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Wd(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&cl(e.default)}const Me=Object.assign;function _o(e,t){const n={};for(const s in t){const o=t[s];n[s]=bt(o)?o.map(e):e(o)}return n}const Jn=()=>{},bt=Array.isArray,ul=/#/g,Kd=/&/g,Gd=/\//g,qd=/=/g,Yd=/\?/g,dl=/\+/g,Jd=/%5B/g,Zd=/%5D/g,fl=/%5E/g,Qd=/%60/g,pl=/%7B/g,Xd=/%7C/g,gl=/%7D/g,ef=/%20/g;function fr(e){return encodeURI(""+e).replace(Xd,"|").replace(Jd,"[").replace(Zd,"]")}function tf(e){return fr(e).replace(pl,"{").replace(gl,"}").replace(fl,"^")}function Ho(e){return fr(e).replace(dl,"%2B").replace(ef,"+").replace(ul,"%23").replace(Kd,"%26").replace(Qd,"`").replace(pl,"{").replace(gl,"}").replace(fl,"^")}function nf(e){return Ho(e).replace(qd,"%3D")}function sf(e){return fr(e).replace(ul,"%23").replace(Yd,"%3F")}function of(e){return e==null?"":sf(e).replace(Gd,"%2F")}function is(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const rf=/\/$/,af=e=>e.replace(rf,"");function Co(e,t,n="/"){let s,o={},i="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),o=e(i)),l>-1&&(s=s||t.slice(0,l),a=t.slice(l,t.length)),s=df(s??t,n),{fullPath:s+(i&&"?")+i+a,path:s,query:o,hash:is(a)}}function lf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function gi(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function cf(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&Mn(t.matched[s],n.matched[o])&&vl(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Mn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function vl(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!uf(e[n],t[n]))return!1;return!0}function uf(e,t){return bt(e)?vi(e,t):bt(t)?vi(t,e):e===t}function vi(e,t){return bt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function df(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let i=n.length-1,a,l;for(a=0;a<s.length;a++)if(l=s[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(a).join("/")}const Ut={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var as;(function(e){e.pop="pop",e.push="push"})(as||(as={}));var Zn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zn||(Zn={}));function ff(e){if(!e)if(Cn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),af(e)}const pf=/^[^#]+#/;function gf(e,t){return e.replace(pf,"#")+t}function vf(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const to=()=>({left:window.scrollX,top:window.scrollY});function hf(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=vf(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function hi(e,t){return(history.state?history.state.position-t:-1)+e}const Fo=new Map;function mf(e,t){Fo.set(e,t)}function wf(e){const t=Fo.get(e);return Fo.delete(e),t}let yf=()=>location.protocol+"//"+location.host;function hl(e,t){const{pathname:n,search:s,hash:o}=t,i=e.indexOf("#");if(i>-1){let l=o.includes(e.slice(i))?e.slice(i).length:1,c=o.slice(l);return c[0]!=="/"&&(c="/"+c),gi(c,"")}return gi(n,e)+s+o}function bf(e,t,n,s){let o=[],i=[],a=null;const l=({state:p})=>{const g=hl(e,location),k=n.value,v=t.value;let $=0;if(p){if(n.value=g,t.value=p,a&&a===k){a=null;return}$=v?p.position-v.position:0}else s(g);o.forEach(I=>{I(n.value,k,{delta:$,type:as.pop,direction:$?$>0?Zn.forward:Zn.back:Zn.unknown})})};function c(){a=n.value}function d(p){o.push(p);const g=()=>{const k=o.indexOf(p);k>-1&&o.splice(k,1)};return i.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(Me({},p.state,{scroll:to()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:d,destroy:f}}function mi(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?to():null}}function _f(e){const{history:t,location:n}=window,s={value:hl(e,n)},o={value:t.state};o.value||i(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,d,u){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:yf()+e+c;try{t[u?"replaceState":"pushState"](d,"",p),o.value=d}catch(g){console.error(g),n[u?"replace":"assign"](p)}}function a(c,d){const u=Me({},t.state,mi(o.value.back,c,o.value.forward,!0),d,{position:o.value.position});i(c,u,!0),s.value=c}function l(c,d){const u=Me({},o.value,t.state,{forward:c,scroll:to()});i(u.current,u,!0);const f=Me({},mi(s.value,c,null),{position:u.position+1},d);i(c,f,!1),s.value=c}return{location:s,state:o,push:l,replace:a}}function Cf(e){e=ff(e);const t=_f(e),n=bf(e,t.state,t.location,t.replace);function s(i,a=!0){a||n.pauseListeners(),history.go(i)}const o=Me({location:"",base:e,go:s,createHref:gf.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function kf(e){return typeof e=="string"||e&&typeof e=="object"}function ml(e){return typeof e=="string"||typeof e=="symbol"}const wl=Symbol("");var wi;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(wi||(wi={}));function $n(e,t){return Me(new Error,{type:e,[wl]:!0},t)}function Mt(e,t){return e instanceof Error&&wl in e&&(t==null||!!(e.type&t))}const yi="[^/]+?",Sf={sensitive:!1,strict:!1,start:!0,end:!0},xf=/[.+*?^${}()[\]/\\]/g;function Tf(e,t){const n=Me({},Sf,t),s=[];let o=n.start?"^":"";const i=[];for(const d of e){const u=d.length?[]:[90];n.strict&&!d.length&&(o+="/");for(let f=0;f<d.length;f++){const p=d[f];let g=40+(n.sensitive?.25:0);if(p.type===0)f||(o+="/"),o+=p.value.replace(xf,"\\$&"),g+=40;else if(p.type===1){const{value:k,repeatable:v,optional:$,regexp:I}=p;i.push({name:k,repeatable:v,optional:$});const D=I||yi;if(D!==yi){g+=10;try{new RegExp(`(${D})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${k}" (${D}): `+R.message)}}let P=v?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(P=$&&d.length<2?`(?:/${P})`:"/"+P),$&&(P+="?"),o+=P,g+=20,$&&(g+=-8),v&&(g+=-20),D===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(n.strict&&n.end){const d=s.length-1;s[d][s[d].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,n.sensitive?"":"i");function l(d){const u=d.match(a),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",k=i[p-1];f[k.name]=g&&k.repeatable?g.split("/"):g}return f}function c(d){let u="",f=!1;for(const p of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:k,repeatable:v,optional:$}=g,I=k in d?d[k]:"";if(bt(I)&&!v)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const D=bt(I)?I.join("/"):I;if(!D)if($)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${k}"`);u+=D}}return u||"/"}return{re:a,score:s,keys:i,parse:l,stringify:c}}function Ef(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yl(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const i=Ef(s[n],o[n]);if(i)return i;n++}if(Math.abs(o.length-s.length)===1){if(bi(s))return 1;if(bi(o))return-1}return o.length-s.length}function bi(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Af={type:0,value:""},If=/[a-zA-Z0-9_]/;function Mf(e){if(!e)return[[]];if(e==="/")return[[Af]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${d}": ${g}`)}let n=0,s=n;const o=[];let i;function a(){i&&o.push(i),i=[]}let l=0,c,d="",u="";function f(){d&&(n===0?i.push({type:0,value:d}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:d,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),d="")}function p(){d+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(d&&f(),a()):c===":"?(f(),n=1):p();break;case 4:p(),n=s;break;case 1:c==="("?n=2:If.test(c)?p():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),f(),a(),o}function $f(e,t,n){const s=Tf(Mf(e.path),n),o=Me(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Lf(e,t){const n=[],s=new Map;t=Si({strict:!1,end:!0,sensitive:!1},t);function o(f){return s.get(f)}function i(f,p,g){const k=!g,v=Ci(f);v.aliasOf=g&&g.record;const $=Si(t,f),I=[v];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const Z of R)I.push(Ci(Me({},v,{components:g?g.record.components:v.components,path:Z,aliasOf:g?g.record:v})))}let D,P;for(const R of I){const{path:Z}=R;if(p&&Z[0]!=="/"){const Y=p.record.path,B=Y[Y.length-1]==="/"?"":"/";R.path=p.record.path+(Z&&B+Z)}if(D=$f(R,p,$),g?g.alias.push(D):(P=P||D,P!==D&&P.alias.push(D),k&&f.name&&!ki(D)&&a(f.name)),bl(D)&&c(D),v.children){const Y=v.children;for(let B=0;B<Y.length;B++)i(Y[B],D,g&&g.children[B])}g=g||D}return P?()=>{a(P)}:Jn}function a(f){if(ml(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function l(){return n}function c(f){const p=Rf(f,n);n.splice(p,0,f),f.record.name&&!ki(f)&&s.set(f.record.name,f)}function d(f,p){let g,k={},v,$;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw $n(1,{location:f});$=g.record.name,k=Me(_i(p.params,g.keys.filter(P=>!P.optional).concat(g.parent?g.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),f.params&&_i(f.params,g.keys.map(P=>P.name))),v=g.stringify(k)}else if(f.path!=null)v=f.path,g=n.find(P=>P.re.test(v)),g&&(k=g.parse(v),$=g.record.name);else{if(g=p.name?s.get(p.name):n.find(P=>P.re.test(p.path)),!g)throw $n(1,{location:f,currentLocation:p});$=g.record.name,k=Me({},p.params,f.params),v=g.stringify(k)}const I=[];let D=g;for(;D;)I.unshift(D.record),D=D.parent;return{name:$,path:v,params:k,matched:I,meta:Pf(I)}}e.forEach(f=>i(f));function u(){n.length=0,s.clear()}return{addRoute:i,resolve:d,removeRoute:a,clearRoutes:u,getRoutes:l,getRecordMatcher:o}}function _i(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Ci(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Df(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Df(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function ki(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Pf(e){return e.reduce((t,n)=>Me(t,n.meta),{})}function Si(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Rf(e,t){let n=0,s=t.length;for(;n!==s;){const i=n+s>>1;yl(e,t[i])<0?s=i:n=i+1}const o=Vf(e);return o&&(s=t.lastIndexOf(o,s-1)),s}function Vf(e){let t=e;for(;t=t.parent;)if(bl(t)&&yl(e,t)===0)return t}function bl({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Of(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const i=s[o].replace(dl," "),a=i.indexOf("="),l=is(a<0?i:i.slice(0,a)),c=a<0?null:is(i.slice(a+1));if(l in t){let d=t[l];bt(d)||(d=t[l]=[d]),d.push(c)}else t[l]=c}return t}function xi(e){let t="";for(let n in e){const s=e[n];if(n=nf(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(bt(s)?s.map(i=>i&&Ho(i)):[s&&Ho(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Nf(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=bt(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const Bf=Symbol(""),Ti=Symbol(""),no=Symbol(""),pr=Symbol(""),Uo=Symbol("");function Vn(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function qt(e,t,n,s,o,i=a=>a()){const a=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const d=p=>{p===!1?c($n(4,{from:n,to:t})):p instanceof Error?c(p):kf(p)?c($n(2,{from:t,to:p})):(a&&s.enterCallbacks[o]===a&&typeof p=="function"&&a.push(p),l())},u=i(()=>e.call(s&&s.instances[o],t,n,d));let f=Promise.resolve(u);e.length<3&&(f=f.then(d)),f.catch(p=>c(p))})}function ko(e,t,n,s,o=i=>i()){const i=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(cl(c)){const u=(c.__vccOpts||c)[t];u&&i.push(qt(u,n,s,a,l,o))}else{let d=c();i.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const f=Wd(u)?u.default:u;a.mods[l]=u,a.components[l]=f;const g=(f.__vccOpts||f)[t];return g&&qt(g,n,s,a,l,o)()}))}}return i}function Ei(e){const t=gt(no),n=gt(pr),s=Se(()=>{const c=te(e.to);return t.resolve(c)}),o=Se(()=>{const{matched:c}=s.value,{length:d}=c,u=c[d-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(Mn.bind(null,u));if(p>-1)return p;const g=Ai(c[d-2]);return d>1&&Ai(u)===g&&f[f.length-1].path!==g?f.findIndex(Mn.bind(null,c[d-2])):p}),i=Se(()=>o.value>-1&&zf(n.params,s.value.params)),a=Se(()=>o.value>-1&&o.value===n.matched.length-1&&vl(n.params,s.value.params));function l(c={}){if(jf(c)){const d=t[te(e.replace)?"replace":"push"](te(e.to)).catch(Jn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:s,href:Se(()=>s.value.href),isActive:i,isExactActive:a,navigate:l}}function Hf(e){return e.length===1?e[0]:e}const Ff=Ne({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ei,setup(e,{slots:t}){const n=Nt(Ei(e)),{options:s}=gt(no),o=Se(()=>({[Ii(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ii(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&Hf(t.default(n));return e.custom?i:ur("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),Uf=Ff;function jf(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function zf(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!bt(o)||o.length!==s.length||s.some((i,a)=>i!==o[a]))return!1}return!0}function Ai(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ii=(e,t,n)=>e??t??n,Wf=Ne({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=gt(Uo),o=Se(()=>e.route||s.value),i=gt(Ti,0),a=Se(()=>{let d=te(i);const{matched:u}=o.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=Se(()=>o.value.matched[a.value]);Cs(Ti,Se(()=>a.value+1)),Cs(Bf,l),Cs(Uo,o);const c=O();return Be(()=>[c.value,l.value,e.name],([d,u,f],[p,g,k])=>{u&&(u.instances[f]=d,g&&g!==u&&d&&d===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),d&&u&&(!g||!Mn(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(d))},{flush:"post"}),()=>{const d=o.value,u=e.name,f=l.value,p=f&&f.components[u];if(!p)return Mi(n.default,{Component:p,route:d});const g=f.props[u],k=g?g===!0?d.params:typeof g=="function"?g(d):g:null,$=ur(p,Me({},k,t,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return Mi(n.default,{Component:$,route:d})||$}}});function Mi(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Kf=Wf;function Gf(e){const t=Lf(e.routes,e),n=e.parseQuery||Of,s=e.stringifyQuery||xi,o=e.history,i=Vn(),a=Vn(),l=Vn(),c=nr(Ut);let d=Ut;Cn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=_o.bind(null,C=>""+C),f=_o.bind(null,of),p=_o.bind(null,is);function g(C,J){let q,ue;return ml(C)?(q=t.getRecordMatcher(C),ue=J):ue=C,t.addRoute(ue,q)}function k(C){const J=t.getRecordMatcher(C);J&&t.removeRoute(J)}function v(){return t.getRoutes().map(C=>C.record)}function $(C){return!!t.getRecordMatcher(C)}function I(C,J){if(J=Me({},J||c.value),typeof C=="string"){const E=Co(n,C,J.path),H=t.resolve({path:E.path},J),K=o.createHref(E.fullPath);return Me(E,H,{params:p(H.params),hash:is(E.hash),redirectedFrom:void 0,href:K})}let q;if(C.path!=null)q=Me({},C,{path:Co(n,C.path,J.path).path});else{const E=Me({},C.params);for(const H in E)E[H]==null&&delete E[H];q=Me({},C,{params:f(E)}),J.params=f(J.params)}const ue=t.resolve(q,J),Ce=C.hash||"";ue.params=u(p(ue.params));const h=lf(s,Me({},C,{hash:tf(Ce),path:ue.path})),m=o.createHref(h);return Me({fullPath:h,hash:Ce,query:s===xi?Nf(C.query):C.query||{}},ue,{redirectedFrom:void 0,href:m})}function D(C){return typeof C=="string"?Co(n,C,c.value.path):Me({},C)}function P(C,J){if(d!==C)return $n(8,{from:J,to:C})}function R(C){return B(C)}function Z(C){return R(Me(D(C),{replace:!0}))}function Y(C){const J=C.matched[C.matched.length-1];if(J&&J.redirect){const{redirect:q}=J;let ue=typeof q=="function"?q(C):q;return typeof ue=="string"&&(ue=ue.includes("?")||ue.includes("#")?ue=D(ue):{path:ue},ue.params={}),Me({query:C.query,hash:C.hash,params:ue.path!=null?{}:C.params},ue)}}function B(C,J){const q=d=I(C),ue=c.value,Ce=C.state,h=C.force,m=C.replace===!0,E=Y(q);if(E)return B(Me(D(E),{state:typeof E=="object"?Me({},Ce,E.state):Ce,force:h,replace:m}),J||q);const H=q;H.redirectedFrom=J;let K;return!h&&cf(s,ue,q)&&(K=$n(16,{to:H,from:ue}),V(ue,ue,!0,!1)),(K?Promise.resolve(K):X(H,ue)).catch(z=>Mt(z)?Mt(z,2)?z:_(z):Q(z,H,ue)).then(z=>{if(z){if(Mt(z,2))return B(Me({replace:m},D(z.to),{state:typeof z.to=="object"?Me({},Ce,z.to.state):Ce,force:h}),J||H)}else z=W(H,ue,!0,m,Ce);return ce(H,ue,z),z})}function U(C,J){const q=P(C,J);return q?Promise.reject(q):Promise.resolve()}function N(C){const J=S.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(C):C()}function X(C,J){let q;const[ue,Ce,h]=qf(C,J);q=ko(ue.reverse(),"beforeRouteLeave",C,J);for(const E of ue)E.leaveGuards.forEach(H=>{q.push(qt(H,C,J))});const m=U.bind(null,C,J);return q.push(m),j(q).then(()=>{q=[];for(const E of i.list())q.push(qt(E,C,J));return q.push(m),j(q)}).then(()=>{q=ko(Ce,"beforeRouteUpdate",C,J);for(const E of Ce)E.updateGuards.forEach(H=>{q.push(qt(H,C,J))});return q.push(m),j(q)}).then(()=>{q=[];for(const E of h)if(E.beforeEnter)if(bt(E.beforeEnter))for(const H of E.beforeEnter)q.push(qt(H,C,J));else q.push(qt(E.beforeEnter,C,J));return q.push(m),j(q)}).then(()=>(C.matched.forEach(E=>E.enterCallbacks={}),q=ko(h,"beforeRouteEnter",C,J,N),q.push(m),j(q))).then(()=>{q=[];for(const E of a.list())q.push(qt(E,C,J));return q.push(m),j(q)}).catch(E=>Mt(E,8)?E:Promise.reject(E))}function ce(C,J,q){l.list().forEach(ue=>N(()=>ue(C,J,q)))}function W(C,J,q,ue,Ce){const h=P(C,J);if(h)return h;const m=J===Ut,E=Cn?history.state:{};q&&(ue||m?o.replace(C.fullPath,Me({scroll:m&&E&&E.scroll},Ce)):o.push(C.fullPath,Ce)),c.value=C,V(C,J,q,m),_()}let F;function oe(){F||(F=o.listen((C,J,q)=>{if(!re.listening)return;const ue=I(C),Ce=Y(ue);if(Ce){B(Me(Ce,{replace:!0,force:!0}),ue).catch(Jn);return}d=ue;const h=c.value;Cn&&mf(hi(h.fullPath,q.delta),to()),X(ue,h).catch(m=>Mt(m,12)?m:Mt(m,2)?(B(Me(D(m.to),{force:!0}),ue).then(E=>{Mt(E,20)&&!q.delta&&q.type===as.pop&&o.go(-1,!1)}).catch(Jn),Promise.reject()):(q.delta&&o.go(-q.delta,!1),Q(m,ue,h))).then(m=>{m=m||W(ue,h,!1),m&&(q.delta&&!Mt(m,8)?o.go(-q.delta,!1):q.type===as.pop&&Mt(m,20)&&o.go(-1,!1)),ce(ue,h,m)}).catch(Jn)}))}let T=Vn(),x=Vn(),L;function Q(C,J,q){_(C);const ue=x.list();return ue.length?ue.forEach(Ce=>Ce(C,J,q)):console.error(C),Promise.reject(C)}function M(){return L&&c.value!==Ut?Promise.resolve():new Promise((C,J)=>{T.add([C,J])})}function _(C){return L||(L=!C,oe(),T.list().forEach(([J,q])=>C?q(C):J()),T.reset()),C}function V(C,J,q,ue){const{scrollBehavior:Ce}=e;if(!Cn||!Ce)return Promise.resolve();const h=!q&&wf(hi(C.fullPath,0))||(ue||!q)&&history.state&&history.state.scroll||null;return ze().then(()=>Ce(C,J,h)).then(m=>m&&hf(m)).catch(m=>Q(m,C,J))}const A=C=>o.go(C);let w;const S=new Set,re={currentRoute:c,listening:!0,addRoute:g,removeRoute:k,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:v,resolve:I,options:e,push:R,replace:Z,go:A,back:()=>A(-1),forward:()=>A(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:x.add,isReady:M,install(C){const J=this;C.component("RouterLink",Uf),C.component("RouterView",Kf),C.config.globalProperties.$router=J,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>te(c)}),Cn&&!w&&c.value===Ut&&(w=!0,R(o.location).catch(Ce=>{}));const q={};for(const Ce in Ut)Object.defineProperty(q,Ce,{get:()=>c.value[Ce],enumerable:!0});C.provide(no,J),C.provide(pr,oa(q)),C.provide(Uo,c);const ue=C.unmount;S.add(C),C.unmount=function(){S.delete(C),S.size<1&&(d=Ut,F&&F(),F=null,c.value=Ut,w=!1,L=!1),ue()}}};function j(C){return C.reduce((J,q)=>J.then(()=>N(q)),Promise.resolve())}return re}function qf(e,t){const n=[],s=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(d=>Mn(d,l))?s.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(d=>Mn(d,c))||o.push(c))}return[n,s,o]}function ut(){return gt(no)}function Dn(e){return gt(pr)}const gr=Xs("messages",()=>{const e=O([]),t=O(!1);function n(c){e.value.push(c)}function s(c){e.value.splice(c,1)}function o(c,d,u){c>=0&&c<e.value.length&&(e.value[c]={...e.value[c],text:d,...u})}function i(c){e.value=c}function a(){e.value=[]}function l(c){t.value=c}return{messages:e,isLoading:t,addMessage:n,deleteMessage:s,updateMessage:o,resetMessages:a,setMessages:i,setLoading:l}}),Yf={class:"menu-container"},Jf=["disabled"],Zf={key:0},Qf={key:1},Xf=Ne({__name:"MenuButton",setup(e){const t=ut(),n=_t(),s=O(!1),o=O(!1),i=O(null),a=O(!1),l=()=>{s.value=!s.value},c=()=>{s.value=!1},d=v=>{const $=v.target;s.value&&!$.closest(".menu-container")&&c()},u=v=>{v.preventDefault(),i.value=v,a.value=!0},f=async()=>{if(!i.value)return;i.value.prompt();const{outcome:v}=await i.value.userChoice;v==="accepted"&&(console.log("PWA "),a.value=!1),i.value=null,c()};Ue(()=>{window.addEventListener("click",d),window.addEventListener("beforeinstallprompt",u)}),at(()=>{window.removeEventListener("click",d),window.removeEventListener("beforeinstallprompt",u)});const p=()=>{c(),t.push("/account")},g=()=>{c(),t.push("/projects")},k=async()=>{o.value=!0;try{const{error:v,data:$}=await be.http("POST","/api/auth/logout");v?console.error(v):(console.log($),n.emit("unauthorized"),t.push("/"))}catch(v){console.error("Logout error:",v)}finally{o.value=!1,c()}};return(v,$)=>(y(),b("div",Yf,[r("button",{class:"menu-button",onClick:ct(l,["stop"])},$[0]||($[0]=[r("svg",{class:"menu-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"14",height:"14",fill:"white"},[r("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})],-1)])),r("div",{class:ke(["dropdown-menu",{show:s.value}])},[a.value?(y(),b("button",{key:0,class:"menu-item install-app",onClick:f},$[1]||($[1]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})],-1),Oe(" Install App ")]))):de("",!0),r("button",{class:"menu-item",onClick:p},$[2]||($[2]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})],-1),Oe(" My Account ")])),r("button",{class:"menu-item",onClick:g},$[3]||($[3]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M20 6h-2l-2-2H8L6 6H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM6 12h4v4H6v-4z"})],-1),Oe(" My Projects ")])),r("button",{class:"menu-item",onClick:k,disabled:o.value},[$[4]||($[4]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})],-1)),o.value?(y(),b("span",Zf,"Logging out...")):(y(),b("span",Qf,"Logout"))],8,Jf)],2)]))}}),je=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},ep=je(Xf,[["__scopeId","data-v-954d1a2f"]]),tp={class:"app-header"},np={class:"header-content"},sp={class:"left-side"},op={class:"right-side"},rp={class:"tabs"},ip={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},ap={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},lp=["title"],cp={class:"status-text"},up=Ne({__name:"AppHeader",props:{title:{type:String,default:""},backPath:{type:String,default:""},backLabel:{type:String,default:"Back"}},setup(e){const t=e,n=ut(),s=Dn(),o=Se(()=>s.meta.tab||"chat"),i=_t(),{statusWebSocket:a}=dr(),l=Se(()=>{switch(a.value){case"OPEN":return"Connected";case"CONNECTING":return"Connecting...";case"CLOSED":return"Disconnected";default:return"Unknown"}}),c=Se(()=>{switch(a.value){case"OPEN":return"status-connected";case"CONNECTING":return"status-connecting";case"CLOSED":return"status-disconnected";default:return"status-unknown"}}),d=O(!0);Ue(()=>{d.value=localStorage.getItem("notifications_enabled")!=="false"});const u=()=>{d.value=!d.value,localStorage.setItem("notifications_enabled",String(d.value)),i.emit("toggle_notifications",{enabled:d.value})},f=()=>{t.backPath?n.push(t.backPath):n.back()};return(p,g)=>(y(),b("header",tp,[r("div",np,[r("div",sp,[e.backPath?(y(),b("button",{key:0,class:"back-button",onClick:f},[g[5]||(g[5]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),r("span",null,G(e.backLabel),1)])):de("",!0)]),r("div",op,[r("nav",rp,[r("button",{class:ke(["tab",{active:o.value==="chat"}]),onClick:g[0]||(g[0]=k=>te(n).push("/chat")),title:"Chat"},g[6]||(g[6]=[r("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true"},[r("path",{d:"M4 4h16v12H5.17L4 17.17V4z",fill:"currentColor"})],-1),r("span",null,"Chat",-1)]),2),r("button",{class:ke(["tab",{active:o.value==="calendar"}]),onClick:g[1]||(g[1]=k=>te(n).push("/calendar")),title:"Calendar"},g[7]||(g[7]=[r("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true"},[r("path",{d:"M7 2v2H5a2 2 0 0 0-2 2v2h18V6a2 2 0 0 0-2-2h-2V2h-2v2H9V2H7zm14 8H3v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V10z",fill:"currentColor"})],-1),r("span",null,"Calendar",-1)]),2),r("button",{class:ke(["tab",{active:o.value==="tasks"}]),onClick:g[2]||(g[2]=k=>te(n).push("/tasks")),title:"Tasks"},g[8]||(g[8]=[r("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true"},[r("path",{d:"M9 11H4v2h5v-2zm0-4H4v2h5V7zm11 8H11v2h9v-2zm0-4H11v2h9v-2zm0-4H11v2h9V7z",fill:"currentColor"})],-1),r("span",null,"Tasks",-1)]),2),r("button",{class:ke(["tab",{active:o.value==="notes"}]),onClick:g[3]||(g[3]=k=>te(n).push("/notes")),title:"Notes"},g[9]||(g[9]=[r("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true"},[r("path",{d:"M3 5v14a2 2 0 0 0 2 2h10l6-6V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2zm12 14V9h6",fill:"currentColor"})],-1),r("span",null,"Notes",-1)]),2),r("button",{class:ke(["tab",{active:o.value==="projects"}]),onClick:g[4]||(g[4]=k=>te(n).push("/projects")),title:"Projects"},g[10]||(g[10]=[r("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true"},[r("path",{d:"M4 6h16v12H4zM2 4h20v2H2z",fill:"currentColor"})],-1),r("span",null,"Projects",-1)]),2)]),r("button",{class:"notification-button",onClick:u,title:"Toggle notification sound"},[d.value?(y(),b("svg",ip,g[11]||(g[11]=[r("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z",fill:"currentColor"},null,-1)]))):(y(),b("svg",ap,g[12]||(g[12]=[r("path",{d:"M20 18.69L7.84 6.14 5.27 3.49 4 4.76l2.8 2.8v.01c-.52.99-.8 2.16-.8 3.42v5l-2 2v1h13.73l2 2L21 19.72l-1-1.03zM12 22c1.11 0 2-.89 2-2h-4c0 1.11.89 2 2 2zm6-7.32V11c0-3.08-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68c-.15.03-.29.08-.42.12-.1.03-.2.07-.3.11h-.01c-.01 0-.01 0-.02.01-.23.09-.46.2-.68.31 0 0-.01 0-.01.01l2.97 2.97V5.36c0-.22.02-.42.05-.62.07.41.23.78.46 1.06.43.52 1.1.84 1.83.84.33 0 .65-.06.93-.18.5.52.86 1.15 1.09 1.86.11.34.17.69.2 1.06v5.59l3.24 3.24-.07-.03c.45-.4.87-.92 1.22-1.5.19-.32.34-.67.45-1.05z",fill:"currentColor"},null,-1)])))]),r("div",{class:ke(["websocket-status",c.value]),title:`WebSocket Status: ${l.value}`},[g[13]||(g[13]=r("div",{class:"status-dot"},null,-1)),r("span",cp,G(l.value),1)],10,lp),xe(ep)])])]))}}),dp=je(up,[["__scopeId","data-v-1791c153"]]),fp=()=>{const e=_t();let t=null,n=null,s=null,o=null,i=[],a=null,l=null,c=null,d=null;const u=O({isConnecting:!1,isConnected:!1,isLocalVideoEnabled:!1,isLocalAudioEnabled:!1,isRemoteVideoEnabled:!1,isRemoteAudioEnabled:!1,isScreenSharing:!1,error:null}),f=O([]),p=O([]),g=O(null),k=O(null),v={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]},$=(A=v)=>{try{return t=new RTCPeerConnection(A),t.onicecandidate=w=>{w.candidate&&o&&(console.log("ICE candidate:",w.candidate),e.emit("webrtc_ice_candidate",{candidate:w.candidate,targetUserId:o}))},t.oniceconnectionstatechange=()=>{const w=t==null?void 0:t.iceConnectionState;if(console.log("ICE connection state:",w),!!w)switch(w){case"checking":case"new":u.value.isConnecting=!0,u.value.isConnected=!1,u.value.error=null,e.emit("webrtc_connection_state_changed",{state:"connecting",isConnecting:!0,isConnected:!1});break;case"connected":case"completed":u.value.isConnecting=!1,u.value.isConnected=!0,u.value.error=null,e.emit("webrtc_connection_state_changed",{state:"connected",isConnecting:!1,isConnected:!0});break;case"disconnected":case"failed":case"closed":u.value.isConnecting=!1,u.value.isConnected=!1,w==="failed"&&(u.value.error="Connection failed"),e.emit("webrtc_connection_state_changed",{state:w,isConnecting:!1,isConnected:!1,error:w==="failed"?"Connection failed":null});break}},t.ontrack=w=>{console.log(" ontrack: Remote track received:",w),w.streams&&w.streams[0]&&(s=w.streams[0],console.log(" ontrack: Remote stream set, tracks:",s.getTracks().length),w.streams[0].getTracks().forEach(S=>{console.log(` Remote track: ${S.kind}, enabled: ${S.enabled}`),S.kind==="video"?u.value.isRemoteVideoEnabled=S.enabled:S.kind==="audio"&&(u.value.isRemoteAudioEnabled=S.enabled)}),console.log(" ontrack: emitting webrtc_remote_stream_updated event"),e.emit("webrtc_remote_stream_updated",{stream:s}),console.log(" ontrack: event emitted"))},t.ondatachannel=w=>{console.log("Data channel received:",w.channel)},t}catch(w){return console.error("Failed to initialize peer connection:",w),u.value.error="Failed to initialize connection",null}},I=async()=>{try{const A=await navigator.mediaDevices.enumerateDevices(),w=A.filter(re=>re.kind==="videoinput").map(re=>({deviceId:re.deviceId,label:re.label||`Camera ${re.deviceId.slice(0,8)}`,kind:re.kind})),S=A.filter(re=>re.kind==="audioinput").map(re=>({deviceId:re.deviceId,label:re.label||`Microphone ${re.deviceId.slice(0,8)}`,kind:re.kind}));return f.value=w,p.value=S,console.log(" Available video devices:",w),console.log(" Available audio devices:",S),{videoDevices:w,audioDevices:S}}catch(A){return console.error("Failed to get media devices:",A),{videoDevices:[],audioDevices:[]}}},D=async A=>{try{u.value.error=null,console.log(" getUserMedia: requesting media with constraints:",A);const w=await navigator.mediaDevices.getUserMedia(A);return n=w,console.log(" getUserMedia: got stream with tracks:",w.getTracks().length),w.getTracks().forEach(S=>{console.log(` Track: ${S.kind}, enabled: ${S.enabled}`),S.kind==="video"?u.value.isLocalVideoEnabled=S.enabled:S.kind==="audio"&&(u.value.isLocalAudioEnabled=S.enabled)}),console.log(" getUserMedia: emitting webrtc_local_stream_updated event"),e.emit("webrtc_local_stream_updated",{stream:n}),console.log(" getUserMedia: event emitted"),w}catch(w){throw console.error("Failed to get user media:",w),u.value.error="Failed to access camera/microphone",w}},P=async(A,w)=>{try{u.value.isConnecting=!0,u.value.error=null,o=w;const S=$();if(!S)throw new Error("Failed to initialize peer connection");const j=await D({audio:l?{deviceId:{exact:l}}:!0,video:A==="video"?a?{deviceId:{exact:a}}:!0:!1});return j.getTracks().forEach(C=>{S.addTrack(C,j)}),console.log("Call prepared, media stream ready"),!0}catch(S){return console.error("Failed to prepare call:",S),u.value.isConnecting=!1,u.value.error="Failed to prepare call",!1}},R=async(A,w)=>{try{if(!t)throw new Error("Peer connection not initialized");const S=await t.createOffer();return await t.setLocalDescription(S),e.emit("webrtc_call_offer",{targetUserId:w,callType:A,offer:S}),console.log("Offer sent"),!0}catch(S){return console.error("Failed to send offer:",S),u.value.error="Failed to send offer",!1}},Z=async(A,w)=>{try{return!await P(A,w)||!await R(A,w)?!1:(console.log("Call started, offer sent"),!0)}catch(S){return console.error("Failed to start call:",S),u.value.isConnecting=!1,u.value.error="Failed to start call",!1}},Y=async(A,w,S)=>{try{u.value.isConnecting=!0,u.value.error=null,o=S;const re=$();if(!re)throw new Error("Failed to initialize peer connection");const C=await D({audio:l?{deviceId:{exact:l}}:!0,video:A==="video"?a?{deviceId:{exact:a}}:!0:!1});return C.getTracks().forEach(J=>{re.addTrack(J,C)}),console.log("Local stream set up in prepareAcceptCall, tracks added to peer connection"),await re.setRemoteDescription(w),await N(),console.log("Call prepared for acceptance, media stream ready"),!0}catch(re){return console.error("Failed to prepare accept call:",re),u.value.isConnecting=!1,u.value.error="Failed to prepare accept call",!1}},B=async A=>{try{if(!t)throw new Error("Peer connection not initialized");const w=await t.createAnswer();return await t.setLocalDescription(w),console.log("Emitting webrtc_call_answer event with targetUserId:",A),e.emit("webrtc_call_answer",{answer:w,targetUserId:A}),console.log("Answer sent"),!0}catch(w){return console.error("Failed to send answer:",w),u.value.error="Failed to send answer",!1}},U=async(A,w,S)=>{try{return!await Y(A,w,S)||!await B(S)?!1:(console.log("Call accepted, answer sent"),!0)}catch(re){return console.error("Failed to accept call:",re),u.value.isConnecting=!1,u.value.error="Failed to accept call",!1}},N=async()=>{if(!(!t||i.length===0)){console.log(`Applying ${i.length} pending ICE candidates`);for(const A of i)try{await t.addIceCandidate(A),console.log("Pending ICE candidate added successfully")}catch(w){console.error("Failed to add pending ICE candidate:",w)}i=[]}},X=async A=>{try{if(!t)throw new Error("Peer connection not initialized");await t.setRemoteDescription(A),console.log("Answer processed successfully"),await N()}catch(w){console.error("Failed to handle answer:",w),u.value.error="Failed to process answer"}},ce=async A=>{try{if(!t){console.warn("Peer connection not initialized yet, buffering ICE candidate"),i.push(A);return}if(!t.remoteDescription){console.warn("Remote description not set yet, buffering ICE candidate"),i.push(A);return}await t.addIceCandidate(A),console.log("ICE candidate added successfully")}catch(w){console.error("Failed to add ICE candidate:",w)}},W=async A=>{try{if(!n)return console.warn("No local stream available for video device switch"),!1;a=A,g.value=A;const S=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:A}},audio:!1})).getVideoTracks()[0],re=n.getVideoTracks()[0];if(S&&t){const j=t.getSenders().find(C=>C.track&&C.track.kind==="video");return j&&await j.replaceTrack(S),re&&(re.stop(),n.removeTrack(re)),n.addTrack(S),u.value.isLocalVideoEnabled=S.enabled,e.emit("webrtc_local_stream_updated",{stream:n}),console.log(" Video device switched successfully to:",A),!0}return!1}catch(w){return console.error("Failed to switch video device:",w),u.value.error="Failed to switch camera",!1}},F=async A=>{try{if(!n)return console.warn("No local stream available for audio device switch"),!1;l=A,k.value=A;const S=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:A}},video:!1})).getAudioTracks()[0],re=n.getAudioTracks()[0];if(S&&t){const j=t.getSenders().find(C=>C.track&&C.track.kind==="audio");return j&&await j.replaceTrack(S),re&&(re.stop(),n.removeTrack(re)),n.addTrack(S),u.value.isLocalAudioEnabled=S.enabled,e.emit("webrtc_local_stream_updated",{stream:n}),console.log(" Audio device switched successfully to:",A),!0}return!1}catch(w){return console.error("Failed to switch audio device:",w),u.value.error="Failed to switch microphone",!1}},oe=()=>{if(n){const A=n.getVideoTracks()[0];A&&(A.enabled=!A.enabled,u.value.isLocalVideoEnabled=A.enabled)}},T=()=>{if(n){const A=n.getAudioTracks()[0];A&&(A.enabled=!A.enabled,u.value.isLocalAudioEnabled=A.enabled)}},x=async()=>{try{if(!n||!t)return console.warn("No local stream or peer connection available for screen sharing"),!1;c=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1});const A=c.getVideoTracks()[0];if(A){const w=n.getVideoTracks()[0];w&&(d=w);const S=t.getSenders().find(re=>re.track&&re.track.kind==="video");return S&&await S.replaceTrack(A),w&&n.removeTrack(w),n.addTrack(A),u.value.isScreenSharing=!0,u.value.isLocalVideoEnabled=!0,A.onended=()=>{console.log("Screen sharing stopped by user"),L()},e.emit("webrtc_local_stream_updated",{stream:n}),console.log(" Screen sharing started successfully"),!0}return!1}catch(A){return console.error("Failed to start screen sharing:",A),u.value.error="Failed to start screen sharing",!1}},L=async()=>{try{if(!n||!t||!c)return console.warn("No screen stream to stop"),!1;c.getTracks().forEach(w=>{w.stop()});const A=n.getVideoTracks()[0];if(A&&n.removeTrack(A),d){const w=t.getSenders().find(S=>S.track&&S.track.kind==="video");w&&await w.replaceTrack(d),n.addTrack(d),d=null}else{const w={video:a?{deviceId:{exact:a}}:!0,audio:!1},re=(await navigator.mediaDevices.getUserMedia(w)).getVideoTracks()[0];if(re){const j=t.getSenders().find(C=>C.track&&C.track.kind==="video");j&&await j.replaceTrack(re),n.addTrack(re)}}return u.value.isScreenSharing=!1,u.value.isLocalVideoEnabled=!0,c=null,e.emit("webrtc_local_stream_updated",{stream:n}),console.log(" Screen sharing stopped, camera restored"),!0}catch(A){return console.error("Failed to stop screen sharing:",A),u.value.error="Failed to stop screen sharing",!1}},Q=async()=>u.value.isScreenSharing?await L():await x(),M=(A,w=!1)=>{try{const S=o;n&&(n.getTracks().forEach(re=>{re.stop()}),n=null),t&&(t.close(),t=null),c&&(c.getTracks().forEach(re=>{re.stop()}),c=null),d&&(d.stop(),d=null),u.value={isConnecting:!1,isConnected:!1,isLocalVideoEnabled:!1,isLocalAudioEnabled:!1,isRemoteVideoEnabled:!1,isRemoteAudioEnabled:!1,isScreenSharing:!1,error:null},s=null,i=[],S&&!w?(console.log("Emitting webrtc_call_end event for targetUserId:",S),e.emit("webrtc_call_end",{targetUserId:S,reason:A||"call_ended"})):w&&console.log("Skipping webrtc_call_end event emission (local cleanup only)"),e.emit("webrtc_streams_cleared",{}),o=null,console.log("Call ended successfully")}catch(S){console.error("Error ending call:",S)}};return at(()=>{M()}),{callState:u,getLocalStream:()=>(console.log("getLocalStream called, returning:",!!n),n),getRemoteStream:()=>(console.log("getRemoteStream called, returning:",!!s),s),availableVideoDevices:f,availableAudioDevices:p,currentVideoDevice:g,currentAudioDevice:k,getMediaDevices:I,switchVideoDevice:W,switchAudioDevice:F,prepareCall:P,sendOffer:R,startCall:Z,prepareAcceptCall:Y,sendAnswer:B,acceptCall:U,handleAnswer:X,handleIceCandidate:ce,toggleLocalVideo:oe,toggleLocalAudio:T,startScreenShare:x,stopScreenShare:L,toggleScreenShare:Q,endCall:M}},pp={class:"call-info"},gp={class:"caller-name"},vp={class:"call-type-label"},hp={key:0,class:"device-selectors-inline"},mp={key:0,class:"loading-devices-inline"},wp={key:1,class:"device-selectors-compact"},yp={key:0,class:"device-selector-compact"},bp=["value","disabled"],_p=["value"],Cp={class:"device-selector-compact"},kp=["value","disabled"],Sp=["value"],xp={key:1},Tp={key:0,class:"audio-status"},Ep={class:"audio-error"},Ap={key:1,class:"audio-status"},Ip={key:0,class:"device-selectors-fullscreen"},Mp={key:0,class:"loading-devices-inline"},$p={key:1,class:"device-selectors-compact"},Lp={key:0,class:"device-selector-compact"},Dp=["value","disabled"],Pp=["value"],Rp={class:"device-selector-compact"},Vp=["value","disabled"],Op=["value"],Np={key:1,class:"video-container"},Bp={key:0,class:"avatar-circle"},Hp={key:1,class:"call-status"},Fp={key:0,class:"avatar-circle"},Up={key:1,class:"call-status"},jp={key:2,class:"connection-status connecting"},zp={key:3,class:"connection-status connected"},Wp={key:4,class:"connection-status error"},Kp={class:"call-actions"},Gp=["disabled"],qp={key:0,class:"button-spinner"},Yp={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Jp={key:2},Zp={key:3},Qp=["title"],Xp={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},eg={key:0,d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",fill:"currentColor"},tg={key:1,d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z",fill:"currentColor"},ng=["title"],sg={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},og={key:0,d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z",fill:"currentColor"},rg={key:1,d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z",fill:"currentColor"},ig=["title"],ag={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lg={key:0,d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z",fill:"currentColor"},cg={key:1,d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6zm9 2l-4 4h3v3h2v-3h3l-4-4z",fill:"currentColor"},ug=["title"],dg={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fg={key:0,d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z",fill:"currentColor"},pg={key:1,d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V20h2v-2.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z",fill:"currentColor"},gg=Ne({__name:"VideoCallModal",props:{callerName:{},callerId:{},callType:{},isOutgoing:{type:Boolean},offer:{}},emits:["accept-call","decline-call","cancel-connection","call-ended"],setup(e,{emit:t}){const n=e,s=t,o=_t(),{callState:i,getLocalStream:a,getRemoteStream:l,prepareCall:c,sendOffer:d,prepareAcceptCall:u,sendAnswer:f,handleAnswer:p,handleIceCandidate:g,toggleLocalVideo:k,toggleLocalAudio:v,toggleScreenShare:$,endCall:I,availableVideoDevices:D,availableAudioDevices:P,currentVideoDevice:R,currentAudioDevice:Z,getMediaDevices:Y,switchVideoDevice:B,switchAudioDevice:U}=fp();let N=null,X=null;const ce=O(!1),W=O(!1);let F=null;const oe=O(null),T=O(!1),x=O(!1),L=O(null),Q=O(null),M=O(!1),_=O(!1),V=O(!1),A=O(!1),w=O(!1),S=O(!1),re=Se(()=>{const ee=i.value.isConnected&&ce.value&&W.value;return console.log("shouldShowSmallVideo computed:",{result:ee,isConnected:i.value.isConnected,hasLocalStream:ce.value,hasRemoteStream:W.value}),ee}),j=async()=>{if(console.log("tryPlayRingtone called, audio exists:",!!F,"isAudioStopped:",x.value),!F||x.value){console.log("Skipping ringtone play - audio stopped or not available");return}if(T.value){console.log("Ringtone already playing, skipping");return}try{F.volume=.7,await F.play(),T.value=!0,oe.value=null,console.log("Ringtone started playing successfully")}catch(ee){console.error("Failed to play ringtone:",ee);const le=ee instanceof Error?ee.message:"Unknown audio error";oe.value=le,ee instanceof DOMException&&ee.name==="NotAllowedError"&&console.log("Autoplay blocked, trying fallback sound...")}},C=()=>{if(console.log("stopRingtone called, current state:",{hasAudio:!!F,isPlaying:T.value,isStopped:x.value}),x.value=!0,F)try{F.pause(),F.currentTime=0,T.value=!1,console.log("Ringtone stopped successfully")}catch(ee){console.error("Error stopping ringtone:",ee),T.value=!1}else T.value=!1},J=ee=>new Promise((le,he)=>{const Je=setTimeout(()=>{he(new Error("Video ready timeout"))},1e4),Ke=()=>{console.log("Video loadeddata event fired"),qe(),le()},dt=()=>{console.log("Video canplay event fired"),qe(),le()},We=wn=>{console.error("Video error event:",wn),qe(),he(new Error("Video loading error"))},qe=()=>{clearTimeout(Je),ee.removeEventListener("loadeddata",Ke),ee.removeEventListener("canplay",dt),ee.removeEventListener("error",We)};if(ee.readyState>=2){console.log("Video already ready, readyState:",ee.readyState),qe(),le();return}ee.addEventListener("loadeddata",Ke),ee.addEventListener("canplay",dt),ee.addEventListener("error",We)}),q=async()=>{var ee,le,he,Je;console.log("attachMediaStreams called:",{hasLocalVideoRef:!!L.value,hasRemoteVideoRef:!!Q.value,hasLocalStream:!!N,hasRemoteStream:!!X,isConnected:i.value.isConnected,isOutgoing:n.isOutgoing,isScreenSharing:i.value.isScreenSharing});try{if(N&&L.value){const Ke=L.value,dt=Ke.srcObject,We=!dt||((ee=dt.getVideoTracks()[0])==null?void 0:ee.id)!==((le=N.getVideoTracks()[0])==null?void 0:le.id),qe=!dt||We;if(console.log(" Local stream check:",{needsUpdate:qe,videoTracksChanged:We,currentTrackId:(he=dt==null?void 0:dt.getVideoTracks()[0])==null?void 0:he.id,newTrackId:(Je=N.getVideoTracks()[0])==null?void 0:Je.id}),qe)if(Ke.srcObject=N,console.log(" Set/Updated local video stream",{isScreenSharing:i.value.isScreenSharing}),n.callType==="video")try{await Ke.play(),(!V.value||We)&&(await J(Ke),V.value=!0,console.log(" Local video is ready for display"))}catch(wn){console.error("Error preparing local video:",wn),V.value=!1}else V.value=!0}X&&Q.value&&!Q.value.srcObject&&(Q.value.srcObject=X,console.log(" Set remote video stream"),await Q.value.play().catch(Ke=>{console.error("Error playing remote video:",Ke)})),ue()}catch(Ke){console.error("Error in attachMediaStreams:",Ke)}},ue=()=>{i.value.isConnected&&ce.value&&W.value?(M.value=!1,console.log(" Layout: Remote video large, local video small")):ce.value&&(M.value=!0,console.log(" Layout: Local video large"))},Ce=async()=>{try{w.value=!0,console.log("Loading media devices..."),(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach(le=>le.stop()),await Y(),console.log("Media devices loaded:",{video:D.value.length,audio:P.value.length})}catch(ee){console.error("Failed to load media devices:",ee)}finally{w.value=!1}},h=async ee=>{ee&&ee!==R.value&&(console.log("Switching video device to:",ee),await B(ee)||console.error("Failed to switch video device"))},m=async ee=>{ee&&ee!==Z.value&&(console.log("Switching audio device to:",ee),await U(ee)||console.error("Failed to switch audio device"))},E=async()=>{D.value.length===0&&P.value.length===0&&await Ce()},H=()=>{S.value=!S.value,console.log("Fullscreen toggled:",S.value)},K=ee=>{ee.key==="Escape"&&S.value&&(S.value=!1,console.log("Exited fullscreen via Escape key"))};Ue(async()=>{if(await ze(),console.log("VideoCallModal mounted, subscribing to events..."),o.on("webrtc_local_stream_updated",ge),o.on("webrtc_remote_stream_updated",fe),o.on("webrtc_streams_cleared",pe),o.on("webrtc_connection_state_changed",ye),o.on("webrtc_answer_received",Te),o.on("webrtc_candidate_received",Le),o.on("webrtc_call_end_received",Ie),document.addEventListener("keydown",K),console.log("VideoCallModal subscribed to all events"),!n.isOutgoing)console.log("IncomingCallModal mounted - creating audio element"),F=new Audio("/audio/pdjyznja.mp3"),F.loop=!0,F.preload="auto",F.addEventListener("loadeddata",()=>{console.log("Ringtone audio loaded successfully")}),F.addEventListener("error",ee=>{console.error("Audio loading error:",ee),oe.value="Failed to load audio file"}),F.addEventListener("canplaythrough",()=>{console.log("Audio can play through - attempting to play"),j()}),F.readyState>=3&&(console.log("Audio already ready - attempting to play immediately"),j());else{console.log("Preparing outgoing call - getting local stream first..."),M.value=!0,E();try{await c(n.callType,n.callerId),console.log("Call prepared, waiting for video to be ready...")}catch(ee){console.error("Failed to prepare outgoing call:",ee)}}}),at(()=>{console.log("VideoCallModal unmounted - cleaning up"),_.value=!1,o.off("webrtc_local_stream_updated",ge),o.off("webrtc_remote_stream_updated",fe),o.off("webrtc_streams_cleared",pe),o.off("webrtc_connection_state_changed",ye),o.off("webrtc_answer_received",Te),o.off("webrtc_candidate_received",Le),o.off("webrtc_call_end_received",Ie),document.removeEventListener("keydown",K),C(),F&&(F.removeEventListener("loadeddata",()=>{}),F.removeEventListener("error",()=>{}),F.removeEventListener("canplaythrough",()=>{}),F=null),I()});const z=async()=>{if(_.value){console.log("Call is already being accepted, ignoring duplicate click");return}console.log("handleAccept called - stopping ringtone and accepting call"),console.log("isAccepting BEFORE:",_.value),_.value=!0,console.log("isAccepting AFTER set to true:",_.value),await ze(),console.log("DOM updated after setting isAccepting"),C();try{if(n.offer){console.log("Calling acceptCall...");try{console.log("Preparing to accept call...");const ee=await u(n.callType,n.offer,n.callerId);if(console.log("prepareAcceptCall returned:",ee),ee){if(console.log("Call prepared successfully, waiting for local stream..."),N=a(),X=l(),ce.value=!!N,W.value=!!X,console.log("Streams after prepare:",{localStream:!!N,remoteStream:!!X}),await ze(),await q(),n.callType==="video"&&N&&L.value){console.log("Waiting for local video to be ready before sending answer...");let he=0;const Je=50;for(;!V.value&&he<Je;)await new Promise(Ke=>setTimeout(Ke,100)),he++;V.value?console.log("Local video is ready, sending answer..."):console.warn("Local video not ready after timeout, sending answer anyway")}await f(n.callerId)?(console.log("Answer sent successfully, call accepted"),s("accept-call")):console.error("Failed to send answer")}else console.error("Call preparation failed, resetting isAccepting")}catch(ee){console.error("Error during call acceptance:",ee)}}else console.log("No offer provided, resetting isAccepting")}catch(ee){console.error("Error accepting call:",ee),console.log("Error occurred, isAccepting reset to:",_.value)}},ne=()=>{console.log("handleDecline called - declining call"),C(),I(),s("decline-call")},ie=()=>{console.log("handleCancelConnection called - cancelling connection"),C(),I(),s("cancel-connection")},ae=()=>{console.log("handleEndCall called - ending call"),C(),I(),s("call-ended")},se=()=>{console.log("manualPlayRingtone called"),T.value||(x.value=!1,j())};Be(()=>i.value.isConnecting,ee=>{ee&&!n.isOutgoing&&(console.log("Connection starting - stopping ringtone"),C())}),Be(()=>i.value.isConnected,ee=>{ee&&!n.isOutgoing&&(console.log("Call connected - stopping ringtone"),C())}),Be(()=>i.value.error,ee=>{ee&&(console.log("Call error - stopping ringtone"),C())});const ge=async()=>{var le;console.log(" handleLocalStreamUpdated CALLED from event bus");const ee=N;if(N=a(),ce.value=!!N,console.log(" Local stream updated:",{hadStreamBefore:!!ee,hasStreamNow:!!N,hasLocalStreamFlag:ce.value,tracks:N==null?void 0:N.getTracks().length,videoTracks:N==null?void 0:N.getVideoTracks().length,audioTracks:N==null?void 0:N.getAudioTracks().length,videoEnabled:(le=N==null?void 0:N.getVideoTracks()[0])==null?void 0:le.enabled}),await ze(),await q(),n.isOutgoing&&N&&V.value&&!A.value){console.log(" Local stream ready for outgoing call, sending offer..."),A.value=!0;try{await d(n.callType,n.callerId),console.log(" Offer sent successfully from handleLocalStreamUpdated")}catch(he){console.error(" Failed to send offer from handleLocalStreamUpdated:",he),A.value=!1}}},fe=async()=>{var le;console.log(" handleRemoteStreamUpdated CALLED from event bus");const ee=X;X=l(),W.value=!!X,console.log(" Remote stream updated:",{hadStreamBefore:!!ee,hasStreamNow:!!X,hasRemoteStreamFlag:W.value,tracks:X==null?void 0:X.getTracks().length,videoTracks:X==null?void 0:X.getVideoTracks().length,audioTracks:X==null?void 0:X.getAudioTracks().length,videoEnabled:(le=X==null?void 0:X.getVideoTracks()[0])==null?void 0:le.enabled}),await ze(),await q()},pe=async()=>{console.log("Streams cleared from event bus"),N=null,X=null,ce.value=!1,W.value=!1,V.value=!1,A.value=!1,await ze(),await q()},ye=async ee=>{console.log(" Connection state changed:",ee),ee.isConnected&&(console.log(" Connection established, updating video layout and loading devices"),await ze(),ue(),E())},Te=ee=>{console.log("Answer received from remote user:",ee.answer),p(ee.answer)},Le=ee=>{console.log("ICE candidate received from remote user:",ee.candidate),g(ee.candidate)},Ie=ee=>{console.log("Call end received from remote user:",ee),C(),I(ee.reason,!0),s("call-ended")};return Be(()=>i.value.isConnected,ee=>{ee&&(console.log("Call connected - resetting accept flag"),_.value=!1,console.log("isAccepting reset to false after connection established"))}),Be(()=>i.value.error,ee=>{ee&&(console.log("Call error detected, resetting isAccepting:",ee),_.value=!1)}),Be(re,async(ee,le)=>{console.log("shouldShowSmallVideo changed:",{shouldShow:ee,wasShowing:le}),ee&&!le&&(console.log("Small video appeared, updating layout immediately"),await ze(),ue())}),Be(V,async ee=>{if(console.log("isLocalVideoReady changed:",ee),ee&&n.isOutgoing&&N&&!A.value){console.log("Local video ready for outgoing call, sending offer..."),A.value=!0;try{await d(n.callType,n.callerId),console.log("Offer sent successfully after video ready")}catch(le){console.error("Failed to send offer after video ready:",le),A.value=!1}}}),(ee,le)=>(y(),b("div",{class:ke(["incoming-call-overlay",{"fullscreen-mode":S.value}])},[r("div",{class:ke(["incoming-call-modal",{"fullscreen-modal":S.value}])},[r("div",pp,[r("h2",gp,G(ee.callerName||"Unknown"),1),r("p",vp,[te(i).isConnecting?(y(),b(me,{key:0},[Oe(" Connecting "+G(ee.callType==="video"?"video":"voice")+" call... ",1)],64)):te(i).isConnected?(y(),b(me,{key:1},[Oe(G(ee.callType==="video"?"Video":"Voice")+" call connected! ",1)],64)):te(i).error?(y(),b(me,{key:2},[Oe(" Call error: "+G(te(i).error),1)],64)):(y(),b(me,{key:3},[Oe(G(n.isOutgoing?"Calling":"Incoming")+" "+G(ee.callType==="video"?"video":"voice")+" call... ",1)],64))]),(n.isOutgoing||te(i).isConnected)&&!S.value?(y(),b("div",hp,[w.value?(y(),b("div",mp,le[7]||(le[7]=[r("div",{class:"device-loader-small"},null,-1),r("span",null,"Loading devices...",-1)]))):(y(),b("div",wp,[ee.callType==="video"?(y(),b("div",yp,[r("select",{id:"video-device-select-normal",value:te(R),onChange:le[0]||(le[0]=he=>h(he.target.value)),disabled:te(D).length===0,class:"device-select-compact"},[le[8]||(le[8]=r("option",{value:"",disabled:""}," Select camera",-1)),(y(!0),b(me,null,De(te(D),he=>(y(),b("option",{key:he.deviceId,value:he.deviceId},G(he.label),9,_p))),128))],40,bp)])):de("",!0),r("div",Cp,[r("select",{id:"audio-device-select-normal",value:te(Z),onChange:le[1]||(le[1]=he=>m(he.target.value)),disabled:te(P).length===0,class:"device-select-compact"},[le[9]||(le[9]=r("option",{value:"",disabled:""}," Select microphone",-1)),(y(!0),b(me,null,De(te(P),he=>(y(),b("option",{key:he.deviceId,value:he.deviceId},G(he.label),9,Sp))),128))],40,kp)])]))])):de("",!0),!n.isOutgoing&&!te(i).isConnecting&&!te(i).isConnected&&!te(i).error?(y(),b("div",xp,[oe.value&&!T.value?(y(),b("div",Tp,[r("p",Ep,G(oe.value),1),r("button",{class:"play-sound-btn",onClick:se,title:"Click to play ringtone"},"  Play Ringtone ")])):T.value?(y(),b("div",Ap,le[10]||(le[10]=[r("p",{class:"audio-playing"}," Ringtone playing...",-1)]))):de("",!0)])):de("",!0)]),(n.isOutgoing||te(i).isConnected)&&S.value?(y(),b("div",Ip,[w.value?(y(),b("div",Mp,le[11]||(le[11]=[r("div",{class:"device-loader-small"},null,-1),r("span",null,"Loading devices...",-1)]))):(y(),b("div",$p,[ee.callType==="video"?(y(),b("div",Lp,[r("select",{id:"video-device-select-fullscreen",value:te(R),onChange:le[2]||(le[2]=he=>h(he.target.value)),disabled:te(D).length===0,class:"device-select-compact"},[le[12]||(le[12]=r("option",{value:"",disabled:""}," Select camera",-1)),(y(!0),b(me,null,De(te(D),he=>(y(),b("option",{key:he.deviceId,value:he.deviceId},G(he.label),9,Pp))),128))],40,Dp)])):de("",!0),r("div",Rp,[r("select",{id:"audio-device-select-fullscreen",value:te(Z),onChange:le[3]||(le[3]=he=>m(he.target.value)),disabled:te(P).length===0,class:"device-select-compact"},[le[13]||(le[13]=r("option",{value:"",disabled:""}," Select microphone",-1)),(y(!0),b(me,null,De(te(P),he=>(y(),b("option",{key:he.deviceId,value:he.deviceId},G(he.label),9,Op))),128))],40,Vp)])]))])):de("",!0),ee.callType==="video"?(y(),b("div",Np,[r("div",{class:ke(["video-wrapper",{"video-large":M.value,"video-small":!M.value&&re.value,"video-hidden":!M.value&&!re.value}])},[r("video",{ref_key:"localVideoRef",ref:L,autoplay:"",playsinline:"",muted:"",class:"video-player"},null,512),!te(N)||!te(i).isLocalVideoEnabled&&!te(i).isScreenSharing?(y(),b("div",Bp," ME ")):de("",!0),M.value?(y(),b("div",Hp,G(te(i).isScreenSharing?"Your Screen":"You"),1)):de("",!0)],2),r("div",{class:ke(["video-wrapper",{"video-large":!M.value&&W.value,"video-small":M.value&&re.value,"video-hidden":!W.value}])},[r("video",{ref_key:"remoteVideoRef",ref:Q,autoplay:"",playsinline:"",class:"video-player"},null,512),te(X)?de("",!0):(y(),b("div",Fp,G(ee.callerName?ee.callerName.substring(0,2).toUpperCase():"U"),1)),!M.value&&W.value?(y(),b("div",Up,G(ee.callerName||"Caller"),1)):de("",!0)],2)])):de("",!0),te(i).isConnecting?(y(),b("div",jp,le[14]||(le[14]=[r("div",{class:"connection-loader"},null,-1),r("p",null,"Establishing connection...",-1)]))):te(i).isConnected?(y(),b("div",zp,le[15]||(le[15]=[r("div",{class:"connection-success"},"",-1),r("p",null,"Call connected successfully!",-1)]))):te(i).error?(y(),b("div",Wp,[le[16]||(le[16]=r("div",{class:"connection-error"},"",-1)),r("p",null,G(te(i).error),1)])):de("",!0),r("div",Kp,[te(i).isConnecting?(y(),b("button",{key:0,class:"call-button cancel",onClick:ie,title:"Cancel connection"},le[17]||(le[17]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"currentColor"})],-1),r("span",null,"Cancel",-1)]))):te(i).isConnected?(y(),b(me,{key:2},[ee.callType==="video"&&W.value?(y(),b("button",{key:0,class:"call-button control",onClick:H,title:S.value?"Exit fullscreen":"Enter fullscreen"},[(y(),b("svg",Xp,[S.value?(y(),b("path",tg)):(y(),b("path",eg))])),r("span",null,G(S.value?"Exit":"Fullscreen"),1)],8,Qp)):de("",!0),ee.callType==="video"&&!te(i).isScreenSharing?(y(),b("button",{key:1,class:ke(["call-button control",{disabled:!te(i).isLocalVideoEnabled}]),onClick:le[4]||(le[4]=(...he)=>te(k)&&te(k)(...he)),title:te(i).isLocalVideoEnabled?"Turn off camera":"Turn on camera"},[(y(),b("svg",sg,[te(i).isLocalVideoEnabled?(y(),b("path",og)):(y(),b("path",rg))])),r("span",null,G(te(i).isLocalVideoEnabled?"Camera":"Camera Off"),1)],10,ng)):de("",!0),ee.callType==="video"?(y(),b("button",{key:2,class:ke(["call-button control",{active:te(i).isScreenSharing}]),onClick:le[5]||(le[5]=(...he)=>te($)&&te($)(...he)),title:te(i).isScreenSharing?"Stop screen sharing":"Share screen"},[(y(),b("svg",ag,[te(i).isScreenSharing?(y(),b("path",cg)):(y(),b("path",lg))])),r("span",null,G(te(i).isScreenSharing?"Stop Share":"Share"),1)],10,ig)):de("",!0),r("button",{class:ke(["call-button control",{disabled:!te(i).isLocalAudioEnabled}]),onClick:le[6]||(le[6]=(...he)=>te(v)&&te(v)(...he)),title:te(i).isLocalAudioEnabled?"Mute microphone":"Unmute microphone"},[(y(),b("svg",dg,[te(i).isLocalAudioEnabled?(y(),b("path",fg)):(y(),b("path",pg))])),r("span",null,G(te(i).isLocalAudioEnabled?"Mute":"Unmute"),1)],10,ug),r("button",{class:"call-button decline",onClick:ae,title:"End call"},le[21]||(le[21]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z",fill:"currentColor"})],-1),r("span",null,"End Call",-1)]))],64)):(y(),b(me,{key:1},[n.isOutgoing?(y(),b("button",{key:0,class:"call-button decline",onClick:ne,title:"End call"},le[18]||(le[18]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z",fill:"currentColor"})],-1),r("span",null,"End Call",-1)]))):(y(),b(me,{key:1},[r("button",{class:"call-button decline",onClick:ne,title:"Decline call"},le[19]||(le[19]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z",fill:"currentColor"})],-1),r("span",null,"Decline",-1)])),r("button",{class:ke(["call-button accept",{accepting:_.value}]),onClick:z,title:"Accept call",disabled:_.value},[_.value?(y(),b("div",qp)):de("",!0),_.value?de("",!0):(y(),b("svg",Yp,le[20]||(le[20]=[r("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z",fill:"currentColor"},null,-1)]))),_.value?(y(),b("span",Zp,"Accepting...")):(y(),b("span",Jp,"Accept"))],10,Gp)],64))],64))])],2)],2))}}),$i=je(gg,[["__scopeId","data-v-41696c1d"]]),vg={class:"app-container"},hg={key:0,class:"loader-container"},mg={key:1,class:"theme-toggle"},wg=Ne({__name:"App",setup(e){const t=ut(),n=Dn(),s=Ht(),o=O(!0),i=gs(),a=ps(),l=gr(),c=_t(),{websocketClose:d,websocketOpen:u}=dr(),f=async()=>{console.error("onReauthorize"),d(),s.clearUser(),t.push("/")},p=()=>{console.log("destroyWebsocketBase"),d()},g=i.windowWidth,k=F=>{console.log("WebRTC ICE candidate event:",F),be.ws("main/webrtc_ice_candidate",{candidate:F.candidate,targetUserId:F.targetUserId})},v=F=>{console.log("WebRTC call answer event:",F),be.ws("main/webrtc_call_answer",{answer:F.answer,targetUserId:F.targetUserId})},$=F=>{var oe,T;console.log("WebRTC call offer event:",F),be.ws("main/webrtc_call_offer",{targetUserId:F.targetUserId,callType:F.callType,offer:F.offer,callerId:(oe=s.user)==null?void 0:oe.id,callerName:(T=s.user)==null?void 0:T.name})},I=F=>{var oe,T;console.log("WebRTC call end event:",F),be.ws("main/webrtc_call_end",{targetUserId:F.targetUserId,reason:F.reason||"call_ended",callerId:(oe=s.user)==null?void 0:oe.id,callerName:(T=s.user)==null?void 0:T.name})},D=Se(()=>!((n.name==="Chat"||n.name==="UserAccount")&&g<=1400)),P=Se(()=>n.meta.title||""),R=Se(()=>n.meta.backPath||""),Z=Se(()=>n.meta.backLabel||"Back");Ue(async()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",F=>{i.setDarkMode(F.matches)}),a.resetContacts(),l.resetMessages(),await Y(),o.value=!1,c.on("init_app",Y),c.on("unauthorized",f),c.on("destroy_websocket_base",p),c.on("webrtc_ice_candidate",k),c.on("webrtc_call_answer",v),c.on("webrtc_call_offer",$),c.on("webrtc_call_end",I),c.on("webrtc_start_call",ce)}),ds(()=>{c.off("init_app",Y),c.off("unauthorized",f),c.off("webrtc_ice_candidate",k),c.off("webrtc_call_answer",v),c.off("webrtc_call_offer",$),c.off("webrtc_call_end",I),c.off("webrtc_start_call",ce),c.off("destroy_websocket_base",p)});const Y=async()=>{try{const{data:F,error:oe}=await be.http("GET","/api/main/init");if(console.log(F),oe)return console.error("Error in initialization:",oe),null;F&&F.status==="ok"&&F.user&&F.wsUrl?(s.setUser(F.user),n.name!=="JoinChat"&&t.push({name:"Chat"}),console.log("Data in initialization:"),u(F.wsUrl)):F&&F.status==="unauthorized"&&n.name!=="JoinChat"&&(s.setUser(null),t.push({name:"Login"}))}catch(F){console.error("Error in initialization:",F)}},B=()=>{i.setDarkMode(!i.darkMode)},U=()=>{console.log("Call accepted, VideoCallModal will handle WebRTC connection"),i.incomingCall.callerId&&be.ws("main/accept_call",{callerId:i.incomingCall.callerId,callType:i.incomingCall.callType,callerName:i.incomingCall.callerName})},N=()=>{var F,oe;console.log("Call declined:",i.incomingCall),i.incomingCall.callerId&&be.ws("main/webrtc_call_end",{targetUserId:i.incomingCall.callerId,reason:"call_declined",callerId:(F=s.user)==null?void 0:F.id,callerName:(oe=s.user)==null?void 0:oe.name}),i.clearIncomingCall()},X=()=>{var F,oe;console.log("Connection cancelled:",i.incomingCall),i.incomingCall.callerId&&be.ws("main/webrtc_call_end",{targetUserId:i.incomingCall.callerId,reason:"connection_cancelled",callerId:(F=s.user)==null?void 0:F.id,callerName:(oe=s.user)==null?void 0:oe.name}),i.clearIncomingCall()},ce=async F=>{const{callType:oe,targetUserId:T}=F;console.log("Starting outgoing call:",{callType:oe,targetUserId:T});try{const x=a.getContactById(String(T)),L=(x==null?void 0:x.name)||"Unknown";i.setOutgoingCall({targetUserId:T,targetName:L,callType:oe}),console.log("Outgoing call initiated, VideoCallModal will prepare media and send offer when ready")}catch(x){console.error("Failed to start call:",x),i.setOutgoingCallError("Failed to start call")}},W=()=>{var F,oe;console.log("Ending outgoing call"),i.outgoingCall.targetUserId&&be.ws("main/webrtc_call_end",{targetUserId:i.outgoingCall.targetUserId,reason:"call_ended_by_caller",callerId:(F=s.user)==null?void 0:F.id,callerName:(oe=s.user)==null?void 0:oe.name}),i.clearOutgoingCall()};return(F,oe)=>{const T=ir("router-view");return y(),b("div",vg,[o.value?(y(),b("div",hg,oe[0]||(oe[0]=[r("div",{class:"loader"},null,-1),r("p",null,"Loading...",-1)]))):(y(),b(me,{key:1},[te(s).user?(y(),ot(dp,{key:0,title:P.value,"back-path":R.value,"back-label":Z.value},null,8,["title","back-path","back-label"])):de("",!0),D.value?(y(),b("div",mg,[r("button",{onClick:B},G(te(i).darkMode?"":""),1)])):de("",!0),xe(T)],64)),te(i).incomingCall.isActive?(y(),ot($i,{key:2,"caller-name":te(i).incomingCall.callerName,"caller-id":te(i).incomingCall.callerId,"call-type":te(i).incomingCall.callType,offer:te(i).incomingCall.offer,onAcceptCall:U,onDeclineCall:N,onCancelConnection:X,onCallEnded:N},null,8,["caller-name","caller-id","call-type","offer"])):de("",!0),te(i).outgoingCall.isActive?(y(),ot($i,{key:3,"caller-name":te(i).outgoingCall.targetName,"caller-id":te(i).outgoingCall.targetUserId,"call-type":te(i).outgoingCall.callType,"is-outgoing":!0,onDeclineCall:W,onCancelConnection:W,onCallEnded:W},null,8,["caller-name","caller-id","call-type"])):de("",!0)])}}}),yg=["title"],bg={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},_g={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",class:"recording-icon"},Cg={key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",class:"processing-icon"},kg=Ne({__name:"VoiceInput",emits:["text-recognized"],setup(e,{emit:t}){const n=t,s=O(!1),o=O(!1),i=O(!1),a=O(!1);let l=null;const c=O("ru-RU");Ue(()=>{const $=localStorage.getItem("speechRecognitionLang");$&&(c.value=$)});const d=()=>"SpeechRecognition"in window||"webkitSpeechRecognition"in window,u=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia||(await navigator.mediaDevices.enumerateDevices()).filter(D=>D.kind==="audioinput").length===0)return!1;try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(P=>P.stop()),!0}catch(D){return console.error("Microphone access error:",D),!1}}catch($){return console.error("Error checking microphone availability:",$),!1}},f=async()=>{if(!d()){i.value=!0;return}if(!await u()){a.value=!0;return}const I=window.SpeechRecognition||window.webkitSpeechRecognition;l=new I,l.lang=c.value,l.continuous=!1,l.interimResults=!1,l.maxAlternatives=1,l.onstart=()=>{s.value=!0,console.log("Speech recognition started")},l.onresult=D=>{const P=D.results[0][0].transcript;console.log("Recognized text:",P),o.value=!0,n("text-recognized",P),p()},l.onerror=D=>{console.error("Speech recognition error:",D.error),D.error==="no-speech"?alert("No speech detected. Please try again."):D.error==="not-allowed"?alert("Microphone access denied. Please allow microphone access in your browser settings."):alert(`Speech recognition error: ${D.error}`),p()},l.onend=()=>{s.value=!1,o.value=!1,console.log("Speech recognition ended")};try{l.start()}catch(D){console.error("Failed to start speech recognition:",D),alert("Failed to start speech recognition. Please try again."),s.value=!1}},p=()=>{l&&(l.stop(),l=null),s.value=!1,o.value=!1},g=()=>{s.value?p():f()},k=()=>{i.value=!1},v=()=>{a.value=!1};return at(()=>{l&&l.stop()}),($,I)=>(y(),b(me,null,[r("button",{class:ke(["voice-input-button",{recording:s.value,processing:o.value}]),onClick:g,title:s.value?"Click to stop recording":"Click to start voice input"},[!s.value&&!o.value?(y(),b("svg",bg,I[2]||(I[2]=[r("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"},null,-1),r("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"},null,-1)]))):s.value?(y(),b("svg",_g,I[3]||(I[3]=[r("rect",{x:"6",y:"6",width:"12",height:"12",rx:"1"},null,-1)]))):(y(),b("svg",Cg,I[4]||(I[4]=[r("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"},null,-1)])))],10,yg),(y(),ot(Tr,{to:"body"},[xe(Ur,{name:"modal"},{default:hn(()=>[i.value?(y(),b("div",{key:0,class:"modal-overlay",onClick:k},[r("div",{class:"modal-content",onClick:I[0]||(I[0]=ct(()=>{},["stop"]))},[r("div",{class:"modal-header"},[I[6]||(I[6]=r("h3",null,"Speech Recognition Not Supported",-1)),r("button",{class:"close-button",onClick:k},I[5]||(I[5]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),I[7]||(I[7]=r("div",{class:"modal-body"},[r("div",{class:"icon-container"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"64",height:"64",fill:"currentColor",class:"warning-icon"},[r("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),r("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})])]),r("p",{class:"modal-message"}," Speech recognition is not supported in your current browser. "),r("p",{class:"modal-submessage"}," To use voice input functionality, please use one of the following browsers: "),r("div",{class:"browser-list"},[r("div",{class:"browser-item"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32"},[r("circle",{cx:"12",cy:"12",r:"10",fill:"#4285F4"}),r("circle",{cx:"12",cy:"12",r:"7",fill:"#fff"}),r("circle",{cx:"12",cy:"12",r:"4",fill:"#4285F4"})]),r("span",null,"Google Chrome")]),r("div",{class:"browser-item"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32"},[r("circle",{cx:"12",cy:"12",r:"10",fill:"#0078D4"}),r("path",{d:"M12 6 L18 12 L12 18 L6 12 Z",fill:"#fff"})]),r("span",null,"Microsoft Edge")]),r("div",{class:"browser-item"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32"},[r("circle",{cx:"12",cy:"12",r:"10",fill:"#006CFF"}),r("path",{d:"M12 4 Q16 8 16 12 Q16 16 12 20 Q8 16 8 12 Q8 8 12 4",fill:"#fff"})]),r("span",null,"Safari")])])],-1)),r("div",{class:"modal-footer"},[r("button",{class:"modal-button primary",onClick:k}," Got it ")])])])):de("",!0)]),_:1})])),(y(),ot(Tr,{to:"body"},[xe(Ur,{name:"modal"},{default:hn(()=>[a.value?(y(),b("div",{key:0,class:"modal-overlay",onClick:v},[r("div",{class:"modal-content",onClick:I[1]||(I[1]=ct(()=>{},["stop"]))},[r("div",{class:"modal-header"},[I[9]||(I[9]=r("h3",null,"Microphone Not Available",-1)),r("button",{class:"close-button",onClick:v},I[8]||(I[8]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),I[10]||(I[10]=r("div",{class:"modal-body"},[r("div",{class:"icon-container"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"64",height:"64",fill:"currentColor",class:"error-icon"},[r("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),r("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"}),r("path",{d:"M2 2 L22 22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])]),r("p",{class:"modal-message"},"No microphone detected or access denied"),r("p",{class:"modal-submessage"}," Please check the following to use voice input: "),r("div",{class:"steps-list"},[r("div",{class:"step-item"},[r("div",{class:"step-number"},"1"),r("div",{class:"step-content"},[r("div",{class:"step-title"},"Connect a Microphone"),r("div",{class:"step-description"}," Make sure a microphone is connected to your device ")])]),r("div",{class:"step-item"},[r("div",{class:"step-number"},"2"),r("div",{class:"step-content"},[r("div",{class:"step-title"},"Grant Permission"),r("div",{class:"step-description"}," Allow microphone access when prompted by your browser ")])]),r("div",{class:"step-item"},[r("div",{class:"step-number"},"3"),r("div",{class:"step-content"},[r("div",{class:"step-title"},"Check Browser Settings"),r("div",{class:"step-description"}," Verify that microphone permissions are enabled in your browser settings ")])])])],-1)),r("div",{class:"modal-footer"},[r("button",{class:"modal-button primary",onClick:v}," Got it ")])])])):de("",!0)]),_:1})]))],64))}}),ht=je(kg,[["__scopeId","data-v-56fef35f"]]),Sg={class:"modal login-modal"},xg={class:"modal-content"},Tg={key:0,class:"error-message form-error"},Eg={class:"form-group"},Ag={class:"input-wrapper"},Ig={key:0,class:"error-message"},Mg={class:"form-group"},$g={class:"input-wrapper"},Lg={key:0,class:"error-message"},Dg={class:"form-options"},Pg={class:"checkbox-container"},Rg=["disabled"],Vg={key:0},Og={key:1},Ng={class:"auth-switch"},Bg={class:"modal register-modal"},Hg={class:"modal-content"},Fg={key:0,class:"error-message form-error"},Ug={class:"form-group"},jg={class:"input-wrapper-with-voice"},zg={class:"input-wrapper"},Wg={key:0,class:"error-message"},Kg={class:"form-group"},Gg={class:"input-wrapper"},qg={key:0,class:"error-message"},Yg={class:"form-group"},Jg={class:"input-wrapper"},Zg={key:0,class:"error-message"},Qg={class:"form-group"},Xg={class:"input-wrapper"},ev={key:0,class:"error-message"},tv={class:"form-group terms-agreement"},nv={class:"checkbox-container"},sv={key:0,class:"error-message"},ov=["disabled"],rv={key:0},iv={key:1},av={class:"auth-switch"},lv=Ne({__name:"AuthModals",props:{showLogin:{type:Boolean,default:!1},showRegister:{type:Boolean,default:!1},token:{type:String,default:""}},emits:["close","show-login","show-register","auth-success"],setup(e,{emit:t}){const n=ut(),s=Ht(),o=_t(),i=e,a=t,l=O(""),c=O(""),d=O(""),u=O(""),f=O(!1),p=O(!1),g=O(!1),k=O(""),v=O(""),$=O(""),I=O(""),D=O(""),P=O(""),R=O(!1),Z=O(!1),Y=()=>{a("close")},B=()=>{a("close"),g.value=!1},U=()=>{a("show-register")},N=()=>{g.value=!1,a("show-login")},X=oe=>{d.value=d.value?d.value+" "+oe:oe},ce=async()=>{if(k.value="",v.value="",D.value="",!!W()){R.value=!0;try{const{data:T,error:x}=await be.http("POST","/api/auth/login",{email:l.value,password:c.value,token:i.token});x?D.value=x.message||"Authorization error":T&&T.status==="success"&&T.user?(s.setUser(T.user),a("close"),a("auth-success"),console.log("user",s.user),n.push({name:"Chat"}),o.emit("init_app")):D.value=(T==null?void 0:T.message)||"Authorization error"}catch(T){console.error(T),D.value="Server error. Please try again later."}finally{R.value=!1}}},W=()=>{let oe=!0;return l.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value)||(k.value="Enter a valid email",oe=!1):(k.value="Email is required",oe=!1),c.value?c.value.length<8&&(v.value="Password must be at least 8 characters long",oe=!1):(v.value="Password is required",oe=!1),oe},F=async()=>{$.value="",k.value="",v.value="",P.value="",I.value="",g.value=!1;let oe=!0;if(d.value.trim()||($.value="Name is required",oe=!1),oe=W(),c.value!==u.value&&(I.value="Passwords do not match",oe=!1),p.value||(g.value=!0,oe=!1),!!oe){Z.value=!0;try{const{data:T,error:x}=await be.http("POST","/api/auth/register",{name:d.value,email:l.value,password:c.value,token:i.token});x?x.code===422?(console.log(T),P.value=x.message):P.value=x.message||"Server error. Please try again later.":T&&T.status==="success"&&T.user?(s.setUser(T.user),a("close"),a("auth-success"),n.push({name:"Chat"}),o.emit("init_app")):T&&T.status==="error"?P.value=(T==null?void 0:T.message)||"Registration error":P.value="Server error. Please try again later."}catch(T){console.error(T),P.value="Server error. Please try again later."}finally{Z.value=!1}}};return(oe,T)=>{const x=ir("router-link");return y(),b(me,null,[r("div",{class:ke(["modal-overlay",{show:i.showLogin}])},[r("div",Sg,[r("div",{class:"modal-header"},[T[9]||(T[9]=r("h3",null,"Sign In",-1)),r("button",{class:"close-modal",onClick:Y,"aria-label":"Close modal"},T[8]||(T[8]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),r("div",xg,[D.value?(y(),b("div",Tg,G(D.value),1)):de("",!0),r("div",Eg,[T[11]||(T[11]=r("label",{for:"login-email"},"Email",-1)),r("div",Ag,[T[10]||(T[10]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",class:"input-icon"},[r("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1)),we(r("input",{type:"email",id:"login-email","onUpdate:modelValue":T[0]||(T[0]=L=>l.value=L),placeholder:"yourname@example.com",autocomplete:"email",class:ke({"has-error":k.value})},null,2),[[Ae,l.value]])]),k.value?(y(),b("div",Ig,G(k.value),1)):de("",!0)]),r("div",Mg,[T[13]||(T[13]=r("label",{for:"login-password"},"Password",-1)),r("div",$g,[T[12]||(T[12]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",class:"input-icon"},[r("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})],-1)),we(r("input",{type:"password",id:"login-password","onUpdate:modelValue":T[1]||(T[1]=L=>c.value=L),placeholder:"Your password",autocomplete:"current-password",class:ke({"has-error":v.value})},null,2),[[Ae,c.value]])]),v.value?(y(),b("div",Lg,G(v.value),1)):de("",!0)]),r("div",Dg,[r("label",Pg,[we(r("input",{type:"checkbox","onUpdate:modelValue":T[2]||(T[2]=L=>f.value=L)},null,512),[[pn,f.value]]),T[14]||(T[14]=r("span",{class:"checkmark"},null,-1)),T[15]||(T[15]=Oe(" Remember me "))]),T[16]||(T[16]=r("a",{href:"#",class:"forgot-password"},"Forgot password?",-1))]),r("button",{class:"auth-button",onClick:ce,disabled:R.value},[R.value?(y(),b("span",Vg,"Signing In...")):(y(),b("span",Og,"Sign In"))],8,Rg),r("p",Ng,[T[17]||(T[17]=Oe(" Don't have an account? ")),r("a",{href:"#",onClick:ct(U,["prevent"])},"Register")])])])],2),r("div",{class:ke(["modal-overlay",{show:i.showRegister}])},[r("div",Bg,[r("div",{class:"modal-header"},[T[19]||(T[19]=r("h3",null,"Create Account",-1)),r("button",{class:"close-modal",onClick:B,"aria-label":"Close modal"},T[18]||(T[18]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),r("div",Hg,[P.value?(y(),b("div",Fg,G(P.value),1)):de("",!0),r("div",Ug,[T[21]||(T[21]=r("label",{for:"register-name"},"Full Name",-1)),r("div",jg,[r("div",zg,[T[20]||(T[20]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",class:"input-icon"},[r("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})],-1)),we(r("input",{type:"text",id:"register-name","onUpdate:modelValue":T[3]||(T[3]=L=>d.value=L),placeholder:"John Smith",autocomplete:"name",class:ke({"has-error":$.value})},null,2),[[Ae,d.value]])]),xe(ht,{onTextRecognized:X})]),$.value?(y(),b("div",Wg,G($.value),1)):de("",!0)]),r("div",Kg,[T[23]||(T[23]=r("label",{for:"register-email"},"Email",-1)),r("div",Gg,[T[22]||(T[22]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",class:"input-icon"},[r("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})],-1)),we(r("input",{type:"email",id:"register-email","onUpdate:modelValue":T[4]||(T[4]=L=>l.value=L),placeholder:"yourname@example.com",autocomplete:"email",class:ke({"has-error":k.value})},null,2),[[Ae,l.value]])]),k.value?(y(),b("div",qg,G(k.value),1)):de("",!0)]),r("div",Yg,[T[25]||(T[25]=r("label",{for:"register-password"},"Password",-1)),r("div",Jg,[T[24]||(T[24]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",class:"input-icon"},[r("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})],-1)),we(r("input",{type:"password",id:"register-password","onUpdate:modelValue":T[5]||(T[5]=L=>c.value=L),placeholder:"Min. 8 characters",autocomplete:"new-password",class:ke({"has-error":v.value})},null,2),[[Ae,c.value]])]),v.value?(y(),b("div",Zg,G(v.value),1)):de("",!0)]),r("div",Qg,[T[27]||(T[27]=r("label",{for:"register-confirm-password"},"Confirm Password",-1)),r("div",Xg,[T[26]||(T[26]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",class:"input-icon"},[r("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})],-1)),we(r("input",{type:"password",id:"register-confirm-password","onUpdate:modelValue":T[6]||(T[6]=L=>u.value=L),placeholder:"Confirm your password",autocomplete:"new-password",class:ke({"has-error":I.value})},null,2),[[Ae,u.value]])]),I.value?(y(),b("div",ev,G(I.value),1)):de("",!0)]),r("div",tv,[r("label",nv,[we(r("input",{type:"checkbox","onUpdate:modelValue":T[7]||(T[7]=L=>p.value=L)},null,512),[[pn,p.value]]),T[29]||(T[29]=r("span",{class:"checkmark"},null,-1)),T[30]||(T[30]=Oe(" I agree with the ")),xe(x,{to:"/manifesto",class:"manifesto-link",target:"_blank"},{default:hn(()=>T[28]||(T[28]=[Oe("Manifesto")])),_:1}),T[31]||(T[31]=Oe(" of a free social network "))]),g.value?(y(),b("p",sv," You must agree with the Manifesto to create an account ")):de("",!0)]),r("button",{class:"auth-button",onClick:F,disabled:Z.value},[Z.value?(y(),b("span",rv,"Creating Account...")):(y(),b("span",iv,"Create Account"))],8,ov),r("p",av,[T[32]||(T[32]=Oe(" Already have an account? ")),r("a",{href:"#",onClick:ct(N,["prevent"])},"Sign In")])])])],2)],64)}}}),_l=je(lv,[["__scopeId","data-v-a723d1d2"]]),cv={class:"login-page"},uv={key:0,class:"auth-container auth-container-desktop"},dv={class:"manifesto-link-container"},fv={key:1,class:"auth-container auth-container-mobile"},pv={class:"manifesto-link-container"},gv=Ne({__name:"Login",setup(e){const t=gs(),n=O(!1),s=O(!1),o=O("Easy Task Manager"),i=O(!1),a=()=>{n.value=!0,s.value=!1},l=()=>{n.value=!1,s.value=!0},c=()=>{n.value=!1,s.value=!1},d=()=>{t.isPWAMode&&(n.value=!0)};return Be(()=>t.isPWAMode,()=>{d()},{immediate:!0}),Ue(()=>{const u="Easy Task Manager";let f=0;o.value=" ";const p=()=>{f<u.length?(o.value+=u.charAt(f),f++,setTimeout(p,150)):(i.value=!0,d())};setTimeout(p,1e3)}),(u,f)=>{const p=ir("router-link");return y(),b("div",cv,[te(t).isMobile?(y(),b("div",fv,[f[4]||(f[4]=r("div",{class:"welcome-message"},[r("h1",null,"Welcome to Easy Task Manager"),r("p",null,"Manage your tasks and projects with ease")],-1)),r("div",{class:"auth-buttons"},[r("button",{class:"auth-button",onClick:a},"Sign In"),r("button",{class:"auth-button register",onClick:l}," Create Account ")]),r("div",pv,[xe(p,{to:"/manifesto",class:"manifesto-link"},{default:hn(()=>f[3]||(f[3]=[Oe("Read our Manifesto")])),_:1})])])):(y(),b("div",uv,[r("div",{class:ke(["logo",{"typing-complete":i.value}])},[Oe(G(o.value),1),f[0]||(f[0]=r("span",{class:"cursor"},null,-1))],2),f[2]||(f[2]=kn('<div class="welcome-message" data-v-1dc6e0ed><h1 data-v-1dc6e0ed>Welcome to Chat</h1><p data-v-1dc6e0ed>Collaborate on tasks and projects with your team</p></div><div class="features" data-v-1dc6e0ed><div class="feature-item" data-v-1dc6e0ed><div class="feature-icon" data-v-1dc6e0ed><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" data-v-1dc6e0ed><path d="M20,2H4A2,2,0,0,0,2,4V22l4-4H20a2,2,0,0,0,2-2V4A2,2,0,0,0,20,2Z" fill="currentColor" data-v-1dc6e0ed></path></svg></div><div class="feature-text" data-v-1dc6e0ed><h3 data-v-1dc6e0ed>Real-time Messaging</h3><p data-v-1dc6e0ed>Chat with your contacts instantly with fast message delivery</p></div></div><div class="feature-item" data-v-1dc6e0ed><div class="feature-icon" data-v-1dc6e0ed><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" data-v-1dc6e0ed><path d="M21,7,12,2,3,7V17L12,22l9-5Z" fill="currentColor" data-v-1dc6e0ed></path></svg></div><div class="feature-text" data-v-1dc6e0ed><h3 data-v-1dc6e0ed>Modern Design</h3><p data-v-1dc6e0ed>Enjoy a clean and intuitive interface designed for comfort</p></div></div><div class="feature-item" data-v-1dc6e0ed><div class="feature-icon" data-v-1dc6e0ed><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" data-v-1dc6e0ed><path d="M18,8A6,6,0,0,0,6,8c0,7-3,9-3,9H21S18,15,18,8Z" fill="currentColor" data-v-1dc6e0ed></path><path d="M13.73,21a2,2,0,0,1-3.46,0" fill="currentColor" data-v-1dc6e0ed></path></svg></div><div class="feature-text" data-v-1dc6e0ed><h3 data-v-1dc6e0ed>Notifications</h3><p data-v-1dc6e0ed>Never miss a message with our notification system</p></div></div></div>',2)),r("div",{class:"auth-buttons"},[r("button",{class:"auth-button",onClick:a},"Sign In"),r("button",{class:"auth-button register",onClick:l}," Create Account ")]),r("div",dv,[xe(p,{to:"/manifesto",class:"manifesto-link"},{default:hn(()=>f[1]||(f[1]=[Oe("Read our Manifesto")])),_:1})])])),n.value||s.value?(y(),ot(_l,{key:2,"show-login":n.value,"show-register":s.value,onClose:c,onShowLogin:a,onShowRegister:l},null,8,["show-login","show-register"])):de("",!0)])}}}),vv=je(gv,[["__scopeId","data-v-1dc6e0ed"]]),hv={key:0,class:"loader-overlay"},mv=Ne({__name:"LoaderOverlay",props:{show:{type:Boolean,default:!1}},setup(e){const t=e;return(n,s)=>t.show?(y(),b("div",hv,s[0]||(s[0]=[r("div",{class:"loader"},[r("div"),r("div"),r("div")],-1)]))):de("",!0)}}),vr=je(mv,[["__scopeId","data-v-5b75b68c"]]),wv={class:"contacts-list"},yv={class:"contacts-header"},bv={class:"search-container"},_v={class:"icons-wrapper"},Cv={class:"contacts-list-container"},kv=["onClick","onContextmenu"],Sv={class:"contact-avatar"},xv={class:"avatar"},Tv={class:"contact-details"},Ev={class:"contact-header"},Av={class:"contact-name"},Iv={class:"message-time"},Mv={class:"contact-message"},$v={class:"last-message"},Lv={key:0,class:"unread-count"},Dv={key:1,class:"no-results"},Pv={key:2,class:"no-results"},Rv={key:0,class:"edit-mode"},Vv={key:1,class:"menu-items"},Ov={class:"modal-header"},Nv={class:"modal-form"},Bv={class:"form-group"},Hv={class:"form-group"},Fv={class:"share-link-container"},Uv={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},jv={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zv={class:"form-actions"},Wv=["disabled"],Kv={key:0},Gv={key:1},qv=Ne({__name:"ContactsList",emits:["toggle-contacts","toggle-news","select-contact","toggle-calendar","toggle-task"],setup(e,{expose:t,emit:n}){const s=ps(),o=Ht(),i=ut(),a=Dn(),l=O(""),c=O(!1),d=O(3),u=O(!1),f=O({name:"",lastMessage:"",lastMessageTime:"",isOnline:!1,unreadCount:0,isActive:!1}),p=O(""),g=O(!1),k=O(!1),v=n,$=O(null),I=O(!1),D=O({show:!1,x:0,y:0,isEditing:!1,contact:null,editName:""}),P=M=>{console.log("handleContactClick"),a.name!=="Chat"&&a.name!=="JoinChat"&&i.push("/chat"),v("select-contact",M)},R=()=>{c.value=!c.value,c.value&&(d.value=0),v("toggle-news",c.value),v("toggle-contacts")},Z=Se(()=>{let M=s.contacts;return M=M.sort((_,V)=>new Date(V.lastMessageAt||"").getTime()-new Date(_.lastMessageAt||"").getTime()),l.value&&(M=M.filter(_=>_.name.toLowerCase().includes(l.value.toLowerCase()))),M}),Y=M=>M.split(" ").map(_=>_[0]).join("").toUpperCase(),B=(M,_)=>{M.preventDefault(),D.value={show:!0,x:M.clientX,y:M.clientY,contact:_,isEditing:!1,editName:""}},U=()=>{D.value.show=!1,D.value.isEditing=!1,D.value.contact=null,D.value.editName=""},N=()=>{D.value.isEditing=!0,setTimeout(()=>{var M,_;(M=$.value)==null||M.focus(),(_=$.value)==null||_.select()},0)},X=()=>{D.value.contact&&D.value.editName.trim()&&(s.updateContact({name:D.value.editName}),U())},ce=()=>{U()},W=()=>{D.value.contact&&(s.deleteContact(D.value.contact.id),U())},F=async()=>{var M;k.value=!0;try{const{error:_,data:V}=await be.http("POST","/api/chat/invitations",{name:f.value.name,userId:(M=o.user)==null?void 0:M.id});_?console.error("Failed to generate share link: ",_):V&&V.status==="success"&&V.token&&(p.value=`${window.location.origin}/join-chat/${V.token}`)}catch(_){console.error("Failed to generate share link: ",_)}finally{k.value=!1}},oe=async()=>{try{await navigator.clipboard.writeText(p.value),g.value=!0,setTimeout(()=>{g.value=!1},2e3)}catch(M){console.error("Failed to copy text: ",M)}};t({openAddContactModal:()=>{u.value=!0}}),Ue(()=>{document.addEventListener("click",U)}),at(()=>{document.removeEventListener("click",U)});const T=()=>{I.value=!I.value,I.value&&setTimeout(()=>{const M=document.querySelector(".search-input");M&&M.focus()},100)},x=()=>{l.value||(I.value=!1)},L=()=>{v("toggle-calendar"),v("toggle-contacts")},Q=()=>{v("toggle-task"),v("toggle-contacts")};return(M,_)=>(y(),b("div",wv,[r("div",yv,[r("button",{class:"close-contacts",onClick:_[0]||(_[0]=V=>v("toggle-contacts"))},_[12]||(_[12]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})],-1)])),_[13]||(_[13]=r("h2",null,"Contacts",-1))]),r("div",bv,[r("div",_v,[r("button",{class:"icon-button calendar-icon",onClick:L},_[14]||(_[14]=[kn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" data-v-9216d7b3><rect x="3" y="4" width="18" height="18" rx="3" ry="3" fill="white" stroke="#DDD" stroke-width="1" data-v-9216d7b3></rect><rect x="3" y="4" width="18" height="5" rx="3" ry="3" fill="#FF3B30" data-v-9216d7b3></rect><rect x="3" y="7" width="18" height="2" fill="#FF3B30" data-v-9216d7b3></rect><rect x="7" y="1" width="1.5" height="4" rx="0.75" fill="#CCC" data-v-9216d7b3></rect><rect x="15.5" y="1" width="1.5" height="4" rx="0.75" fill="#CCC" data-v-9216d7b3></rect><rect x="6.5" y="2" width="2.5" height="0.8" rx="0.4" fill="white" data-v-9216d7b3></rect><rect x="15" y="2" width="2.5" height="0.8" rx="0.4" fill="white" data-v-9216d7b3></rect><text x="12" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#333" data-v-9216d7b3> 24 </text><circle cx="6" cy="12" r="0.8" fill="#DDD" data-v-9216d7b3></circle><circle cx="9" cy="12" r="0.8" fill="#DDD" data-v-9216d7b3></circle><circle cx="12" cy="12" r="0.8" fill="#FF3B30" data-v-9216d7b3></circle><circle cx="15" cy="12" r="0.8" fill="#DDD" data-v-9216d7b3></circle><circle cx="18" cy="12" r="0.8" fill="#DDD" data-v-9216d7b3></circle></svg>',1)])),r("button",{class:"icon-button task-icon",onClick:Q},_[15]||(_[15]=[kn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" data-v-9216d7b3><rect x="3" y="2" width="18" height="20" rx="2" ry="2" fill="#E8F5E8" stroke="#4CAF50" stroke-width="1" data-v-9216d7b3></rect><rect x="3" y="2" width="18" height="4" rx="2" ry="2" fill="#4CAF50" data-v-9216d7b3></rect><circle cx="6" cy="4" r="0.5" fill="white" data-v-9216d7b3></circle><circle cx="8" cy="4" r="0.5" fill="white" data-v-9216d7b3></circle><circle cx="10" cy="4" r="0.5" fill="white" data-v-9216d7b3></circle><rect x="5" y="8" width="2" height="2" rx="0.3" fill="#4CAF50" data-v-9216d7b3></rect><path d="M5.4 9L6 9.6L7.6 8" stroke="white" stroke-width="0.3" fill="none" data-v-9216d7b3></path><line x1="8.5" y1="9" x2="16" y2="9" stroke="#4CAF50" stroke-width="0.8" data-v-9216d7b3></line><rect x="5" y="11.5" width="2" height="2" rx="0.3" fill="#4CAF50" data-v-9216d7b3></rect><path d="M5.4 12.5L6 13.1L7.6 11.5" stroke="white" stroke-width="0.3" fill="none" data-v-9216d7b3></path><line x1="8.5" y1="12.5" x2="14" y2="12.5" stroke="#4CAF50" stroke-width="0.8" data-v-9216d7b3></line><rect x="5" y="15" width="2" height="2" rx="0.3" fill="white" stroke="#DDD" stroke-width="0.5" data-v-9216d7b3></rect><line x1="8.5" y1="16" x2="18" y2="16" stroke="#BBB" stroke-width="0.8" data-v-9216d7b3></line><rect x="5" y="18.5" width="2" height="2" rx="0.3" fill="white" stroke="#DDD" stroke-width="0.5" data-v-9216d7b3></rect><line x1="8.5" y1="19.5" x2="15" y2="19.5" stroke="#BBB" stroke-width="0.8" data-v-9216d7b3></line></svg>',1)])),r("button",{class:"icon-button notes-icon",onClick:R},_[16]||(_[16]=[kn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" data-v-9216d7b3><rect x="3" y="2" width="18" height="20" rx="3" ry="3" fill="#FFC107" data-v-9216d7b3></rect><rect x="3" y="8" width="18" height="14" rx="0" ry="0" fill="white" data-v-9216d7b3></rect><line x1="5" y1="11" x2="19" y2="11" stroke="#E0E0E0" stroke-width="1" data-v-9216d7b3></line><line x1="5" y1="14" x2="19" y2="14" stroke="#E0E0E0" stroke-width="1" data-v-9216d7b3></line><line x1="5" y1="17" x2="19" y2="17" stroke="#E0E0E0" stroke-width="1" data-v-9216d7b3></line><line x1="5" y1="20" x2="19" y2="20" stroke="#E0E0E0" stroke-width="1" data-v-9216d7b3></line><line x1="6.5" y1="8" x2="6.5" y2="22" stroke="#FF5252" stroke-width="1" data-v-9216d7b3></line></svg>',1)])),r("button",{class:"icon-button add-contact-button",onClick:_[1]||(_[1]=V=>u.value=!0)},_[17]||(_[17]=[kn('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" data-v-9216d7b3><rect x="2" y="4" width="20" height="16" rx="3" ry="3" fill="#F8F9FA" stroke="#E0E0E0" stroke-width="1" data-v-9216d7b3></rect><circle cx="8" cy="10" r="2.5" fill="#007AFF" data-v-9216d7b3></circle><path d="M6.5 9.2C6.5 8.5 7 8 7.5 8S8.5 8.5 8.5 9.2C8.5 9.9 8 10.4 7.5 10.4S6.5 9.9 6.5 9.2Z" fill="white" data-v-9216d7b3></path><path d="M5.5 12.5C5.5 11.7 6.3 11 7.5 11S9.5 11.7 9.5 12.5V13H5.5V12.5Z" fill="white" data-v-9216d7b3></path><rect x="12" y="8" width="6" height="1" rx="0.5" fill="#DDD" data-v-9216d7b3></rect><rect x="12" y="10.5" width="8" height="1" rx="0.5" fill="#DDD" data-v-9216d7b3></rect><rect x="12" y="13" width="4" height="1" rx="0.5" fill="#DDD" data-v-9216d7b3></rect><circle cx="17.7" cy="6.7" r="4" fill="rgba(0,0,0,0.15)" data-v-9216d7b3></circle><circle cx="17.5" cy="6.5" r="4" fill="#28A745" stroke="white" stroke-width="2.5" data-v-9216d7b3></circle><line x1="17.5" y1="3.5" x2="17.5" y2="9.5" stroke="#000" stroke-width="4" stroke-linecap="round" data-v-9216d7b3></line><line x1="14.5" y1="6.5" x2="20.5" y2="6.5" stroke="#000" stroke-width="4" stroke-linecap="round" data-v-9216d7b3></line><line x1="17.5" y1="3.5" x2="17.5" y2="9.5" stroke="white" stroke-width="2.5" stroke-linecap="round" data-v-9216d7b3></line><line x1="14.5" y1="6.5" x2="20.5" y2="6.5" stroke="white" stroke-width="2.5" stroke-linecap="round" data-v-9216d7b3></line></svg>',1)])),r("button",{class:"icon-button search-toggle-button",onClick:T},_[18]||(_[18]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})],-1)]))]),r("div",{class:ke(["search-input-wrapper",{active:I.value}])},[we(r("input",{"onUpdate:modelValue":_[2]||(_[2]=V=>l.value=V),type:"text",class:"search-input",placeholder:"Search contacts",onBlur:x},null,544),[[Ae,l.value]]),r("button",{class:"close-search-button",onClick:_[3]||(_[3]=V=>I.value=!1)},_[19]||(_[19]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})],-1)]))],2)]),r("div",Cv,[xe(vr,{show:te(s).isLoading},null,8,["show"]),te(s).isLoading?de("",!0):(y(),ot(Ku,{key:0,name:"contact-list",tag:"div"},{default:hn(()=>[(y(!0),b(me,null,De(Z.value,V=>(y(),b("div",{key:V.id,class:ke(["contact",{active:V.isActive}]),onClick:A=>P(V),onContextmenu:A=>B(A,V)},[r("div",Sv,[r("div",xv,G(Y(V.name)),1),r("div",{class:ke(["status-indicator",{online:V.isOnline}])},null,2)]),r("div",Tv,[r("div",Ev,[r("span",Av,G(V.name),1),r("span",Iv,G(V.lastMessageTime),1)]),r("div",Mv,[r("p",$v,G(V.lastMessage),1),V.unreadCount?(y(),b("span",Lv,G(V.unreadCount),1)):de("",!0)])])],42,kv))),128))]),_:1})),Z.value.length===0&&!te(s).isLoading&&!l.value?(y(),b("div",Dv," No contacts yet. Add your first contact! ")):de("",!0),Z.value.length===0&&!te(s).isLoading&&l.value?(y(),b("div",Pv,' No contacts found for "'+G(l.value)+'" ',1)):de("",!0)]),D.value.show?(y(),b("div",{key:0,class:"context-menu",style:Ze({left:D.value.x+"px",top:D.value.y+"px"}),onClick:_[5]||(_[5]=ct(()=>{},["stop"]))},[D.value.isEditing?(y(),b("div",Rv,[we(r("input",{"onUpdate:modelValue":_[4]||(_[4]=V=>D.value.editName=V),type:"text",class:"edit-input",onKeyup:[wt(X,["enter"]),wt(ce,["esc"])],ref_key:"editInput",ref:$},null,544),[[Ae,D.value.editName]]),r("div",{class:"edit-actions"},[r("button",{onClick:X,class:"edit-button save"},"Save"),r("button",{onClick:ce,class:"edit-button cancel"},"Cancel")])])):(y(),b("div",Vv,[r("button",{onClick:ct(N,["stop"]),class:"menu-item"},_[20]||(_[20]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.05C21.1 6.66 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.34 2.9 16.95 3.29L15.66 4.58L19.42 8.34L20.71 7.05Z",fill:"currentColor"})],-1),Oe(" Edit ")])),r("button",{onClick:ct(W,["stop"]),class:"menu-item delete"},_[21]||(_[21]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})],-1),Oe(" Delete ")]))]))],4)):de("",!0),u.value?(y(),b("div",{key:1,class:"modal-overlay",onClick:_[11]||(_[11]=V=>u.value=!1)},[r("div",{class:"modal-content",onClick:_[10]||(_[10]=ct(()=>{},["stop"]))},[r("div",Ov,[_[23]||(_[23]=r("h3",null,"Add New Contact",-1)),r("button",{class:"close-modal-button",onClick:_[6]||(_[6]=V=>u.value=!1)},_[22]||(_[22]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})],-1)]))]),r("div",Nv,[r("div",Bv,[_[24]||(_[24]=r("label",{for:"contactName"},"Name",-1)),we(r("input",{id:"contactName","onUpdate:modelValue":_[7]||(_[7]=V=>f.value.name=V),type:"text",class:"form-input",placeholder:"Enter contact name",onKeyup:wt(F,["enter"])},null,544),[[Ae,f.value.name]])]),r("div",Hv,[_[27]||(_[27]=r("label",null,"Share Link",-1)),r("div",Fv,[we(r("input",{"onUpdate:modelValue":_[8]||(_[8]=V=>p.value=V),type:"text",class:"form-input share-link-input",readonly:"",placeholder:"Click Generate to create link"},null,512),[[Ae,p.value]]),r("button",{class:ke(["copy-button",{success:g.value}]),onClick:oe},[g.value?(y(),b("svg",jv,_[26]||(_[26]=[r("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z",fill:"currentColor"},null,-1)]))):(y(),b("svg",Uv,_[25]||(_[25]=[r("path",{d:"M16 1H4C3 1 2 2 2 3V17H4V3H16V1ZM19 5H8C7 5 6 6 6 7V21C6 22 7 23 8 23H19C20 23 21 22 21 21V7C21 6 20 5 19 5ZM19 21H8V7H19V21Z",fill:"currentColor"},null,-1)])))],2)])]),r("div",zv,[r("button",{class:"cancel-button",onClick:_[9]||(_[9]=V=>u.value=!1)}," Cancel "),r("button",{class:"save-button",onClick:F,disabled:k.value},[k.value?(y(),b("span",Kv,"Generating...")):(y(),b("span",Gv,"Generate Link"))],8,Wv)])])])])):de("",!0)]))}}),Yv=je(qv,[["__scopeId","data-v-9216d7b3"]]),Jv={key:0,class:"message-edit-mode"},Zv=["value","onKeydown"],Qv={class:"message-footer"},Xv={key:0,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},eh={key:1,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},th=Ne({__name:"MessageItem",props:{message:{},index:{},isOwner:{type:Boolean},isEditing:{type:Boolean},editText:{}},emits:["start-edit","save-edit","cancel-edit","context-menu","update:edit-text"],setup(e,{emit:t}){const n=e,s=t,o=O(null),i=f=>{n.isOwner&&s("context-menu",f,n.index,n.message.text)},a=()=>{n.isOwner&&s("start-edit",n.index,n.message.text)},l=()=>{s("save-edit")},c=()=>{s("cancel-edit")},d=f=>{f.key==="Enter"&&!f.shiftKey?l():f.key==="Escape"&&c()},u=f=>{if(f.key==="Enter"&&f.shiftKey){f.preventDefault();const g=f.target.selectionStart,k=n.editText.slice(0,g)+`
`+n.editText.slice(g);s("update:edit-text",k),ze(()=>{o.value&&o.value.setSelectionRange(g+1,g+1)})}};return Be(()=>n.isEditing,f=>{f&&ze(()=>{o.value&&(o.value.focus(),o.value.select())})},{immediate:!0}),(f,p)=>(y(),b("div",{class:ke(["message",f.message.isSent?"sent":"received",{editable:f.isOwner},{"with-calendar":!!f.message.calendarId,"with-task":!!f.message.taskId}]),onContextmenu:ct(i,["prevent"]),onDblclick:a},[f.isEditing?(y(),b("div",Jv,[r("textarea",{value:f.editText,onInput:p[0]||(p[0]=g=>s("update:edit-text",g.target.value)),class:"message-edit-input",onKeyup:d,onKeydown:wt(ct(u,["shift","exact","prevent"]),["enter"]),ref_key:"editTextarea",ref:o},null,40,Zv),r("div",{class:"message-edit-actions"},[r("button",{onClick:l,class:"message-edit-button save"},p[1]||(p[1]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19L21 7l-1.41-1.41L9 16.17z",fill:"currentColor"})],-1)])),r("button",{onClick:c,class:"message-edit-button cancel"},p[2]||(p[2]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})],-1)]))])])):(y(),b(me,{key:1},[Oe(G(f.message.text)+" ",1),r("div",Qv,[r("span",null,G(f.message.time),1),f.message.isSent?(y(),b("span",{key:0,class:ke(["message-status",f.message.isRead?"read":"delivered"])},[f.message.isRead?(y(),b("svg",Xv,p[3]||(p[3]=[r("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},null,-1),r("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",transform:"translate(8 0)"},null,-1)]))):(y(),b("svg",eh,p[4]||(p[4]=[r("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},null,-1)])))],2)):de("",!0)])],64))],34))}}),nh=je(th,[["__scopeId","data-v-8ef03652"]]),sh={class:"chat-header"},oh={class:"contact-info"},rh=["title"],ih={class:"messages-container"},ah={key:0,class:"date-divider"},lh={key:1,class:"no-contact-placeholder"},ch={class:"placeholder-content"},uh={class:"placeholder-actions"},dh={key:0,class:"typing-indicator"},fh={class:"input-area"},ph=["disabled"],gh=["placeholder","disabled"],vh=["disabled"],hh={key:0,class:"edit-mode"},mh={key:1,class:"menu-items"},wh=Ne({__name:"ChatArea",props:{isTyping:{type:Boolean,default:!1},notificationsEnabled:{type:Boolean,default:!0},isSendingMessage:{type:Boolean,default:!1}},emits:["send-message","toggle-contacts","event-typing","toggle-notifications","open-add-contact"],setup(e,{expose:t,emit:n}){const s=Ht(),o=ps(),i=_t(),a=e,l=n,c=gr();ut();const d=O(""),u=O(null),f=O(null),p=O("100%"),{selectedContact:g}=fd(o),k=Q=>{var M;return Q.sender_id&&((M=s.user)!=null&&M.id)?Q.sender_id===s.user.id:Q.isSent===!0},v=O({show:!1,x:0,y:0,messageIndex:-1,isEditing:!1,editText:""}),$=O({index:-1,text:""}),I=()=>{var w;if(typeof window>"u")return;const Q=window.visualViewport;let M;Q?M=Q.height:M=window.innerHeight,/iPad|iPhone|iPod/.test(navigator.userAgent)&&/Safari/.test(navigator.userAgent)&&Q&&console.log("iOS Safari detected, viewport height:",Q.height);const V=M;if(window.innerWidth<=768){p.value=`${V}px`;return}if((w=f.value)!=null&&w.parentElement){const S=f.value.parentElement.clientHeight;if(S>0&&S<V){p.value=`${S}px`;return}}p.value=`${V}px`},D=()=>{if(u.value){const Q=u.value;Q.scrollTop=Q.scrollHeight}};t({scrollToBottom:D});const P=async()=>{const Q=d.value.trim();Q&&(console.log("sendMessage",Q),l("send-message",Q),d.value="",setTimeout(D,100))};let R=!1;const Z=()=>{R||(R=!0,l("event-typing"),setTimeout(()=>{R=!1},2500))},Y=async()=>{if(!g.value){console.error("No contact selected for video call");return}console.log("Starting video call with:",g.value.contactId),i.emit("webrtc_start_call",{targetUserId:g.value.contactId,callType:"video"})},B=(Q,M,_)=>{Q.preventDefault();const V=c.messages[M];k(V)&&(v.value={show:!0,x:Q.clientX,y:Q.clientY,messageIndex:M,isEditing:!1,editText:_})},U=()=>{v.value.show=!1,v.value.messageIndex=-1},N=()=>{const Q=v.value.messageIndex,M=v.value.editText;U(),oe(Q,M)},X=async()=>{var M;const Q=v.value.editText.trim();if(v.value.messageIndex!==-1&&Q){if(Q.length>1e4){console.error("   ( 10000 )");return}const _=c.messages[v.value.messageIndex];if(_.id)try{if(!((M=s.user)!=null&&M.id)){console.error("User ID  ");return}const{data:V,error:A}=await bo.updateMessage(_.id,Q,s.user.id);if(A||!V||!V.message||V.status!=="ok"){console.error("   :",A==null?void 0:A.message),v.value.isEditing=!1;return}const w=V!=null&&V.message?{id:V.message.id,sender_id:V.message.sender_id,receiver_id:V.message.receiver_id,text:V.message.content,createdAt:V.message.updated_at}:void 0;c.updateMessage(v.value.messageIndex,Q,w)}catch(V){console.error("    :",V);return}v.value.isEditing=!1}},ce=()=>{v.value.isEditing=!1,v.value.editText=""},W=async()=>{if(v.value.messageIndex!==-1){const Q=c.messages[v.value.messageIndex];if(!k(Q)){console.error("   "),U();return}if(Q.id)try{const{error:M}=await bo.deleteMessage(Q.id);if(M){console.error("   :",M.message);return}c.deleteMessage(v.value.messageIndex)}catch(M){console.error("    :",M);return}else c.deleteMessage(v.value.messageIndex);U()}},F=()=>{if(v.value.messageIndex!==-1){const Q=c.messages[v.value.messageIndex];console.log("Creating task from message:",Q.text),U()}},oe=(Q,M)=>{const _=c.messages[Q];k(_)&&($.value={index:Q,text:M})},T=async()=>{var M;const Q=$.value.text.trim();if($.value.index!==-1&&Q){if(Q.length>1e4){console.error("   ( 10000 )");return}const _=c.messages[$.value.index];if(_.id)try{if(!((M=s.user)!=null&&M.id)){console.error("User ID  ");return}const{data:V,error:A}=await bo.updateMessage(_.id,Q,s.user.id);if(A){console.error("   :",A.message);return}const w=V!=null&&V.message?{id:V.message.id,sender_id:V.message.sender_id,receiver_id:V.message.receiver_id,text:V.message.content,createdAt:V.message.updated_at}:void 0;c.updateMessage($.value.index,Q,w)}catch(V){console.error("    :",V);return}else c.updateMessage($.value.index,Q);$.value.index=-1,$.value.text=""}},x=()=>{$.value.index=-1,$.value.text=""},L=Q=>{d.value=d.value?d.value+" "+Q:Q};return Ue(()=>{ze(()=>{I(),window.addEventListener("resize",I),window.visualViewport&&(window.visualViewport.addEventListener("resize",I),window.visualViewport.addEventListener("scroll",I))}),document.addEventListener("click",U)}),at(()=>{window.removeEventListener("resize",I),window.visualViewport&&(window.visualViewport.removeEventListener("resize",I),window.visualViewport.removeEventListener("scroll",I)),document.removeEventListener("click",U)}),(Q,M)=>{var _;return y(),b("div",{class:"chat-area",ref_key:"chatAreaRef",ref:f,style:Ze({height:p.value})},[r("div",sh,[r("button",{class:"toggle-contacts",onClick:M[0]||(M[0]=V=>Q.$emit("toggle-contacts"))},M[6]||(M[6]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z",fill:"currentColor"})],-1)])),r("div",oh,[r("h2",null,G(te(g)?te(g).name:"Not selected!"),1),te(g)?(y(),b("div",{key:0,class:ke(["online-indicator",{online:te(g).isOnline,offline:!te(g).isOnline}]),title:te(g).isOnline?"Online":"Offline"},null,10,rh)):de("",!0)]),M[7]||(M[7]=r("div",{class:"header-buttons"},null,-1))]),r("div",ih,[xe(vr,{show:te(c).isLoading},null,8,["show"]),te(g)&&!te(c).isLoading?(y(),b("div",{key:0,class:"messages",ref_key:"messageContainerRef",ref:u},[(y(!0),b(me,null,De(te(c).messages,(V,A)=>(y(),b(me,{key:A},[V.date?(y(),b("div",ah,[r("span",null,G(V.date),1)])):de("",!0),xe(nh,{message:V,index:A,"is-owner":k(V),"is-editing":$.value.index===A,"edit-text":$.value.text,onStartEdit:oe,onSaveEdit:T,onCancelEdit:x,onContextMenu:B,"onUpdate:editText":M[1]||(M[1]=w=>$.value.text=w)},null,8,["message","index","is-owner","is-editing","edit-text"])],64))),128))],512)):!te(g)&&!te(c).isLoading?(y(),b("div",lh,[r("div",ch,[M[8]||(M[8]=r("div",{class:"placeholder-title"},"Select a contact to start chatting",-1)),M[9]||(M[9]=r("div",{class:"placeholder-subtitle"}," Or add a new contact to start a conversation ",-1)),r("div",uh,[r("button",{class:"placeholder-button primary mobile-only",onClick:M[2]||(M[2]=V=>Q.$emit("toggle-contacts"))}," Open contacts "),r("button",{class:"placeholder-button",onClick:M[3]||(M[3]=V=>Q.$emit("open-add-contact"))}," Add contact ")])])])):de("",!0)]),e.isTyping&&te(g)?(y(),b("div",dh,[r("span",null,G(te(g).name)+" is typing",1),M[10]||(M[10]=r("div",{class:"typing-dots"},[r("div",{class:"typing-dot"}),r("div",{class:"typing-dot"}),r("div",{class:"typing-dot"})],-1))])):de("",!0),r("div",fh,[r("button",{class:"video-call-button",title:"Start video call",onClick:Y,disabled:!((_=te(g))!=null&&_.isOnline)},M[11]||(M[11]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})],-1)]),8,ph),we(r("input",{"onUpdate:modelValue":M[4]||(M[4]=V=>d.value=V),type:"text",class:"message-input",placeholder:te(g)?"Type a message...":"Select a contact to send a message",onKeyup:wt(P,["enter"]),onKeypress:Z,disabled:!te(g)},null,40,gh),[[Ae,d.value]]),!d.value.trim()&&te(g)?(y(),ot(ht,{key:0,onTextRecognized:L})):(y(),b("button",{key:1,class:"send-button",onClick:P,disabled:!d.value.trim()||!te(g)||a.isSendingMessage},M[12]||(M[12]=[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z",fill:"currentColor"})],-1)]),8,vh))]),v.value.show?(y(),b("div",{key:1,class:"context-menu",style:Ze({left:v.value.x+"px",top:v.value.y+"px"})},[v.value.isEditing?(y(),b("div",hh,[we(r("input",{"onUpdate:modelValue":M[5]||(M[5]=V=>v.value.editText=V),type:"text",class:"edit-input",onKeyup:[wt(X,["enter"]),wt(ce,["esc"])]},null,544),[[Ae,v.value.editText]]),r("div",{class:"edit-actions"},[r("button",{onClick:X,class:"edit-button save"},"Save"),r("button",{onClick:ce,class:"edit-button cancel"},"Cancel")])])):(y(),b("div",mh,[r("button",{onClick:N,class:"menu-item"},M[13]||(M[13]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M3 17.25V21H6.75L17.81 9.94L14.06 6.19L3 17.25ZM20.71 7.05C21.1 6.66 21.1 6.02 20.71 5.63L18.37 3.29C17.98 2.9 17.34 2.9 16.95 3.29L15.66 4.58L19.42 8.34L20.71 7.05Z",fill:"currentColor"})],-1),Oe(" Edit ")])),r("button",{onClick:F,class:"menu-item"},M[14]||(M[14]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19L21 7l-1.41-1.41L9 16.17z",fill:"currentColor"}),r("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z",fill:"currentColor"})],-1),Oe(" Task ")])),r("button",{onClick:W,class:"menu-item delete"},M[15]||(M[15]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})],-1),Oe(" Delete ")]))]))],4)):de("",!0)],4)}}}),yh=je(wh,[["__scopeId","data-v-efc98bd1"]]),bh={class:"calendar-container"},_h={class:"calendar-header"},Ch={class:"calendar-view"},kh={class:"month-navigation"},Sh={class:"weekdays"},xh={class:"calendar-grid"},Th=["onClick"],Eh={key:0,class:"event-indicator"},Ah={class:"date-details"},Ih={class:"date-details-header"},Mh={key:0,class:"events-count"},$h={key:1,class:"events-count"},Lh={class:"hour-label"},Dh={class:"hour-content"},Ph={class:"event-time"},Rh={class:"event-title"},Vh={class:"event-description"},Oh=["onClick"],Nh={class:"modal-header"},Bh={class:"modal-body"},Hh={class:"form-group"},Fh={class:"input-with-voice"},Uh={class:"form-group"},jh={class:"input-with-voice"},zh={class:"form-row"},Wh={class:"form-group half"},Kh={class:"form-group half"},Gh={class:"form-actions"},qh=Ne({name:"CalendarComponent",__name:"Calendar",emits:["toggle-contacts","back-to-chat"],setup(e,{emit:t}){const n=O(new Date),s=O(new Date),o=O(null),i=O([]),a=O([]),l=O({title:"",description:"",startTime:"09:00",endTime:"10:00"}),c=O(!1),d=t,u=["January","February","March","April","May","June","July","August","September","October","November","December"],f=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],p=Se(()=>n.value.getMonth()),g=Se(()=>n.value.getFullYear()),k=Se(()=>`${u[p.value]} ${g.value}`),v=Se(()=>{const M=new Date(g.value,p.value,1),_=new Date(g.value,p.value+1,0);let V=M.getDay();V=V===0?6:V-1;const A=[],w=new Date(g.value,p.value,0).getDate();for(let re=V-1;re>=0;re--)A.push({date:new Date(g.value,p.value-1,w-re),isCurrentMonth:!1,hasEvent:I(new Date(g.value,p.value-1,w-re))});for(let re=1;re<=_.getDate();re++){const j=new Date(g.value,p.value,re);A.push({date:j,isCurrentMonth:!0,isToday:$(j),hasEvent:I(j)})}const S=7-(A.length%7||7);if(S<7)for(let re=1;re<=S;re++)A.push({date:new Date(g.value,p.value+1,re),isCurrentMonth:!1,hasEvent:I(new Date(g.value,p.value+1,re))});return A});function $(M){const _=new Date;return M.getDate()===_.getDate()&&M.getMonth()===_.getMonth()&&M.getFullYear()===_.getFullYear()}function I(M){return a.value.some(_=>_.date.getDate()===M.getDate()&&_.date.getMonth()===M.getMonth()&&_.date.getFullYear()===M.getFullYear())}const D=Se(()=>s.value?a.value.filter(M=>M.date.getDate()===s.value.getDate()&&M.date.getMonth()===s.value.getMonth()&&M.date.getFullYear()===s.value.getFullYear()):[]);function P(){n.value=new Date(g.value,p.value-1,1)}function R(){n.value=new Date(g.value,p.value+1,1)}function Z(M){s.value=new Date(M)}Be(s,async()=>{await ze();const M=o.value;M&&M.scrollTo({top:0,behavior:"auto"})}),Be(D,async M=>{if(!M||M.length===0)return;let _=null,V=null;for(const S of M){if(!S.startTime)continue;const[re,j]=S.startTime.split(":"),C=parseInt(re),J=parseInt(j||"0");(_===null||C<_||C===_&&J<(V||0))&&(_=C,V=J)}if(_===null)return;await ze();const A=o.value,w=i.value[_];A&&w&&A.scrollTo({top:w.offsetTop,behavior:"smooth"})},{immediate:!0});const Y=M=>{l.value.title=l.value.title?l.value.title+" "+M:M},B=M=>{l.value.description=l.value.description?l.value.description+" "+M:M};function U(){c.value=!0,l.value={title:"",description:"",startTime:"09:00",endTime:"10:00"}}function N(){s.value&&l.value.title.trim()&&(a.value.push({date:new Date(s.value),title:l.value.title,description:l.value.description,startTime:l.value.startTime,endTime:l.value.endTime}),ce(),c.value=!1,l.value={title:"",description:"",startTime:"09:00",endTime:"10:00"})}function X(M){a.value.splice(M,1),ce()}function ce(){const M=a.value.map(_=>({date:_.date.toISOString(),title:_.title,description:_.description,startTime:_.startTime,endTime:_.endTime}));localStorage.setItem("calendar_events",JSON.stringify(M))}function W(){const M=localStorage.getItem("calendar_events");if(M)try{const _=JSON.parse(M);a.value=_.map(V=>({date:new Date(V.date),title:V.title,description:V.description,startTime:V.startTime||"09:00",endTime:V.endTime||"10:00"}))}catch(_){console.error("Error loading calendar events:",_)}}Ue(()=>{if(W(),a.value.length===0){const M=new Date,_=new Date;_.setDate(M.getDate()+1);const V=new Date;V.setDate(M.getDate()+7),a.value=[{date:M,title:"Team Meeting",description:"Discussing new app features and sprint planning",startTime:"10:00",endTime:"11:30"},{date:M,title:"Lunch",description:"Business lunch with partners",startTime:"13:00",endTime:"14:00"},{date:_,title:"Client Call",description:"Prototype presentation and requirements discussion",startTime:"15:00",endTime:"16:00"},{date:V,title:"Project Deadline",description:"Final version of the application must be delivered",startTime:"18:00",endTime:"19:00"}],ce()}});function F(M){const _=M.getDate().toString().padStart(2,"0"),V=(M.getMonth()+1).toString().padStart(2,"0"),A=M.getFullYear();return`${_}-${V}-${A}`}const oe=Se(()=>{const M=[];for(let _=0;_<24;_++)M.push(`${_.toString().padStart(2,"0")}:00`);return M});function T(M){return s.value?D.value.filter(_=>{if(!_.startTime)return!1;const V=parseInt(_.startTime.split(":")[0]),A=parseInt(M.split(":")[0]);return V===A}):[]}function x(M){if(!M)return"";const[_,V]=M.split(":"),A=parseInt(_);return A===0?`12:${V} AM`:A<12?`${A}:${V} AM`:A===12?`12:${V} PM`:`${A-12}:${V} PM`}function L(M){if(!M.startTime||!M.endTime)return 1;const[_,V]=M.startTime.split(":").map(Number),[A,w]=M.endTime.split(":").map(Number),S=_*60+V,re=A*60+w;return Math.ceil((re-S)/60)}function Q(M){const _=["#4285F4","#EA4335","#FBBC05","#34A853","#FF6D01","#46BDC6","#7C4DFF","#795548"];return _[M%_.length]}return(M,_)=>(y(),b("div",bh,[r("div",_h,[r("button",{class:"back-button",onClick:_[0]||(_[0]=V=>d("toggle-contacts"))},_[9]||(_[9]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),_[10]||(_[10]=r("h2",null,"Calendar",-1)),_[11]||(_[11]=r("div",{class:"header-buttons"},null,-1))]),r("div",Ch,[r("div",kh,[r("button",{onClick:P,class:"nav-button"},_[12]||(_[12]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",fill:"currentColor"})],-1)])),r("h3",null,G(k.value),1),r("button",{onClick:R,class:"nav-button"},_[13]||(_[13]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",fill:"currentColor"})],-1)]))]),r("div",Sh,[(y(),b(me,null,De(f,V=>r("div",{class:"weekday",key:V},G(V),1)),64))]),r("div",xh,[(y(!0),b(me,null,De(v.value,(V,A)=>(y(),b("div",{key:A,class:ke(["day",{"other-month":!V.isCurrentMonth,today:V.isToday,"has-event":V.hasEvent}]),onClick:w=>Z(V.date)},[Oe(G(V.date.getDate())+" ",1),V.hasEvent?(y(),b("div",Eh)):de("",!0)],10,Th))),128))])]),r("div",Ah,[r("div",Ih,[r("h3",null,[Oe(G(s.value?F(s.value):"")+" ",1),D.value.length>0?(y(),b("span",Mh," Events: "+G(D.value.length),1)):(y(),b("span",$h," No events for selected date "))]),r("button",{onClick:U,class:"add-event-button"},_[14]||(_[14]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"})],-1),r("span",null,"Add",-1)]))]),r("div",{class:"day-timeline",ref_key:"dayTimelineRef",ref:o},[(y(!0),b(me,null,De(oe.value,(V,A)=>(y(),b("div",{key:V,class:"hour-block",ref_for:!0,ref:w=>i.value[A]=w},[r("div",Lh,G(V),1),r("div",Dh,[(y(!0),b(me,null,De(T(V),(w,S)=>(y(),b("div",{key:S,class:"timeline-event",style:Ze({height:`${L(w)*60}px`,backgroundColor:Q(S)})},[r("div",Ph,G(x(w.startTime))+" - "+G(x(w.endTime)),1),r("div",Rh,G(w.title),1),r("div",Vh,G(w.description),1),r("button",{onClick:re=>X(a.value.indexOf(w)),class:"delete-timeline-event"},_[15]||(_[15]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})],-1)]),8,Oh)],4))),128))])]))),128))],512)]),c.value?(y(),b("div",{key:0,class:"modal-overlay",onClick:_[8]||(_[8]=V=>c.value=!1)},[r("div",{class:"modal-content",onClick:_[7]||(_[7]=ct(()=>{},["stop"]))},[r("div",Nh,[_[17]||(_[17]=r("h3",null,"Add Event",-1)),r("button",{class:"close-modal",onClick:_[1]||(_[1]=V=>c.value=!1)},_[16]||(_[16]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})],-1)]))]),r("div",Bh,[r("div",Hh,[_[18]||(_[18]=r("label",{for:"event-title"},"Title",-1)),r("div",Fh,[we(r("input",{id:"event-title","onUpdate:modelValue":_[2]||(_[2]=V=>l.value.title=V),type:"text",placeholder:"Enter event title"},null,512),[[Ae,l.value.title]]),xe(ht,{onTextRecognized:Y})])]),r("div",Uh,[_[19]||(_[19]=r("label",{for:"event-description"},"Description",-1)),r("div",jh,[we(r("textarea",{id:"event-description","onUpdate:modelValue":_[3]||(_[3]=V=>l.value.description=V),placeholder:"Enter event description"},null,512),[[Ae,l.value.description]]),xe(ht,{onTextRecognized:B})])]),r("div",zh,[r("div",Wh,[_[20]||(_[20]=r("label",{for:"event-start-time"},"Start Time",-1)),we(r("input",{id:"event-start-time","onUpdate:modelValue":_[4]||(_[4]=V=>l.value.startTime=V),type:"time"},null,512),[[Ae,l.value.startTime]])]),r("div",Kh,[_[21]||(_[21]=r("label",{for:"event-end-time"},"End Time",-1)),we(r("input",{id:"event-end-time","onUpdate:modelValue":_[5]||(_[5]=V=>l.value.endTime=V),type:"time"},null,512),[[Ae,l.value.endTime]])])]),r("div",Gh,[r("button",{onClick:_[6]||(_[6]=V=>c.value=!1),class:"cancel-button"}," Cancel "),r("button",{onClick:N,class:"save-button"},"Save")])])])])):de("",!0)]))}}),Yh=je(qh,[["__scopeId","data-v-1b725993"]]),$t=e=>{const t={...e};return["dueDate","startDate","createdAt","updatedAt"].forEach(s=>{t[s]&&typeof t[s]=="string"&&(t[s]=new Date(t[s]))}),t.user_id&&(t.userId=String(t.user_id),delete t.user_id),t.project_id!==void 0&&(t.projectId=t.project_id?String(t.project_id):null,delete t.project_id),t.is_completed!==void 0&&(t.isCompleted=!!t.is_completed,delete t.is_completed),t.due_date!==void 0&&(t.dueDate=t.due_date?new Date(t.due_date):null,delete t.due_date),t.start_date!==void 0&&(t.startDate=t.start_date?new Date(t.start_date):null,delete t.start_date),t.estimated_hours!==void 0&&(t.estimatedHours=t.estimated_hours?Number(t.estimated_hours):null,delete t.estimated_hours),t.actual_hours!==void 0&&(t.actualHours=t.actual_hours?Number(t.actual_hours):null,delete t.actual_hours),t.parent_task_id!==void 0&&(t.parentTaskId=t.parent_task_id?String(t.parent_task_id):null,delete t.parent_task_id),t.created_at&&(t.createdAt=new Date(t.created_at),delete t.created_at),t.updated_at&&(t.updatedAt=new Date(t.updated_at),delete t.updated_at),t.id&&(t.id=String(t.id)),t},On={async getTasks(){try{const e=await be.http("GET","/api/tasks");return console.log("Tasks API response:",e),e.error||!e.data?(console.error("Error loading tasks:",e.error),{tasks:[],projects:[]}):e.data}catch(e){return console.error("Failed to load tasks:",e),{tasks:[],projects:[]}}},async getTask(e){try{const t=await be.http("GET",`/api/tasks/${e}`);if(t.error||!t.data)return console.error("Error loading task:",t.error),null;const n=t.data,s=(n==null?void 0:n.task)||n;return s?$t(s):null}catch(t){return console.error("Failed to load task:",t),null}},async createTask(e){try{const t=await be.http("POST","/api/tasks",e);if(t.error)throw console.error("Error creating task:",t.error),new Error(t.error.message);console.log("Raw task data from server:",t.data);const n=t.data,s=(n==null?void 0:n.task)||n;return s?$t(s):null}catch(t){throw console.error("Failed to create task:",t),t}},async updateTask(e,t){try{const n=await be.http("PUT",`/api/tasks/${e}`,t);if(n.error)throw console.error("Error updating task:",n.error),new Error(n.error.message);const s=n.data,o=(s==null?void 0:s.task)||s;return o?$t(o):null}catch(n){throw console.error("Failed to update task:",n),n}},async deleteTask(e){try{const t=await be.http("DELETE",`/api/tasks/${e}`);if(t.error)throw console.error("Error deleting task:",t.error),new Error(t.error.message);return!0}catch(t){throw console.error("Failed to delete task:",t),t}},async updateTaskStatus(e,t){try{const n=await be.http("PUT",`/api/tasks/${e}/status`,{status:t});if(n.error)throw console.error("Error updating task status:",n.error),new Error(n.error.message);const s=n.data,o=(s==null?void 0:s.task)||s;return o?$t(o):null}catch(n){throw console.error("Failed to update task status:",n),n}},async updateTaskProgress(e,t){try{const n=await be.http("PUT",`/api/tasks/${e}/progress`,{progress:t});if(n.error)throw console.error("Error updating task progress:",n.error),new Error(n.error.message);const s=n.data,o=(s==null?void 0:s.task)||s;return o?$t(o):null}catch(n){throw console.error("Failed to update task progress:",n),n}},async getTasksByProject(e){var t;try{const n=await be.http("GET",`/api/tasks/project/${e}`);return n.error||!n.data?(console.error("Error loading tasks by project:",n.error),[]):(t=n.data)!=null&&t.tasks?n.data.tasks.map(s=>$t(s)):Array.isArray(n.data)?n.data.map(s=>$t(s)):[]}catch(n){return console.error("Failed to load tasks by project:",n),[]}},async getSubTasks(e){var t;try{const n=await be.http("GET",`/api/tasks/${e}/subtasks`);return n.error||!n.data?(console.error("Error loading subtasks:",n.error),[]):(t=n.data)!=null&&t.tasks?n.data.tasks.map(s=>$t(s)):Array.isArray(n.data)?n.data.map(s=>$t(s)):[]}catch(n){return console.error("Failed to load subtasks:",n),[]}}},Nn=e=>{console.log("Transforming project:",e);const t={id:String(e.id||""),title:String(e.title||""),description:e.description?String(e.description):null,userId:String(e.userId||e.user_id||""),status:e.status||"planning",priority:e.priority||"medium",progress:Number(e.progress||0),createdAt:e.createdAt?new Date(String(e.createdAt)):new Date,updatedAt:e.updatedAt?new Date(String(e.updatedAt)):new Date,dueDate:e.dueDate?new Date(String(e.dueDate)):null,endDate:e.endDate?new Date(String(e.endDate)):null,startDate:e.startDate?new Date(String(e.startDate)):null,tags:Array.isArray(e.tags)?e.tags.map(String):null,color:e.color?String(e.color):null,isActive:e.isActive!==void 0?!!e.isActive:!0,tasks:Array.isArray(e.tasks)?e.tasks:[]};return console.log("Transformed project:",t),t},Bn={async getProjects(){var e;try{const t=await be.http("GET","/api/projects");return console.log(t),t.error||!t.data?(console.error("Error loading projects:",t.error),[]):(e=t.data)!=null&&e.projects?(console.log("Raw projects from server:",t.data.projects),t.data.projects.map(n=>Nn(n))):Array.isArray(t.data)?(console.log("Direct array of projects from server:",t.data),t.data.map(n=>Nn(n))):(console.log("No projects found in response:",t.data),[])}catch(t){return console.error("Failed to load projects:",t),[]}},async getProject(e){try{const t=await be.http("GET",`/api/projects/${e}`);if(t.error)return console.error("Error loading project:",t.error),null;const n=t.data,s=(n==null?void 0:n.project)||n;return s?Nn(s):null}catch(t){return console.error("Failed to load project:",t),null}},async createProject(e){try{const t=await be.http("POST","/api/projects/create",e);if(t.error)throw console.error("Error creating project:",t.error),new Error(t.error.message);console.log("Raw project data from server:",t.data);const n=t.data,s=(n==null?void 0:n.project)||n;return s?Nn(s):null}catch(t){throw console.error("Failed to create project:",t),t}},async updateProject(e,t){try{const n=await be.http("PUT",`/api/projects/${e}`,t);if(n.error)throw console.error("Error updating project:",n.error),new Error(n.error.message);const s=n.data,o=(s==null?void 0:s.project)||s;return o?Nn(o):null}catch(n){throw console.error("Failed to update project:",n),n}},async deleteProject(e){try{const t=await be.http("DELETE",`/api/projects/${e}`);if(t.error)throw console.error("Error deleting project:",t.error),new Error(t.error.message);return!0}catch(t){throw console.error("Failed to delete project:",t),t}}},Jh={class:"task-manager"},Zh={class:"task-header"},Qh={class:"task-content"},Xh={key:0,class:"error-message"},e1={key:1,class:"loading-overlay"},t1={key:2,class:"create-task-form"},n1={class:"form-grid"},s1={class:"form-col"},o1={class:"input-with-voice"},r1={class:"form-col"},i1={class:"input-with-voice"},a1={class:"form-row"},l1={class:"form-col"},c1=["value"],u1={class:"form-col"},d1=["value"],f1={class:"form-row"},p1={class:"form-col"},g1=["value"],v1={class:"form-col"},h1=["value"],m1={class:"form-col form-col-checkbox"},w1={class:"form-row"},y1={class:"form-col"},b1={class:"form-label"},_1={class:"form-row"},C1={class:"form-col"},k1={class:"form-col"},S1={class:"form-row"},x1={class:"form-col"},T1={class:"form-col"},E1={class:"form-col"},A1={class:"form-actions"},I1=["disabled"],M1={key:0},$1={key:1},L1={class:"tasks-list"},D1={key:0,class:"empty-state"},P1=["data-task-id"],R1={class:"task-main"},V1={class:"task-info"},O1={class:"task-title"},N1={class:"task-date"},B1={class:"task-date"},H1={class:"task-meta"},F1={key:0,class:"completed-badge"},U1={key:0,class:"task-description"},j1={key:1,class:"task-tags"},z1={class:"dates-row"},W1={class:"date-chip"},K1={class:"date-chip"},G1={class:"relations-row"},q1={key:0,class:"relation-chip"},Y1={key:1,class:"relation-chip"},J1={class:"hours-row"},Z1={key:0,class:"hour-chip"},Q1={key:1,class:"hour-chip"},X1={class:"task-progress"},em={class:"progress-circle-container"},tm={class:"progress-circle-wrapper"},nm={class:"progress-circle",viewBox:"0 0 100 100"},sm=["stroke","stroke-dashoffset"],om={class:"progress-text"},rm=["value","onInput"],im={class:"task-actions"},am=["onClick","disabled"],lm=["onClick","disabled"],cm=Ne({__name:"TaskManager",emits:["toggle-contacts"],setup(e,{emit:t}){const n=["TODO","IN_PROGRESS","ON_HOLD","COMPLETED","CANCELLED"],s=["LOW","MEDIUM","HIGH","URGENT"],o=t,i=O([]),a=O([]),l=Se(()=>i.value.filter(A=>A.id!==(g.value??""))),c=O(!1),d=O(!1),u=O(null),f=O(!1),p=O({}),g=O(null),k=O(null),v=Nt({title:"",description:"",userId:"1",projectId:null,status:"TODO",priority:"MEDIUM",progress:0,isCompleted:!1,tags:"",dueDateInput:"",startDateInput:"",estimatedHours:null,actualHours:null,parentTaskId:null}),$=A=>A?A.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",I={TODO:"#9e9e9e",IN_PROGRESS:"#4caf50",ON_HOLD:"#ff9800",COMPLETED:"#388e3c",CANCELLED:"#dc3545"},D=A=>I[A]?I[A]:"#9e9e9e",P={LOW:"#81c784",MEDIUM:"#66bb6a",HIGH:"#4caf50",URGENT:"#388e3c"},R=A=>P[A]?P[A]:"#81c784",Z=A=>A?A.split(",").map(w=>w.trim()).filter(w=>w.length>0):[],Y=Se(()=>{const A={};for(const w of a.value)A[w.id]=w.title;return A}),B=Se(()=>{const A={};for(const w of i.value)A[w.id]=w.title;return A}),U=A=>A&&Y.value[A]||null,N=A=>A&&B.value[A]||null,X=A=>{v.title=v.title?v.title+" "+A:A},ce=A=>{v.description=v.description?v.description+" "+A:A},W=async()=>{if(_.value){f.value=!0,u.value=null;try{const A=v.projectId&&v.projectId!==""?v.projectId:null,w=v.parentTaskId&&v.parentTaskId!==""?v.parentTaskId:null,S={title:v.title.trim(),description:v.description.trim()||"",userId:v.userId,projectId:A,status:v.status,priority:v.priority,progress:Number(v.progress)||0,isCompleted:!!v.isCompleted,tags:v.tags.trim()||null,dueDate:v.dueDateInput||null,startDate:v.startDateInput||null,estimatedHours:v.estimatedHours==null?null:Number(v.estimatedHours),actualHours:v.actualHours==null?null:Number(v.actualHours),parentTaskId:w};if(g.value){const re=await On.updateTask(Number(g.value),S);if(re){const j=i.value.findIndex(C=>C.id===String(g.value));j!==-1&&(i.value[j]=re)}}else{const re=await On.createTask(S);console.log("New task created:",re),re&&(i.value.unshift(re),console.log("Updated tasks array:",i.value))}c.value=!1,V(),g.value&&k.value&&ze(()=>{k.value&&(k.value.scrollIntoView({behavior:"smooth",block:"center"}),k.value=null)})}catch(A){u.value=g.value?"Failed to update task":"Failed to create task",console.error("Failed to save task",A)}finally{f.value=!1}}},F=async(A,w)=>{const S=i.value.find(C=>C.id===A);if(!S)return;const re=S.progress,j=S.status;S.progress=w,w===100?(S.status="COMPLETED",S.isCompleted=!0):(S.status==="COMPLETED"&&(S.status="IN_PROGRESS"),S.isCompleted=!1,w===0&&S.status!=="CANCELLED"&&(S.status="TODO"),w>0&&S.status==="TODO"&&(S.status="IN_PROGRESS"));try{await On.updateTaskProgress(Number(A),w)}catch(C){S.progress=re,S.status=j,u.value="Failed to update progress",console.error("Failed to update progress",C)}},oe=A=>{const w=i.value.find(j=>j.id===A);if(!w)return;const S=document.querySelector(`[data-task-id="${A}"]`);k.value=S,v.title=w.title,v.description=w.description||"",v.userId=w.userId,v.projectId=w.projectId,v.status=w.status,v.priority=w.priority,v.progress=w.progress,v.isCompleted=w.isCompleted,v.tags=w.tags||"",v.dueDateInput=w.dueDate?w.dueDate.toISOString().slice(0,16):"",v.startDateInput=w.startDate?w.startDate.toISOString().slice(0,16):"",v.estimatedHours=w.estimatedHours,v.actualHours=w.actualHours,v.parentTaskId=w.parentTaskId,g.value=A,c.value=!0;const re=document.querySelector(".task-content");re&&re.scrollTo({top:0,behavior:"smooth"})},T=async A=>{if(confirm("Are you sure you want to delete this task?")){p.value[A]=!0,u.value=null;try{await On.deleteTask(Number(A)),i.value=i.value.filter(w=>w.id!==A)}catch(w){u.value="Failed to delete task",console.error("Failed to delete task",w)}finally{delete p.value[A]}}},x=2*Math.PI*45,L=async()=>{d.value=!0,u.value=null;try{const{tasks:A,projects:w}=await On.getTasks();i.value=A,a.value=w,console.log("Loaded tasks:",i.value)}catch(A){u.value="Failed to load tasks",console.error("Failed to load tasks",A)}finally{d.value=!1}},Q=Se(()=>g.value?"Update":"Create"),M=()=>{c.value=!1,V(),k.value=null},_=Se(()=>v.title.trim().length>0),V=()=>{v.title="",v.description="",v.userId="1",v.projectId=null,v.status="TODO",v.priority="MEDIUM",v.progress=0,v.isCompleted=!1,v.tags="",v.dueDateInput="",v.startDateInput="",v.estimatedHours=null,v.actualHours=null,v.parentTaskId=null,g.value=null};return Ue(()=>{L()}),(A,w)=>(y(),b("div",Jh,[r("div",Zh,[r("button",{onClick:w[0]||(w[0]=S=>o("toggle-contacts")),class:"back-button"},w[17]||(w[17]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),w[19]||(w[19]=r("h2",null,"Task Manager",-1)),r("button",{onClick:w[1]||(w[1]=S=>c.value=!c.value),class:"create-task-button"},w[18]||(w[18]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),r("div",Qh,[u.value?(y(),b("div",Xh,[w[20]||(w[20]=r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),r("span",null,G(u.value),1),r("button",{onClick:w[2]||(w[2]=S=>u.value=null),class:"close-error"},"")])):de("",!0),d.value?(y(),b("div",e1,w[21]||(w[21]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Loading...",-1)]))):de("",!0),c.value?(y(),b("div",t1,[r("div",n1,[r("div",s1,[w[22]||(w[22]=r("label",{class:"form-label"},"Title",-1)),r("div",o1,[we(r("input",{"onUpdate:modelValue":w[3]||(w[3]=S=>v.title=S),type:"text",placeholder:"Enter task title...",class:"task-input",onKeyup:[wt(W,["enter"]),w[4]||(w[4]=wt(S=>c.value=!1,["esc"]))]},null,544),[[Ae,v.title]]),xe(ht,{onTextRecognized:X})])]),r("div",r1,[w[23]||(w[23]=r("label",{class:"form-label"},"Description",-1)),r("div",i1,[we(r("textarea",{"onUpdate:modelValue":w[5]||(w[5]=S=>v.description=S),rows:"3",placeholder:"Enter description...",class:"task-textarea"},null,512),[[Ae,v.description]]),xe(ht,{onTextRecognized:ce})])]),r("div",a1,[r("div",l1,[w[25]||(w[25]=r("label",{class:"form-label"},"Project",-1)),we(r("select",{"onUpdate:modelValue":w[6]||(w[6]=S=>v.projectId=S),class:"task-select"},[w[24]||(w[24]=r("option",{value:null},"No project",-1)),(y(!0),b(me,null,De(a.value,S=>(y(),b("option",{key:S.id,value:S.id},G(S.title),9,c1))),128))],512),[[Jt,v.projectId]])]),r("div",u1,[w[27]||(w[27]=r("label",{class:"form-label"},"Parent Task",-1)),we(r("select",{"onUpdate:modelValue":w[7]||(w[7]=S=>v.parentTaskId=S),class:"task-select"},[w[26]||(w[26]=r("option",{value:null},"No parent",-1)),(y(!0),b(me,null,De(l.value,S=>(y(),b("option",{key:S.id,value:S.id},G(S.title),9,d1))),128))],512),[[Jt,v.parentTaskId]])])]),r("div",f1,[r("div",p1,[w[28]||(w[28]=r("label",{class:"form-label"},"Status",-1)),we(r("select",{"onUpdate:modelValue":w[8]||(w[8]=S=>v.status=S),class:"task-select"},[(y(),b(me,null,De(n,S=>r("option",{key:S,value:S},G(S),9,g1)),64))],512),[[Jt,v.status]])]),r("div",v1,[w[29]||(w[29]=r("label",{class:"form-label"},"Priority",-1)),we(r("select",{"onUpdate:modelValue":w[9]||(w[9]=S=>v.priority=S),class:"task-select"},[(y(),b(me,null,De(s,S=>r("option",{key:S,value:S},G(S),9,h1)),64))],512),[[Jt,v.priority]])]),r("div",m1,[w[30]||(w[30]=r("label",{class:"form-label"},"Completed",-1)),we(r("input",{"onUpdate:modelValue":w[10]||(w[10]=S=>v.isCompleted=S),type:"checkbox"},null,512),[[pn,v.isCompleted]])])]),r("div",w1,[r("div",y1,[r("label",b1,"Progress: "+G(v.progress)+"%",1),we(r("input",{"onUpdate:modelValue":w[11]||(w[11]=S=>v.progress=S),type:"range",min:"0",max:"100",class:"progress-slider"},null,512),[[Ae,v.progress,void 0,{number:!0}]])])]),r("div",_1,[r("div",C1,[w[31]||(w[31]=r("label",{class:"form-label"},"Start Date",-1)),we(r("input",{"onUpdate:modelValue":w[12]||(w[12]=S=>v.startDateInput=S),type:"datetime-local",class:"task-input"},null,512),[[Ae,v.startDateInput]])]),r("div",k1,[w[32]||(w[32]=r("label",{class:"form-label"},"Due Date",-1)),we(r("input",{"onUpdate:modelValue":w[13]||(w[13]=S=>v.dueDateInput=S),type:"datetime-local",class:"task-input"},null,512),[[Ae,v.dueDateInput]])])]),r("div",S1,[r("div",x1,[w[33]||(w[33]=r("label",{class:"form-label"},"Estimated Hours",-1)),we(r("input",{"onUpdate:modelValue":w[14]||(w[14]=S=>v.estimatedHours=S),type:"number",step:"0.1",class:"task-input"},null,512),[[Ae,v.estimatedHours,void 0,{number:!0}]])]),r("div",T1,[w[34]||(w[34]=r("label",{class:"form-label"},"Actual Hours",-1)),we(r("input",{"onUpdate:modelValue":w[15]||(w[15]=S=>v.actualHours=S),type:"number",step:"0.1",class:"task-input"},null,512),[[Ae,v.actualHours,void 0,{number:!0}]])])]),r("div",E1,[w[35]||(w[35]=r("label",{class:"form-label"},"Tags (comma separated)",-1)),we(r("input",{"onUpdate:modelValue":w[16]||(w[16]=S=>v.tags=S),type:"text",placeholder:"bug, ui, refactor",class:"task-input"},null,512),[[Ae,v.tags]])])]),r("div",A1,[r("button",{onClick:W,disabled:!_.value||f.value,class:"btn-primary"},[f.value?(y(),b("span",M1,G(g.value?"Updating...":"Creating..."),1)):(y(),b("span",$1,G(Q.value),1))],8,I1),r("button",{onClick:M,class:"btn-secondary"},"Cancel")])])):de("",!0),r("div",L1,[i.value.length===0&&!d.value?(y(),b("div",D1,w[36]||(w[36]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),r("p",null,"No tasks",-1),r("small",null,'Create your first task by clicking the "+" button',-1)]))):de("",!0),(y(!0),b(me,null,De(i.value,S=>(y(),b("div",{key:S.id,"data-task-id":S.id,class:"task-item"},[r("div",R1,[r("div",V1,[r("h4",O1,G(S.title),1),r("p",N1,"Created: "+G($(S.createdAt)),1),r("p",B1,"Updated: "+G($(S.updatedAt)),1)]),r("div",H1,[r("span",{class:"status-badge",style:Ze({backgroundColor:D(S.status)})},G(S.status),5),r("span",{class:"priority-badge",style:Ze({backgroundColor:R(S.priority)})},G(S.priority),5),S.isCompleted?(y(),b("span",F1,"Completed")):de("",!0)])]),S.description?(y(),b("div",U1,G(S.description),1)):de("",!0),Z(S.tags).length?(y(),b("div",j1,[(y(!0),b(me,null,De(Z(S.tags),re=>(y(),b("span",{class:"tag",key:re},G(re),1))),128))])):de("",!0),r("div",z1,[r("div",W1,"Start: "+G($(S.startDate)),1),r("div",K1,"Due: "+G($(S.dueDate)),1)]),r("div",G1,[S.projectId&&U(S.projectId)?(y(),b("div",q1," Project: "+G(U(S.projectId)),1)):de("",!0),S.parentTaskId&&N(S.parentTaskId)?(y(),b("div",Y1," Parent task: "+G(N(S.parentTaskId)),1)):de("",!0)]),r("div",J1,[S.estimatedHours!=null?(y(),b("div",Z1," Est: "+G(S.estimatedHours)+"h ",1)):de("",!0),S.actualHours!=null?(y(),b("div",Q1," Actual: "+G(S.actualHours)+"h ",1)):de("",!0)]),r("div",X1,[r("div",em,[r("div",tm,[(y(),b("svg",nm,[w[37]||(w[37]=r("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e9ecef","stroke-width":"8",class:"progress-bg"},null,-1)),r("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:D(S.status),"stroke-width":"8","stroke-linecap":"round","stroke-dasharray":x,"stroke-dashoffset":x-S.progress/100*x,class:"progress-fill-circle"},null,8,sm)])),r("div",om,G(S.progress)+"%",1)]),r("input",{type:"range",min:"0",max:"100",value:S.progress,onInput:re=>F(S.id,parseInt(re.target.value)),class:"progress-slider"},null,40,rm)])]),r("div",im,[r("button",{onClick:re=>oe(S.id),disabled:f.value,class:"edit-button",title:"Edit task"},w[38]||(w[38]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",fill:"currentColor"})],-1)]),8,am),r("button",{onClick:re=>T(S.id),disabled:p.value[S.id],class:"delete-button",title:"Delete task"},w[39]||(w[39]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})],-1)]),8,lm)])],8,P1))),128))])])]))}}),um=je(cm,[["__scopeId","data-v-dad2fe07"]]),dm={key:0,class:"chat-header"},fm={key:1,class:"news-header"},pm={class:"news-form"},gm={key:0,class:"error-message"},vm={class:"form-group"},hm={class:"input-with-voice"},mm={class:"form-group"},wm={class:"input-with-voice"},ym={class:"form-group no-margin"},bm={class:"image-upload-container"},_m={key:0,class:"image-previews"},Cm=["src"],km=["onClick"],Sm=["disabled"],xm={key:3,class:"news-content-container"},Tm={class:"news-items-grid"},Em=["title"],Am={class:"news-header"},Im={class:"news-user"},Mm={key:0,class:"user-avatar"},$m=["src"],Lm={key:1,class:"user-avatar-placeholder"},Dm={class:"user-info"},Pm={class:"user-name"},Rm={class:"post-time"},Vm=["onClick"],Om={class:"news-title"},Nm=["src","alt"],Bm=Ne({__name:"MyNotes",props:{hideHeader:{type:Boolean,default:!1}},emits:["toggle-contacts"],setup(e,{emit:t}){const n=t,s=O([{id:1,userId:1,userName:"John Doe",title:"Vue 3 Composition API Guide",description:"When using a language model for code completion, we typically want the model to produce a completion that begins with what the user has typed.However, modern language models operate on sequences of tokens, not characters, so naively tokenizing the users input and sending it to the model produces wrong results if the users cursor doesnt happen to lie on a token boundary.Instead, we need an algorithm that samples a sequence of tokens conditional on a prefix of characters, rather than the more typical case of sampling conditional on a prefix of tokens.We call this character prefix conditioning, an algorithm for sampling a sequence of tokens conditioned on a character prefix.Just found this amazing article about Vue 3 composition API and how it changes the way we build Vue apps!",images:["https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80"],timeAgo:"3h ago"},{id:2,userId:2,userName:"Mary Johnson",title:"Book Recommendation",description:"Just finished reading this amazing book. Highly recommend it to everyone!",images:["https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80"],timeAgo:"5 hours ago"},{id:3,userId:3,userName:"Alex Wilson",title:"New Job at Google!",description:"Just got a new job at Google! So excited to start this new chapter in my life.",timeAgo:"1 day ago"},{id:4,userId:4,userName:"Helen Brown",title:"Dinner at Italian Restaurant",description:"Had a wonderful dinner with friends last night at the new Italian restaurant downtown. The pasta was incredible!",images:["https://images.unsplash.com/photo-1555396273-367ea4eb4db5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80"],timeAgo:"1 day ago"},{id:5,userId:5,userName:"James Wilson",title:"iPhone Upgrade Thoughts",description:"Thoughts on the new iPhone? Thinking about upgrading but not sure if it's worth it.",timeAgo:"2 days ago"},{id:6,userId:6,userName:"Sarah Parker",title:"Trip to Japan - Tokyo & Kyoto",description:"Just came back from my trip to Japan! Here are some pictures from Tokyo and Kyoto. The culture, food, and people were amazing!",images:["https://images.unsplash.com/photo-1528360983277-13d401cdc186?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80","https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"],timeAgo:"3 days ago"},{id:7,userId:7,userName:"Michael Chen",title:"First Marathon Completed!",description:"Just completed my first marathon! It was tough but so rewarding. Thanks to everyone who supported me along the way.",images:["https://images.unsplash.com/photo-1528360983277-13d401cdc186?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80","https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"],timeAgo:"5 days ago"}]),o=Y=>{if(!Y)return"";const B=Y.split(" ");return B.length===1?B[0].charAt(0).toUpperCase():(B[0].charAt(0)+B[1].charAt(0)).toUpperCase()},i=ut(),a=Y=>{i.push(`/news/${Y}`)},l=O(!1),c=()=>{l.value=!0},d=()=>{l.value=!1,u.value="",f.value="",p.value=[],k.value=""},u=O(""),f=O(""),p=O([]),g=O(!1),k=O(""),v=Y=>{const B=Y.target;if(!(!B.files||B.files.length===0)){if(p.value.length+B.files.length>5){k.value="You can upload maximum 5 images";return}Array.from(B.files).forEach(U=>{const N=new FileReader;N.onload=X=>{var ce;(ce=X.target)!=null&&ce.result&&typeof X.target.result=="string"&&p.value.push(X.target.result)},N.readAsDataURL(U)}),B.value=""}},$=Y=>{p.value.splice(Y,1)},I=Y=>{u.value=u.value?u.value+" "+Y:Y},D=Y=>{f.value=f.value?f.value+" "+Y:Y},P=async()=>{if(!u.value.trim()){k.value="Please enter a title for your post";return}if(!f.value.trim()){k.value="Please enter some content for your post";return}g.value=!0,k.value="";try{await new Promise(B=>setTimeout(B,1e3));const Y={id:`news-${Date.now()}`,userId:"current-user",userName:"You",userAvatar:"/avatars/user1.png",title:u.value,description:f.value,images:[...p.value],timeAgo:"Just now"};s.value.unshift(Y),u.value="",f.value="",p.value=[],l.value=!1}catch(Y){k.value="Failed to post news. Please try again.",console.error("Error posting news:",Y)}finally{g.value=!1}},R=O(window.innerWidth);Ue(()=>{window.addEventListener("resize",Z)}),at(()=>{window.removeEventListener("resize",Z)});function Z(){R.value=window.innerWidth}return(Y,B)=>(y(),b("div",{class:ke(["news-feed",{"no-padding":e.hideHeader}])},[e.hideHeader?(y(),b("div",dm,[r("button",{class:"back-button",onClick:B[0]||(B[0]=U=>n("toggle-contacts"))},B[4]||(B[4]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),B[6]||(B[6]=r("h2",null,"Notes",-1)),r("button",{class:"create-post-icon-button",onClick:c,title:"Create Post"},B[5]||(B[5]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])):de("",!0),e.hideHeader?de("",!0):(y(),b("div",fm,[r("button",{class:"back-button",onClick:B[1]||(B[1]=U=>n("toggle-contacts"))},B[7]||(B[7]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),B[9]||(B[9]=r("h2",null,"Notes",-1)),r("button",{class:"create-post-button",onClick:c},B[8]||(B[8]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",class:"add-icon"},[r("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1),r("span",null,"Create Post",-1)]))])),l.value?(y(),b("div",{key:2,class:ke(["create-news-content",{"mobile-container":R.value<=768}])},[r("div",pm,[r("div",{class:"form-header"},[B[11]||(B[11]=r("h3",null,"Create News Post",-1)),r("button",{class:"close-button",onClick:d},B[10]||(B[10]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})],-1)]))]),r("form",{onSubmit:ct(P,["prevent"])},[k.value?(y(),b("div",gm,G(k.value),1)):de("",!0),r("div",vm,[r("div",hm,[we(r("input",{id:"news-title","onUpdate:modelValue":B[2]||(B[2]=U=>u.value=U),class:"content-input",placeholder:"Enter title...",type:"text"},null,512),[[Ae,u.value]]),xe(ht,{onTextRecognized:I})])]),r("div",mm,[r("div",wm,[we(r("textarea",{id:"news-content","onUpdate:modelValue":B[3]||(B[3]=U=>f.value=U),class:"content-input",placeholder:"What's on your mind?",rows:"4"},null,512),[[Ae,f.value]]),xe(ht,{onTextRecognized:D})])]),r("div",ym,[B[14]||(B[14]=r("div",{class:"upload-label"},"Add Photos",-1)),r("div",bm,[B[12]||(B[12]=r("label",{for:"image-upload",class:"image-upload-label"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"})]),r("span",null,"Upload Image")],-1)),r("input",{type:"file",id:"image-upload",accept:"image/*",multiple:"",class:"hidden-upload",onChange:v},null,32)]),p.value.length>0?(y(),b("div",_m,[(y(!0),b(me,null,De(p.value,(U,N)=>(y(),b("div",{key:N,class:"image-preview"},[r("img",{src:U,alt:"Preview"},null,8,Cm),r("button",{class:"remove-image",onClick:X=>$(N)},B[13]||(B[13]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,km)]))),128))])):de("",!0)]),r("button",{type:"submit",class:"publish-button",disabled:g.value},G(g.value?"Publishing...":"Publish"),9,Sm)],32)])],2)):(y(),b("div",xm,[r("div",Tm,[(y(!0),b(me,null,De(s.value,U=>(y(),b("div",{class:"news-item",key:U.id,title:U.description},[r("div",Am,[r("div",Im,[U.userAvatar?(y(),b("div",Mm,[r("img",{src:U.userAvatar,alt:"User Avatar"},null,8,$m)])):(y(),b("div",Lm,G(o(U.userName)),1)),r("div",Dm,[r("div",Pm,G(U.userName),1),r("div",Rm,G(U.timeAgo),1)])]),B[15]||(B[15]=r("button",{class:"more-button"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1))]),r("div",{class:"news-content",onClick:N=>a(U.id)},[r("h3",Om,G(U.title),1),r("p",null,G(U.description),1),U.images&&U.images.length>0?(y(),b("div",{key:0,class:ke(["news-images",{"single-image":U.images.length===1,"multi-image":U.images.length>1}])},[(y(!0),b(me,null,De(U.images,(N,X)=>(y(),b("div",{key:X,class:"news-image"},[r("img",{src:N,alt:`${U.userName}'s post image ${X+1}`,loading:"lazy"},null,8,Nm)]))),128))],2)):de("",!0)],8,Vm),B[16]||(B[16]=r("div",{class:"news-actions"},[r("button",{class:"action-button"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})]),r("span",null,"Share")])],-1))],8,Em))),128))]),B[17]||(B[17]=r("div",{class:"load-more"},[r("button",{class:"load-more-button"},"Load More")],-1))]))],2))}}),Cl=je(Bm,[["__scopeId","data-v-39b52d80"]]),Hm={class:"projects-manager"},Fm={class:"projects-header"},Um={class:"projects-content"},jm={key:0,class:"error-message"},zm={key:1,class:"loading-overlay"},Wm={key:2,class:"create-project-form"},Km={class:"form-grid"},Gm={class:"form-col"},qm={class:"input-with-voice"},Ym={class:"form-col"},Jm={class:"input-with-voice"},Zm={class:"form-row"},Qm={class:"form-col"},Xm=["value"],e2={class:"form-col form-col-checkbox"},t2={class:"form-row"},n2={class:"form-col"},s2=["value"],o2={class:"form-col"},r2=["value"],i2={class:"form-row"},a2={class:"form-col"},l2={class:"form-label"},c2={class:"form-row"},u2={class:"form-col"},d2={class:"form-col"},f2={class:"form-col"},p2={class:"form-col"},g2={class:"form-actions"},v2=["disabled"],h2={class:"projects-list"},m2={key:0,class:"empty-state"},w2=["data-project-id"],y2={class:"project-main"},b2={class:"project-info"},_2={class:"project-title"},C2={class:"project-date"},k2={class:"project-date"},S2={class:"project-meta"},x2={key:0,class:"inactive-badge"},T2={key:0,class:"project-description"},E2={key:1,class:"project-tags"},A2={class:"dates-row"},I2={class:"date-chip"},M2={class:"date-chip"},$2={class:"date-chip"},L2={class:"project-progress"},D2={class:"progress-circle-container"},P2={class:"progress-circle-wrapper"},R2={class:"progress-circle",viewBox:"0 0 100 100"},V2=["stroke","stroke-dashoffset"],O2={class:"progress-text"},N2=["value","onInput"],B2={class:"project-actions"},H2=["onClick","disabled"],F2=["onClick","disabled"],U2=Ne({name:"ProjectsView",__name:"Projects",emits:["toggle-contacts"],setup(e,{emit:t}){const n=t,s=O([]),o=O(!1),i=O(!1),a=O(null),l=O(null),c=O(null),d=["planning","in_progress","on_hold","completed","archived"],u=["low","medium","high"],f=[{name:"Blue",value:"#3B82F6"},{name:"Green",value:"#10B981"},{name:"Purple",value:"#8B5CF6"},{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Pink",value:"#EC4899"},{name:"Indigo",value:"#6366F1"},{name:"Teal",value:"#14B8A6"},{name:"Yellow",value:"#EAB308"},{name:"Gray",value:"#6B7280"}],p=Nt({title:"",description:"",userId:"1",status:"planning",priority:"medium",progress:0,dueDateInput:"",tags:"",color:"",endDateInput:"",isActive:!0,startDateInput:""}),g=2*Math.PI*45,k=async()=>{i.value=!0,a.value=null;try{s.value=await Bn.getProjects(),console.log("Loaded projects:",s.value)}catch(T){a.value="Failed to load projects",console.error("Failed to load projects",T)}finally{i.value=!1}};Ue(()=>{k()});const v=Se(()=>l.value?"Update":"Create"),$=()=>{o.value=!1,D(),c.value=null},I=Se(()=>p.title.trim().length>0),D=()=>{p.title="",p.description="",p.userId="1",p.status="planning",p.priority="medium",p.progress=0,p.dueDateInput="",p.tags="",p.color="",p.endDateInput="",p.isActive=!0,p.startDateInput="",l.value=null},P=T=>{if(!T)return"-";try{const x=typeof T=="string"?new Date(T):T;if(!x||isNaN(x.getTime()))return"-";const L=x.getDate().toString().padStart(2,"0"),Q=(x.getMonth()+1).toString().padStart(2,"0"),M=x.getFullYear();return`${L}-${Q}-${M}`}catch(x){return console.error("Error formatting date:",x,T),"-"}},R=T=>{p.title=p.title?p.title+" "+T:T},Z=T=>{p.description=p.description?p.description+" "+T:T},Y=async()=>{if(I.value){i.value=!0,a.value=null;try{const T={title:p.title.trim(),description:p.description.trim()||"",userId:p.userId,status:p.status,priority:p.priority,progress:Number(p.progress)||0,dueDate:p.dueDateInput||null,tags:p.tags?p.tags.split(",").map(x=>x.trim()).filter(Boolean):null,color:p.color||null,endDate:p.endDateInput||null,isActive:!!p.isActive,startDate:p.startDateInput||null};if(l.value){const x=await Bn.updateProject(Number(l.value),T);if(x){const L=s.value.findIndex(Q=>Q.id===String(l.value));L!==-1&&(s.value[L]=x)}}else{const x=await Bn.createProject(T);console.log("New project created:",x),x&&(s.value.unshift(x),console.log("Updated projects array:",s.value))}o.value=!1,D(),l.value&&c.value&&ze(()=>{c.value&&(c.value.scrollIntoView({behavior:"smooth",block:"center"}),c.value=null)})}catch(T){a.value=l.value?"Failed to update project":"Failed to create project",console.error("Failed to save project",T)}finally{i.value=!1}}},B=async T=>{if(confirm("Are you sure you want to delete this project?")){i.value=!0,a.value=null;try{await Bn.deleteProject(Number(T)),s.value=s.value.filter(x=>x.id!==T)}catch(x){a.value="Failed to delete project",console.error("Failed to delete project",x)}finally{i.value=!1}}},U=async(T,x)=>{const L=s.value.find(_=>_.id===T);if(!L)return;const Q=L.progress,M=L.status;L.progress=x,x===100?L.status="completed":(L.status==="completed"&&(L.status="in_progress"),x===0&&L.status!=="archived"&&(L.status="planning"),x>0&&L.status==="planning"&&(L.status="in_progress"));try{await Bn.updateProject(Number(T),{progress:x,status:L.status})}catch(_){L.progress=Q,L.status=M,a.value="Failed to update progress",console.error("Failed to update progress",_)}},N=T=>{const x=s.value.find(M=>M.id===T);if(!x)return;const L=document.querySelector(`[data-project-id="${T}"]`);c.value=L,p.title=x.title,p.description=x.description||"",p.userId=x.userId,p.status=x.status,p.priority=x.priority,p.progress=x.progress,p.dueDateInput=x.dueDate?x.dueDate.toISOString().slice(0,16):"",p.tags=x.tags?x.tags.join(", "):"",p.color=x.color||"",p.endDateInput=x.endDate?x.endDate.toISOString().slice(0,16):"",p.isActive=x.isActive,p.startDateInput=x.startDate?x.startDate.toISOString().slice(0,16):"",l.value=T,o.value=!0;const Q=document.querySelector(".projects-content");Q&&Q.scrollTo({top:0,behavior:"smooth"})},X={planning:"#8b9dc3",in_progress:"#6b7db8",on_hold:"#a8a8c7",completed:"#7c8db8",archived:"#9ca3af"},ce=T=>X[T]?X[T]:"#8b9dc3",W={low:"#a8b2d1",medium:"#8896c2",high:"#6b7db8"},F=T=>W[T]?W[T]:"#a8b2d1",oe=T=>T?Array.isArray(T)?T:[]:[];return(T,x)=>(y(),b("div",Hm,[r("div",Fm,[r("button",{class:"back-button",onClick:x[0]||(x[0]=L=>n("toggle-contacts"))},x[15]||(x[15]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),x[17]||(x[17]=r("h2",null,"Projects",-1)),r("button",{onClick:x[1]||(x[1]=L=>o.value=!o.value),class:"create-project-button"},x[16]||(x[16]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),r("div",Um,[a.value?(y(),b("div",jm,[x[18]||(x[18]=r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),r("span",null,G(a.value),1),r("button",{onClick:x[2]||(x[2]=L=>a.value=null),class:"close-error"},"")])):de("",!0),i.value?(y(),b("div",zm,x[19]||(x[19]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Loading...",-1)]))):de("",!0),o.value?(y(),b("div",Wm,[r("div",Km,[r("div",Gm,[x[20]||(x[20]=r("label",{class:"form-label"},"Title",-1)),r("div",qm,[we(r("input",{"onUpdate:modelValue":x[3]||(x[3]=L=>p.title=L),type:"text",placeholder:"Enter project title...",class:"project-input",onKeyup:[wt(Y,["enter"]),x[4]||(x[4]=wt(L=>o.value=!1,["esc"]))]},null,544),[[Ae,p.title]]),xe(ht,{onTextRecognized:R})])]),r("div",Ym,[x[21]||(x[21]=r("label",{class:"form-label"},"Description",-1)),r("div",Jm,[we(r("textarea",{"onUpdate:modelValue":x[5]||(x[5]=L=>p.description=L),rows:"3",placeholder:"Enter description...",class:"project-textarea"},null,512),[[Ae,p.description]]),xe(ht,{onTextRecognized:Z})])]),r("div",Zm,[r("div",Qm,[x[23]||(x[23]=r("label",{class:"form-label"},"Color",-1)),r("div",{class:"color-selector",style:Ze({backgroundColor:p.color})},[we(r("select",{"onUpdate:modelValue":x[6]||(x[6]=L=>p.color=L),class:"color-select",style:Ze({backgroundColor:p.color})},[x[22]||(x[22]=r("option",{value:""},"Select color",-1)),(y(),b(me,null,De(f,L=>r("option",{key:L.value,value:L.value,style:Ze({backgroundColor:L.value})},G(L.name),13,Xm)),64))],4),[[Jt,p.color]])],4)]),r("div",e2,[x[24]||(x[24]=r("label",{class:"form-label"},"Active",-1)),we(r("input",{"onUpdate:modelValue":x[7]||(x[7]=L=>p.isActive=L),type:"checkbox"},null,512),[[pn,p.isActive]])])]),r("div",t2,[r("div",n2,[x[25]||(x[25]=r("label",{class:"form-label"},"Status",-1)),we(r("select",{"onUpdate:modelValue":x[8]||(x[8]=L=>p.status=L),class:"project-select"},[(y(),b(me,null,De(d,L=>r("option",{key:L,value:L},G(L),9,s2)),64))],512),[[Jt,p.status]])]),r("div",o2,[x[26]||(x[26]=r("label",{class:"form-label"},"Priority",-1)),we(r("select",{"onUpdate:modelValue":x[9]||(x[9]=L=>p.priority=L),class:"project-select"},[(y(),b(me,null,De(u,L=>r("option",{key:L,value:L},G(L),9,r2)),64))],512),[[Jt,p.priority]])])]),r("div",i2,[r("div",a2,[r("label",l2,"Progress: "+G(p.progress)+"%",1),we(r("input",{"onUpdate:modelValue":x[10]||(x[10]=L=>p.progress=L),type:"range",min:"0",max:"100",class:"progress-slider"},null,512),[[Ae,p.progress,void 0,{number:!0}]])])]),r("div",c2,[r("div",u2,[x[27]||(x[27]=r("label",{class:"form-label"},"Start Date",-1)),we(r("input",{"onUpdate:modelValue":x[11]||(x[11]=L=>p.startDateInput=L),type:"datetime-local",class:"project-input"},null,512),[[Ae,p.startDateInput]])]),r("div",d2,[x[28]||(x[28]=r("label",{class:"form-label"},"Due Date",-1)),we(r("input",{"onUpdate:modelValue":x[12]||(x[12]=L=>p.dueDateInput=L),type:"datetime-local",class:"project-input"},null,512),[[Ae,p.dueDateInput]])]),r("div",f2,[x[29]||(x[29]=r("label",{class:"form-label"},"End Date",-1)),we(r("input",{"onUpdate:modelValue":x[13]||(x[13]=L=>p.endDateInput=L),type:"datetime-local",class:"project-input"},null,512),[[Ae,p.endDateInput]])])]),r("div",p2,[x[30]||(x[30]=r("label",{class:"form-label"},"Tags (comma separated)",-1)),we(r("input",{"onUpdate:modelValue":x[14]||(x[14]=L=>p.tags=L),type:"text",placeholder:"frontend, api, design",class:"project-input"},null,512),[[Ae,p.tags]])])]),r("div",g2,[r("button",{onClick:Y,disabled:!I.value||i.value,class:"btn-primary"},G(v.value),9,v2),r("button",{onClick:$,class:"btn-secondary"},"Cancel")])])):de("",!0),r("div",h2,[s.value.length===0&&!i.value?(y(),b("div",m2,x[31]||(x[31]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),r("p",null,"No projects",-1),r("small",null,'Create your first project by clicking the "+" button',-1)]))):de("",!0),(y(!0),b(me,null,De(s.value,L=>(y(),b("div",{key:L.id,"data-project-id":L.id,class:"project-item",style:Ze({"--project-color":L.color||"transparent"})},[r("div",y2,[r("div",b2,[r("h4",_2,G(L.title),1),r("p",C2,"Created: "+G(P(L.createdAt)),1),r("p",k2,"Updated: "+G(P(L.updatedAt)),1)]),r("div",S2,[r("span",{class:"status-badge",style:Ze({backgroundColor:ce(L.status)})},G(L.status),5),r("span",{class:"priority-badge",style:Ze({backgroundColor:F(L.priority)})},G(L.priority),5),L.isActive?de("",!0):(y(),b("span",x2,"Inactive"))])]),L.description?(y(),b("div",T2,G(L.description),1)):de("",!0),oe(L.tags).length?(y(),b("div",E2,[(y(!0),b(me,null,De(oe(L.tags),Q=>(y(),b("span",{class:"tag",key:Q},G(Q),1))),128))])):de("",!0),r("div",A2,[r("div",I2,"Start: "+G(P(L.startDate)),1),r("div",M2,"Due: "+G(P(L.dueDate)),1),r("div",$2,"End: "+G(P(L.endDate)),1),L.color?(y(),b("div",{key:0,class:"date-chip",style:Ze({backgroundColor:L.color,color:"white"})}," Color ",4)):de("",!0)]),r("div",L2,[r("div",D2,[r("div",P2,[(y(),b("svg",R2,[x[32]||(x[32]=r("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e9ecef","stroke-width":"8",class:"progress-bg"},null,-1)),r("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:ce(L.status),"stroke-width":"8","stroke-linecap":"round","stroke-dasharray":g,"stroke-dashoffset":g-L.progress/100*g,class:"progress-fill-circle"},null,8,V2)])),r("div",O2,G(L.progress)+"%",1)]),r("input",{type:"range",min:"0",max:"100",disabled:"",value:L.progress,onInput:Q=>U(L.id,parseInt(Q.target.value)),class:"progress-slider"},null,40,N2)])]),r("div",B2,[r("button",{onClick:Q=>N(L.id),disabled:i.value,class:"edit-button",title:"Edit project"},x[33]||(x[33]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",fill:"currentColor"})],-1)]),8,H2),r("button",{onClick:Q=>B(L.id),disabled:i.value,class:"delete-button",title:"Delete project"},x[34]||(x[34]=[r("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",fill:"currentColor"})],-1)]),8,F2)])],12,w2))),128))])])]))}}),j2=je(U2,[["__scopeId","data-v-0a13d20b"]]),z2={key:0,class:"connection-status"},W2=Ne({__name:"ConnectionStatus",props:{show:{type:Boolean,default:!1}},emits:["retry"],setup(e,{emit:t}){const n=e,s=t,o=()=>{s("retry")};return(i,a)=>n.show?(y(),b("div",z2,[a[0]||(a[0]=r("span",null,"No internet connection",-1)),r("button",{class:"retry-button",onClick:o},"Retry")])):de("",!0)}}),K2=je(W2,[["__scopeId","data-v-1eb813a0"]]),an=e=>{const t=new Date(e),n=new Date,s=new Date(n);if(s.setDate(s.getDate()-1),t.toDateString()===n.toDateString())return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});if(t.toDateString()===s.toDateString())return"Yesterday";const o=Math.floor((n.getTime()-t.getTime())/(1e3*60*60*24));return o<7?`${o} days ago`:t.toLocaleString("en-US",{weekday:"long"})},G2={class:"chat-container"},q2={class:"chat-main"},Y2={class:"main-content"},J2=Ne({__name:"Chat",setup(e){const t=gr(),n=_t(),s=O(null),o=O(null),i=O(localStorage.getItem("notifications_enabled")!=="false"),a=()=>{s.value&&i.value&&(s.value.currentTime=0,s.value.play().catch(h=>{console.error("  :",h)}))},l=()=>{o.value&&i.value&&(o.value.currentTime=0,o.value.play().catch(h=>{console.error("   :",h)}))},c=()=>{i.value=!i.value,localStorage.setItem("notifications_enabled",i.value.toString())},d=ut(),u=Ht(),f=ps(),p=O(!0),g=O(!1),k=O(!1),v=O(!1),$=O(!1),I=Dn(),D=Se(()=>I.meta.tab==="notes"),P=Se(()=>I.meta.tab==="calendar"),R=Se(()=>I.meta.tab==="tasks"),Z=Se(()=>I.meta.tab==="projects"),Y=O(!1),B=gs(),U=sr(B,"windowWidth"),N=O(null),X=O(null),ce=()=>{console.log("toggleContacts"),p.value=!p.value},W=()=>{var h,m;p.value=!0,(m=(h=X.value)==null?void 0:h.openAddContactModal)==null||m.call(h)},F=h=>{d.push(h?"/notes":"/chat")},oe=()=>{d.push(P.value?"/chat":"/calendar")},T=()=>{d.push(R.value?"/chat":"/tasks")},x=()=>{U.value<=768&&(Z.value||P.value||R.value||D.value)&&(p.value=!1)};Be([Z,P,R,D],x,{immediate:!0}),Be(U,x);const L=()=>{g.value=!0,setTimeout(()=>{g.value=!1,v.value=!1},2e3)},Q=async()=>{var h,m;f.setLoading(!0);try{const{error:E,data:H}=await be.http("POST","/api/chat/get-contact-list",{userId:(h=u.user)==null?void 0:h.id});if(E)console.error("Failed to get contact list: ",E);else if((H==null?void 0:H.status)==="ok"&&((m=H.contactList)==null?void 0:m.length)>0){console.log("Contact list: ",H.contactList);const K=H.onlineUsers,z=H.contactList.map(ne=>({id:ne.id,contactId:String(ne.contactId),name:ne.rename||ne.contact.name,unreadCount:ne.unreadCount,isActive:!1,isOnline:K.includes(ne.contactId),lastMessage:ne.lastMessage?ne.lastMessage.content:"",lastMessageTime:an(ne.updatedAt),lastMessageId:ne.lastMessage?String(ne.lastMessage.id):void 0,lastMessageAt:ne.lastMessageAt,updatedAt:ne.updatedAt}));if(f.setContactList(z),!f.selectedContact&&U.value>600){const ne=String(localStorage.getItem("current_contact_id"));if(ne){const ie=z.find(ae=>ae.contactId===String(ne));ie&&J(ie)}}}}finally{f.setLoading(!1)}},M=()=>{window.addEventListener("online",()=>{v.value=!1}),window.addEventListener("offline",()=>{v.value=!0}),v.value=!navigator.onLine},_=h=>{if($.value){const m=h.target,E=document.querySelector(".dropdown-menu"),H=document.querySelector(".menu-button");E&&H&&!E.contains(m)&&!H.contains(m)&&($.value=!1)}},V=()=>{$.value=!1,d.push("/account")},A=()=>{$.value=!1,d.push("/news")},w=()=>{$.value=!1,d.push("/manifesto")},S=()=>{$.value=!1,d.push("/")},re=h=>{var m;return{id:Number(h.id),text:h.content,time:new Date(h.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isSent:String((m=u.user)==null?void 0:m.id)===h.senderId,isRead:h.isRead,createdAt:h.createdAt,taskId:h.taskId?Number(h.taskId):void 0,calendarId:h.calendarId?Number(h.calendarId):void 0,date:C(new Date(h.createdAt))?"Today":an(String(h.createdAt))}},j=async h=>{var m;if(console.log("sendMessage",h),h&&f.selectedContact&&u.user){k.value=!0;try{try{await B.ensureNotificationPermission()}catch(z){console.warn("     :",z)}console.log("selectedContact",f.selectedContact);const E=f.selectedContact.contactId,{error:H,data:K}=await be.http("POST","/api/chat/send-chat-messages",{contactId:E,content:h,userId:(m=u.user)==null?void 0:m.id});if(H)console.error(H);else if(K&&K.message){const z=re(K.message);if(t.messages.length>0){const ne=t.messages[t.messages.length-1];(C(new Date(ne.createdAt))?"Today":an(String(ne.createdAt)))===z.date&&(z.date="")}t.addMessage(z),f.updateContact({contactId:E,lastMessage:z.text,lastMessageTime:an(String(z.createdAt)),updatedAt:new Date().toISOString(),lastMessageId:String(z.id)||void 0,lastMessageAt:String(z.createdAt)})}}catch(E){console.error("Error sending message:",E)}finally{k.value=!1}}},C=h=>{const m=new Date;return h.getDate()===m.getDate()&&h.getMonth()===m.getMonth()&&h.getFullYear()===m.getFullYear()},J=async h=>{var m;console.log("selectContact",h),f.setActiveContact(h),localStorage.setItem("current_contact_id",h.contactId.toString()),t.resetMessages(),t.setLoading(!0);try{const{error:E,data:H}=await be.http("POST","/api/chat/get-messages",{contactId:h.contactId,userId:(m=u.user)==null?void 0:m.id});if(E)console.error(E);else if(H&&H.messages&&H.messages.length>0&&H.contact){console.log(H);const K=H.messages.sort((se,ge)=>new Date(se.createdAt).getTime()-new Date(ge.createdAt).getTime()).map(re);let z="";K.forEach(se=>{z===se.date?se.date="":se.date&&(z=se.date)});const ne=H.onlineUsers;console.log("onlineContacts",ne),t.setMessages(K);const ie=H.contact,ae=K.length>0?K[K.length-1].text:"";f.updateContact({id:ie.id,contactId:String(ie.contact.id),name:ie.rename||ie.contact.name,unreadCount:ie.unreadCount,isActive:!0,isOnline:ne&&ne.length>0?ne.includes(ie.contact.id):!1,lastMessage:ae,lastMessageTime:an(ie.updatedAt),updatedAt:ie.updatedAt}),ze(()=>{p.value=!1,q()})}}finally{t.setLoading(!1)}},q=()=>{var h;(h=N.value)==null||h.scrollToBottom()};let ue=null;Ue(()=>{s.value=new Audio("/audio/notification.mp3"),o.value=new Audio("/audio/click-button-140881.mp3"),i.value=localStorage.getItem("notifications_enabled")!=="false",M(),document.addEventListener("click",_),n.on("new_message",h=>{var E;console.log("event new_message",h);const m=h.message;m!=null&&m.senderId&&(f.updateContactById(String(m.senderId),{lastMessage:m.content}),f.selectedContact&&m.senderId===String(f.selectedContact.contactId)?(console.log("new_message"),t.addMessage({id:Number(m.id),text:m.content,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isSent:!1,isRead:!0,createdAt:new Date().toISOString(),taskId:m.taskId?Number(m.taskId):void 0,calendarId:m.calendarId?Number(m.calendarId):void 0,date:C(new Date)?"Today":an(new Date().toISOString())}),l(),ze(()=>{q()}),be.ws("main/read_message",{userId:(E=u.user)==null?void 0:E.id,contactId:f.selectedContact.contactId})):(console.log("new_message not for this contact"),a(),f.incrementUnreadCount(String(m.senderId)),f.updateContactById(String(m.senderId),{isOnline:!0,lastMessage:m.content,lastMessageTime:an(String(m.createdAt)),updatedAt:new Date().toISOString()})))}),n.on("user_online",h=>{f.selectedContact&&h.userId===f.selectedContact.contactId&&f.updateContact({contactId:f.selectedContact.contactId,isOnline:h.isOnline})}),n.on("event_typing",h=>{f.selectedContact&&h.userId===f.selectedContact.contactId&&(console.log("event_typing in chat",h),Y.value=!0,ue&&window.clearTimeout(ue),ue=setTimeout(()=>{Y.value=!1},3e3))}),u.hasUser()?Q():(console.log("no user"),d.push("/"))});const Ce=async()=>{var h;if(console.log("eventTyping"),f.selectedContact){const m=await be.ws("main/event_typing",{userId:(h=u.user)==null?void 0:h.id,contactId:f.selectedContact.contactId});console.log("eventTyping res",m)}};return ds(()=>{document.removeEventListener("click",_),n.off("new_message"),n.off("user_online")}),(h,m)=>(y(),b("div",G2,[xe(K2,{show:v.value,onRetry:L},null,8,["show"]),xe(vr,{show:g.value},null,8,["show"]),r("audio",{ref_key:"notificationSound",ref:s,preload:"auto",src:"/audio/notification_1.mp3",style:{display:"none"}},null,512),r("audio",{ref_key:"clickSound",ref:o,preload:"auto",src:"/audio/click-button-140881.mp3",style:{display:"none"}},null,512),r("div",q2,[xe(Yv,{class:ke({show:p.value}),ref_key:"contactsListRef",ref:X,onToggleContacts:ce,onToggleNews:F,onSelectContact:J,onToggleCalendar:oe,onToggleTask:T},null,8,["class"]),r("div",Y2,[D.value?(y(),ot(Cl,{key:0,"hide-header":!0,onBackToChat:m[0]||(m[0]=E=>te(d).push("/chat")),onToggleContacts:ce})):P.value?(y(),ot(Yh,{key:1,onBackToChat:m[1]||(m[1]=E=>te(d).push("/chat")),onToggleContacts:ce})):R.value?(y(),ot(um,{key:2,onBackToChat:m[2]||(m[2]=E=>te(d).push("/chat")),onToggleContacts:ce})):Z.value?(y(),ot(j2,{key:3,onToggleContacts:ce})):(y(),ot(yh,{key:4,ref_key:"chatAreaRef",ref:N,"is-typing":Y.value,"notifications-enabled":i.value,"is-sending-message":k.value,onToggleContacts:ce,onOpenAddContact:W,onGoToAccount:V,onGoToNews:A,onGoToManifesto:w,onLogout:S,onSendMessage:j,onEventTyping:Ce,onToggleNotifications:c},null,8,["is-typing","notifications-enabled","is-sending-message"]))])])]))}}),Hn=je(J2,[["__scopeId","data-v-644a768f"]]),Z2={class:"account-page"},Q2={class:"account-content"},X2={class:"profile-section"},e0={class:"avatar-container"},t0={class:"avatar"},n0={key:0,class:"user-info"},s0={class:"user-status"},o0={key:0,class:"join-date"},r0={class:"settings-section"},i0={class:"setting-item"},a0={class:"toggle"},l0=["checked"],c0={class:"setting-item"},u0={class:"toggle"},d0={class:"setting-item"},f0={class:"toggle"},p0={class:"setting-item"},g0={key:0,class:"setting-status"},v0={class:"toggle"},h0=["disabled"],m0={class:"setting-item"},w0={class:"setting-with-select"},y0=["value"],b0=Ne({name:"UserAccount",__name:"UserAccount",setup(e){const t=Ht(),n=gs(),s=O(t.user),o=O(n.darkMode),i=O(!0),a=O(!0),l=O(n.isSubscribedToPush),c=O("ru-RU"),d=[{code:"uk-UA",name:"Ukrainian ()"},{code:"pl-PL",name:"Polish (Polski)"},{code:"en-US",name:"English (US)"},{code:"en-GB",name:"English (UK)"},{code:"en-AU",name:"English (Australia)"},{code:"en-CA",name:"English (Canada)"},{code:"en-IN",name:"English (India)"},{code:"en-NZ",name:"English (New Zealand)"},{code:"en-ZA",name:"English (South Africa)"},{code:"es-ES",name:"Spanish (Spain)"},{code:"es-MX",name:"Spanish (Mexico)"},{code:"es-AR",name:"Spanish (Argentina)"},{code:"es-CO",name:"Spanish (Colombia)"},{code:"es-CL",name:"Spanish (Chile)"},{code:"fr-FR",name:"French (France)"},{code:"fr-CA",name:"French (Canada)"},{code:"fr-BE",name:"French (Belgium)"},{code:"fr-CH",name:"French (Switzerland)"},{code:"de-DE",name:"German (Germany)"},{code:"de-AT",name:"German (Austria)"},{code:"de-CH",name:"German (Switzerland)"},{code:"it-IT",name:"Italian (Italy)"},{code:"it-CH",name:"Italian (Switzerland)"},{code:"pt-BR",name:"Portuguese (Brazil)"},{code:"pt-PT",name:"Portuguese (Portugal)"},{code:"ru-RU",name:"Russian ()"},{code:"zh-CN",name:"Chinese Simplified ()"},{code:"zh-TW",name:"Chinese Traditional ()"},{code:"zh-HK",name:"Chinese (Hong Kong)"},{code:"ja-JP",name:"Japanese ()"},{code:"ko-KR",name:"Korean ()"},{code:"ar-SA",name:"Arabic (Saudi Arabia)"},{code:"ar-EG",name:"Arabic (Egypt)"},{code:"ar-AE",name:"Arabic (UAE)"},{code:"hi-IN",name:"Hindi ()"},{code:"tr-TR",name:"Turkish (Trke)"},{code:"nl-NL",name:"Dutch (Netherlands)"},{code:"nl-BE",name:"Dutch (Belgium)"},{code:"sv-SE",name:"Swedish (Svenska)"},{code:"da-DK",name:"Danish (Dansk)"},{code:"nb-NO",name:"Norwegian (Norsk)"},{code:"fi-FI",name:"Finnish (Suomi)"},{code:"cs-CZ",name:"Czech (etina)"},{code:"sk-SK",name:"Slovak (Slovenina)"},{code:"hu-HU",name:"Hungarian (Magyar)"},{code:"ro-RO",name:"Romanian (Romn)"},{code:"bg-BG",name:"Bulgarian ()"},{code:"el-GR",name:"Greek ()"},{code:"he-IL",name:"Hebrew ()"},{code:"th-TH",name:"Thai ()"},{code:"vi-VN",name:"Vietnamese (Ting Vit)"},{code:"id-ID",name:"Indonesian (Bahasa Indonesia)"},{code:"ms-MY",name:"Malay (Bahasa Melayu)"},{code:"fil-PH",name:"Filipino (Tagalog)"},{code:"ca-ES",name:"Catalan (Catal)"},{code:"hr-HR",name:"Croatian (Hrvatski)"},{code:"sl-SI",name:"Slovenian (Slovenina)"},{code:"sr-RS",name:"Serbian (Srpski)"},{code:"lt-LT",name:"Lithuanian (Lietuvi)"},{code:"lv-LV",name:"Latvian (Latvieu)"},{code:"et-EE",name:"Estonian (Eesti)"},{code:"af-ZA",name:"Afrikaans"},{code:"sw-KE",name:"Swahili (Kiswahili)"},{code:"bn-IN",name:"Bengali ()"},{code:"ta-IN",name:"Tamil ()"},{code:"te-IN",name:"Telugu ()"},{code:"mr-IN",name:"Marathi ()"},{code:"gu-IN",name:"Gujarati ()"},{code:"kn-IN",name:"Kannada ()"},{code:"ml-IN",name:"Malayalam ()"},{code:"pa-IN",name:"Punjabi ()"},{code:"ur-PK",name:"Urdu ()"},{code:"fa-IR",name:"Persian ()"}];function u(){o.value=!o.value,n.setDarkMode(o.value),console.log("Toggle dark mode:",o.value)}const f=()=>{i.value=!i.value},p=()=>{a.value=!a.value},g=async()=>{try{if(l.value){const P=n.pushSubscriptionId;if(await n.unsubscribeFromPush()){console.log("   push-");try{P&&await xt.deleteSubscription(P)}catch(Z){console.warn("      push:",Z)}}else console.error("    push-"),l.value=!0}else{if(!await n.ensureNotificationPermission()){console.warn("     "),l.value=!1;return}const R=await n.subscribeToPush();if(R){console.log("    push-");try{const Z="127.0.0.1",Y=$(),B=I();await xt.createSubscription({endpoint:R.endpoint,p256dhKey:k(R.getKey("p256dh")),authKey:k(R.getKey("auth")),userAgent:navigator.userAgent,ipAddress:Z||void 0,deviceType:v(),browserName:Y.name,browserVersion:Y.version,osName:B.name,osVersion:B.version,notificationTypes:["new_message","mention","system"],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})}catch(Z){console.warn("      push:",Z),l.value=!1}}else console.error("     push-"),console.info("  :"),console.info("- VAPID     "),console.info("-    push-"),console.info("-  "),l.value=!1,alert(`    push-.

 :
   
 Push-  
      `)}}catch(P){console.error("   push-:",P),l.value=!l.value}},k=P=>{if(!P)return"";const R=new Uint8Array(P);let Z="";for(let Y=0;Y<R.byteLength;Y++)Z+=String.fromCharCode(R[Y]);return window.btoa(Z)},v=()=>{const P=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|tablet/.test(P)?"mobile":"desktop"},$=()=>{const P=navigator.userAgent,R=P.toLowerCase();let Z="Unknown",Y="Unknown";if(R.includes("chrome")&&!R.includes("edg")){Z="Chrome";const B=P.match(/Chrome\/(\d+\.\d+)/);Y=B?B[1]:"Unknown"}else if(R.includes("firefox")){Z="Firefox";const B=P.match(/Firefox\/(\d+\.\d+)/);Y=B?B[1]:"Unknown"}else if(R.includes("safari")&&!R.includes("chrome")){Z="Safari";const B=P.match(/Version\/(\d+\.\d+)/);Y=B?B[1]:"Unknown"}else if(R.includes("edg")){Z="Edge";const B=P.match(/Edg\/(\d+\.\d+)/);Y=B?B[1]:"Unknown"}return{name:Z,version:Y}},I=()=>{const P=navigator.userAgent;let R="Unknown",Z="Unknown";if(P.includes("Windows NT")){R="Windows";const Y=P.match(/Windows NT (\d+\.\d+)/);Z=Y?Y[1]:"Unknown"}else if(P.includes("Mac OS X")){R="macOS";const Y=P.match(/Mac OS X (\d+[._]\d+[._]?\d*)/);Z=Y?Y[1].replace(/_/g,"."):"Unknown"}else if(P.includes("Linux"))R="Linux",Z="Unknown";else if(P.includes("Android")){R="Android";const Y=P.match(/Android (\d+\.\d+)/);Z=Y?Y[1]:"Unknown"}else if(P.includes("iPhone")||P.includes("iPad")){R="iOS";const Y=P.match(/OS (\d+[._]\d+[._]?\d*)/);Z=Y?Y[1].replace(/_/g,"."):"Unknown"}return{name:R,version:Z}},D=()=>{localStorage.setItem("speechRecognitionLang",c.value),console.log("Speech recognition language updated:",c.value)};return Ue(()=>{l.value=n.isSubscribedToPush;const P=localStorage.getItem("speechRecognitionLang");P&&(c.value=P)}),Be(()=>n.isSubscribedToPush,P=>{l.value=P}),Be(()=>n.notificationPermission,P=>{P==="denied"&&l.value&&(l.value=!1)}),(P,R)=>{var Z,Y,B;return y(),b("div",Z2,[r("div",Q2,[r("div",X2,[r("div",e0,[r("div",t0,G(((Y=(Z=s.value)==null?void 0:Z.name)==null?void 0:Y.charAt(0))||"U"),1)]),s.value?(y(),b("div",n0,[r("h2",null,G(s.value.name||"User"),1),r("p",null,G(s.value.email||"email@example.com"),1),r("p",s0,G(s.value.status||"Online"),1),(B=s.value)!=null&&B.createdAt?(y(),b("p",o0," Member since: "+G(new Date(s.value.createdAt).toLocaleDateString()),1)):de("",!0)])):de("",!0)]),r("div",r0,[R[14]||(R[14]=r("h3",null,"Settings",-1)),r("div",i0,[R[5]||(R[5]=r("div",null,[r("h4",null,"Dark Mode"),r("p",null,"Enable dark theme for the app")],-1)),r("label",a0,[r("input",{type:"checkbox",checked:o.value,onChange:u},null,40,l0),R[4]||(R[4]=r("span",{class:"toggle-slider"},null,-1))])]),r("div",c0,[R[7]||(R[7]=r("div",null,[r("h4",null,"Notifications"),r("p",null,"Enable notifications for new messages")],-1)),r("label",u0,[we(r("input",{type:"checkbox","onUpdate:modelValue":R[0]||(R[0]=U=>i.value=U),onChange:f},null,544),[[pn,i.value]]),R[6]||(R[6]=r("span",{class:"toggle-slider"},null,-1))])]),r("div",d0,[R[9]||(R[9]=r("div",null,[r("h4",null,"Sound"),r("p",null,"Enable sound for notifications")],-1)),r("label",f0,[we(r("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=U=>a.value=U),onChange:p},null,544),[[pn,a.value]]),R[8]||(R[8]=r("span",{class:"toggle-slider"},null,-1))])]),r("div",p0,[r("div",null,[R[11]||(R[11]=r("h4",null,"Push Notifications",-1)),R[12]||(R[12]=r("p",null,"Enable push notifications for new messages",-1)),te(n).notificationPermission!=="granted"?(y(),b("div",g0,R[10]||(R[10]=[r("small",{class:"permission-warning"},"  Browser permission required ",-1)]))):de("",!0)]),r("label",v0,[we(r("input",{type:"checkbox","onUpdate:modelValue":R[2]||(R[2]=U=>l.value=U),onChange:g,disabled:te(n).notificationPermission==="denied"},null,40,h0),[[pn,l.value]]),r("span",{class:ke(["toggle-slider",{disabled:te(n).notificationPermission==="denied"}])},null,2)])]),r("div",m0,[r("div",w0,[R[13]||(R[13]=r("div",null,[r("h4",null,"Voice Input Language"),r("p",null,"Select language for speech recognition")],-1)),we(r("select",{"onUpdate:modelValue":R[3]||(R[3]=U=>c.value=U),onChange:D,class:"language-select"},[(y(),b(me,null,De(d,U=>r("option",{key:U.code,value:U.code},G(U.name),9,y0)),64))],544),[[Jt,c.value]])])])])])])}}}),_0=je(b0,[["__scopeId","data-v-42fce4d9"]]),C0={class:"news-page"},k0={class:"content-wrapper"},S0={class:"content-container"},x0=Ne({__name:"News",setup(e){ut();const t=O(window.innerWidth),n=()=>{t.value=window.innerWidth};return Ue(()=>{window.addEventListener("resize",n)}),at(()=>{window.removeEventListener("resize",n)}),Ue(()=>{}),(s,o)=>(y(),b("div",C0,[r("div",k0,[r("div",S0,[xe(Cl,{"hide-header":!0})])])]))}}),T0=je(x0,[["__scopeId","data-v-3dd2cf43"]]),E0={class:"news-detail-page"},A0={class:"content-wrapper"},I0={class:"content-container"},M0={class:"news-item"},$0={class:"news-item-header"},L0={class:"user-avatar"},D0={class:"user-info"},P0={class:"user-name"},R0={class:"post-time"},V0={class:"news-item-content"},O0=["src","alt"],N0={class:"news-actions"},B0={class:"action-button"},H0={class:"comments-section"},F0={class:"comment-form"},U0={class:"user-avatar current"},j0={class:"comment-input-container"},z0={class:"input-with-voice"},W0={class:"comments-list"},K0={class:"comment-header"},G0={class:"user-avatar"},q0={class:"comment-info"},Y0={class:"comment-user-name"},J0={class:"comment-time"},Z0={class:"comment-content"},Q0={class:"comment-actions"},X0={class:"comment-action"},ew=Ne({__name:"NewsDetail",setup(e){ut();const t=Dn(),n=O(parseInt(t.params.id)),s=O(window.innerWidth),o=()=>{s.value=window.innerWidth};Ue(()=>{window.addEventListener("resize",o)}),at(()=>{window.removeEventListener("resize",o)});const i=O(!1),a=()=>{i.value=!1},l=$=>{const I=$.target;i.value&&!I.closest(".menu-container")&&a()},c={id:0,name:"Current User"},d=O({id:n.value,userId:1,userName:"John Smith",content:"Had an amazing day hiking in the mountains! The view was absolutely breathtaking.",images:["https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80","https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"],likes:24,isLiked:!1,comments:6,timeAgo:"2 hours ago"}),u=O([{id:1,userId:2,userName:"Mary Johnson",content:"Beautiful view! Which trail did you take?",likes:3,timeAgo:"1 hour ago"},{id:2,userId:3,userName:"Alex Wilson",content:"This looks amazing! I need to visit this place.",likes:2,timeAgo:"45 minutes ago"},{id:3,userId:4,userName:"Helen Brown",content:"The colors in the first picture are stunning!",likes:1,timeAgo:"30 minutes ago"}]),f=O(""),p=$=>{f.value=f.value?f.value+" "+$:$},g=()=>{f.value.trim()&&(u.value.unshift({id:u.value.length+1,userId:c.id,userName:c.name,content:f.value.trim(),likes:0,timeAgo:"Just now"}),f.value="")},k=$=>{$.isLiked=!$.isLiked,$.isLiked?$.likes++:$.likes--},v=$=>$.charAt(0);return window.addEventListener("click",l),at(()=>{window.removeEventListener("click",l)}),($,I)=>(y(),b("div",E0,[r("div",A0,[r("div",I0,[r("div",M0,[r("div",$0,[r("div",L0,G(v(d.value.userName)),1),r("div",D0,[r("div",P0,G(d.value.userName),1),r("div",R0,G(d.value.timeAgo),1)])]),r("div",V0,[r("p",null,G(d.value.content),1),d.value.images&&d.value.images.length>0?(y(),b("div",{key:0,class:ke(["news-images",{"single-image":d.value.images.length===1,"multi-image":d.value.images.length>1}])},[(y(!0),b(me,null,De(d.value.images,(D,P)=>(y(),b("div",{key:P,class:"image-container"},[r("img",{src:D,alt:`${d.value.userName}'s post image ${P+1}`,loading:"lazy"},null,8,O0)]))),128))],2)):de("",!0)]),r("div",N0,[r("button",{class:ke(["action-button",{liked:d.value.isLiked}]),onClick:I[0]||(I[0]=D=>k(d.value))},[I[2]||(I[2]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)),r("span",null,G(d.value.likes),1)],2),r("button",B0,[I[3]||(I[3]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})],-1)),r("span",null,G(d.value.comments),1)]),I[4]||(I[4]=r("button",{class:"action-button"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},[r("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})]),r("span",null,"Share")],-1))])]),r("div",H0,[r("h2",null,"Comments ("+G(u.value.length)+")",1),r("div",F0,[r("div",U0,G(v(c.name)),1),r("div",j0,[r("div",z0,[we(r("textarea",{"onUpdate:modelValue":I[1]||(I[1]=D=>f.value=D),class:"comment-input",placeholder:"Write a comment...",rows:"3"},null,512),[[Ae,f.value]]),xe(ht,{onTextRecognized:p})]),r("button",{class:"post-button",onClick:g},"Post")])]),r("div",W0,[(y(!0),b(me,null,De(u.value,D=>(y(),b("div",{key:D.id,class:"comment-item"},[r("div",K0,[r("div",G0,G(v(D.userName)),1),r("div",q0,[r("div",Y0,G(D.userName),1),r("div",J0,G(D.timeAgo),1)])]),r("div",Z0,G(D.content),1),r("div",Q0,[r("button",X0,[I[5]||(I[5]=r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[r("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)),r("span",null,G(D.likes),1)]),I[6]||(I[6]=r("button",{class:"comment-action"},"Reply",-1))])]))),128))])])])])]))}}),tw=je(ew,[["__scopeId","data-v-3f967941"]]),nw={class:"create-news-page"},sw={class:"news-form"},ow={key:0,class:"error-message"},rw={class:"form-group"},iw={class:"input-with-voice"},aw={class:"form-group"},lw={class:"image-upload-container"},cw={key:0,class:"image-previews"},uw=["src"],dw=["onClick"],fw={class:"form-actions"},pw=["disabled"],gw={key:0},vw={key:1},hw=Ne({__name:"CreateNews",setup(e){const t=ut(),n=O(window.innerWidth),s=()=>{n.value=window.innerWidth};Ue(()=>{window.addEventListener("resize",s)}),at(()=>{window.removeEventListener("resize",s)});const o=O(""),i=O([]),a=O(!1),l=O(""),c=p=>{var $;const g=p.target;if(!(($=g.files)!=null&&$.length))return;const k=g.files[0],v=new FileReader;v.onload=I=>{var P;const D=(P=I.target)==null?void 0:P.result;typeof D=="string"&&i.value.push(D)},v.readAsDataURL(k)},d=p=>{i.value.splice(p,1)},u=p=>{o.value=o.value?o.value+" "+p:p},f=()=>{if(o.value.trim()===""){l.value="Please enter some content";return}a.value=!0,l.value="",setTimeout(()=>{a.value=!1,t.push("/news")},1500)};return(p,g)=>(y(),b("div",nw,[r("div",{class:ke(["create-news-content",{"mobile-container":n.value<=768}])},[r("div",sw,[l.value?(y(),b("div",ow,G(l.value),1)):de("",!0),r("div",rw,[g[1]||(g[1]=r("label",{for:"news-content"},"What's on your mind?",-1)),r("div",iw,[we(r("textarea",{id:"news-content","onUpdate:modelValue":g[0]||(g[0]=k=>o.value=k),class:"content-input",placeholder:"Share your thoughts...",rows:"4"},null,512),[[Ae,o.value]]),xe(ht,{onTextRecognized:u})])]),r("div",aw,[g[4]||(g[4]=r("label",null,"Add Photos",-1)),r("div",lw,[g[2]||(g[2]=r("label",{for:"image-upload",class:"image-upload-label"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},[r("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"})]),r("span",null,"Upload Image")],-1)),r("input",{type:"file",id:"image-upload",accept:"image/*",class:"image-input",onChange:c},null,32)]),i.value.length>0?(y(),b("div",cw,[(y(!0),b(me,null,De(i.value,(k,v)=>(y(),b("div",{key:v,class:"image-preview"},[r("img",{src:k,alt:"Preview"},null,8,uw),r("button",{class:"remove-image",onClick:$=>d(v)},g[3]||(g[3]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},[r("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]),8,dw)]))),128))])):de("",!0)]),r("div",fw,[r("button",{class:"publish-button",onClick:f,disabled:a.value},[a.value?(y(),b("span",gw,"Publishing...")):(y(),b("span",vw,"Publish"))],8,pw)])])],2)]))}}),mw=je(hw,[["__scopeId","data-v-5646c8c2"]]),ww={class:"news-detail-page"},yw=Ne({__name:"ManifestoSocial",setup(e){ut();const t=O(window.innerWidth),n=()=>{t.value=window.innerWidth};Ue(()=>{window.addEventListener("resize",n),window.addEventListener("click",i)}),at(()=>{window.removeEventListener("resize",n),window.removeEventListener("click",i)});const s=O(!1),o=()=>{s.value=!1},i=a=>{const l=a.target;s.value&&!l.closest(".menu-container")&&o()};return(a,l)=>(y(),b("div",ww,l[0]||(l[0]=[kn('<div class="content-wrapper" data-v-1165425c><div class="content-container" data-v-1165425c><div class="news-item" data-v-1165425c><div class="news-item-content" data-v-1165425c><h1 class="manifesto-title" data-v-1165425c>LIGHTWEIGHT TASK MANAGER MANIFESTO</h1><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>1</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Simplicity and Intuitiveness</h3><p data-v-1165425c> An effective task manager should be as simple as possible to use. Any team member can start working within minutes without lengthy training. The interface should be intuitive and not distract from the main tasks. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>2</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Transparency and Visibility</h3><p data-v-1165425c> Every team member should see the overall project picture. Task statuses, priorities, and assignees should be visible to all participants. Work transparency promotes better coordination and trust within the team. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>3</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Flexibility and Adaptability</h3><p data-v-1165425c> The system should adapt to various work methodologies - from simple task lists to Kanban and Scrum. Teams should be able to customize workflows to their needs. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>4</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Effective Communication</h3><p data-v-1165425c> Built-in tools for task discussions, comments, and feedback. All communication should be tied to task context to avoid losing important information. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>5</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Security and Privacy</h3><p data-v-1165425c> Project data should be protected by modern encryption methods. Information access should be clearly role-based. Regular backups ensure data preservation. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>6</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>High Performance</h3><p data-v-1165425c> The system should work fast and stable even with large numbers of tasks and users. Interface response time should be minimal, and data synchronization should be instant. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>7</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Integration and Compatibility</h3><p data-v-1165425c> Easy integration with popular development tools, calendars, version control systems, and other services. API should allow creating custom integrations. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>8</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Smart Notifications</h3><p data-v-1165425c> The notification system should be customizable and not distract from work. Only important updates and critical changes should require immediate attention. Ability to configure notification frequency and channels. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>9</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Analytics and Reporting</h3><p data-v-1165425c> Built-in tools for analyzing team productivity, task completion times, and process bottlenecks. Data should help improve workflows and planning. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>10</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Scalability</h3><p data-v-1165425c> The system should work equally well for small teams of 3-5 people and large organizations with hundreds of users. Architecture should allow horizontal scaling. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>11</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Openness and Development Transparency</h3><p data-v-1165425c> Product development roadmap should be open. Users should be able to influence development priorities through voting and feature suggestions. </p></div></div><div class="manifesto-point" data-v-1165425c><div class="point-number" data-v-1165425c>12</div><div class="point-content" data-v-1165425c><h3 data-v-1165425c>Support and Community</h3><p data-v-1165425c> Quality technical support and active user community. Comprehensive documentation, educational materials, and quick help when questions or problems arise. </p></div></div></div></div></div></div>',1)])))}}),bw=je(yw,[["__scopeId","data-v-1165425c"]]),_w={class:"join-chat-container"},Cw={key:0,class:"welcome-section"},kw={key:1,class:"auth-section"},Sw=Ne({__name:"JoinChat",setup(e){const t=Dn(),n=ut(),s=Ht(),o=O(!1),i=O("");Ue(()=>{i.value=t.params.token,console.log({token:i.value}),i.value&&(a(i.value).then(()=>{console.log("joinChat success")}).catch(g=>{console.error("Error joinChat:",g)}),s.user||(o.value=!0))}),ds(()=>{console.log("onBeforeUnload joinChat")});const a=async g=>{console.log("joinChat");const{data:k,error:v}=await be.http("POST","/api/main/invitations/use",{token:g});v?console.error("Error joinChat:",v):k&&k.status==="success"&&console.log(k)},l=()=>{n.push({name:"Chat"})},c=()=>{o.value=!1},d=O(!1),u=O(!0),f=()=>{d.value=!0,u.value=!1},p=()=>{d.value=!1,u.value=!0};return(g,k)=>(y(),b("div",_w,[te(s).user?(y(),b("div",Cw,[r("h1",null,"Welcome, "+G(te(s).user.name)+"!",1),k[1]||(k[1]=r("p",null,"You're about to join a conversation. Click the button below to continue.",-1)),r("button",{class:"join-button",onClick:l},"Join Chat")])):(y(),b("div",kw,[k[2]||(k[2]=r("h1",null,"Join the Chat",-1)),k[3]||(k[3]=r("p",null,"Please register or sign in to join the conversation.",-1)),r("button",{class:"auth-button",onClick:k[0]||(k[0]=v=>o.value=!0)},"Sign In / Register")])),o.value?(y(),ot(_l,{key:2,"show-login":d.value,"show-register":u.value,token:i.value,onClose:c,onAuthSuccess:l,onShowLogin:f,onShowRegister:p},null,8,["show-login","show-register","token"])):de("",!0)]))}}),xw=je(Sw,[["__scopeId","data-v-c434474a"]]),Tw=[{path:"/",name:"Login",component:vv},{path:"/chat",name:"Chat",component:Hn,meta:{requiresAuth:!0}},{path:"/projects",name:"Projects",component:Hn,meta:{requiresAuth:!0,tab:"projects"}},{path:"/tasks",name:"Tasks",component:Hn,meta:{requiresAuth:!0,tab:"tasks"}},{path:"/calendar",name:"Calendar",component:Hn,meta:{requiresAuth:!0,tab:"calendar"}},{path:"/notes",name:"Notes",component:Hn,meta:{requiresAuth:!0,tab:"notes"}},{path:"/join-chat/:token",name:"JoinChat",component:xw},{path:"/account",name:"UserAccount",component:_0,meta:{requiresAuth:!0,title:"Account Settings",backPath:"/chat",backLabel:"Back to Chat"}},{path:"/news",name:"News",component:T0,meta:{requiresAuth:!0,title:"Notes",backPath:"/chat",backLabel:"Back to Chat"}},{path:"/news/create",name:"CreateNews",component:mw,meta:{requiresAuth:!0,title:"Create News Post",backPath:"/news",backLabel:"Back to News"}},{path:"/news/:id",name:"NewsDetail",component:tw,meta:{requiresAuth:!0,title:"News",backPath:"/news",backLabel:"Back to News"}},{path:"/manifesto",name:"Manifesto",component:bw}],kl=Gf({history:Cf("/"),routes:Tw});kl.beforeEach((e,t,n)=>{const s=e.matched.some(a=>a.meta.requiresAuth),i=Ht().hasUser();s&&!i?n("/"):n()});const hr=sd(wg);hr.use(id());hr.use(kl);hr.mount("#app");class Ew{constructor(){mr(this,"registration",null)}async register(){if(!("serviceWorker"in navigator))return console.warn("[SW] Service workers not supported"),null;try{return console.log("[SW] Registering service worker..."),this.registration=await navigator.serviceWorker.register("/service-worker.js",{scope:"/",updateViaCache:"none"}),console.log("[SW] Service worker registered:",this.registration),this.setupUpdateHandlers(),this.registration}catch(t){return console.error("[SW] Registration failed:",t),null}}async checkForUpdates(){if(this.registration)try{await this.registration.update(),console.log("[SW] Update check completed")}catch(t){console.error("[SW] Update check failed:",t)}}setupUpdateHandlers(){this.registration&&(this.registration.addEventListener("updatefound",()=>{console.log("[SW] New service worker found");const t=this.registration.installing;t&&t.addEventListener("statechange",()=>{t.state==="activated"&&(console.log("[SW] New service worker activated"),jo())})}),this.registration.waiting&&(console.log("[SW] Service worker waiting to activate"),jo()))}}async function Aw(){try{const e=new Ew;await e.register()&&(console.log("[SW] Service worker initialized successfully"),navigator.serviceWorker.addEventListener("message",n=>{console.log("[SW] Message from service worker:",n.data),n.data==="NEW_VERSION"&&jo()}),setInterval(async()=>{await e.checkForUpdates()},6e4))}catch(e){console.error("[SW] Service worker initialization failed:",e)}}function jo(){console.log("[SW] Showing update notification");const e=document.createElement("div");e.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #145fc2;
        color: white;
        padding: 16px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 10000;
        font-family: Inter, sans-serif;
        font-size: 14px;
        max-width: 300px;
        animation: slideIn 0.3s ease;
    `,e.innerHTML=`
        <div style="margin-bottom: 8px; font-weight: 600;">
             New version available!
        </div>
        <div style="margin-bottom: 12px; opacity: 0.9;">
            Refresh to get the latest features
        </div>
        <button onclick="window.location.reload()" style="
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 8px;
            font-weight: 500;
        ">Refresh</button>
        <button onclick="this.parentElement.remove()" style="
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        ">Later</button>
    `;const t=document.createElement("style");t.textContent=`
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    `,document.head.appendChild(t),document.body.appendChild(e),setTimeout(()=>{e.parentElement&&(e.style.animation="slideIn 0.3s ease reverse",setTimeout(()=>e.remove(),300))},1e4)}Aw();
